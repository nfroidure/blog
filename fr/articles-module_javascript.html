<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo.svg"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/655a273f6fe37552.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/cd8d1ff5c688cf4d.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://insertafter.com/_next/static/chunks/webpack-bc3269b1fdd7d5a8.js" crossorigin=""/><script src="https://insertafter.com/_next/static/chunks/fd9d1056-5bc70f044f3cb802.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/938-bf741a2eb8fd4828.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/main-app-2e6280b5273157a5.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/176-0a03be62efe5672b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/790-a194f74901d33197.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/%5B%5B...slug%5D%5D/page-992952bac383cfc2.js" async=""></script><meta name="theme-color" content="#3e78b2"/><title>Les modules Javascript¬†: Un joyeux B - Nicolas Froidure</title><meta name="description" content="D√®s lors que l&#x27;on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript."/><link rel="author" href="https://insertafter.com"/><meta name="author" content="Nicolas Froidure"/><meta name="robots" content="index, follow"/><link rel="canonical" href="https://insertafter.com/fr/blog/module_javascript"/><meta property="og:title" content="Les modules Javascript¬†: Un joyeux B - Nicolas Froidure"/><meta property="og:description" content="D√®s lors que l&#x27;on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript."/><meta property="og:url" content="https://insertafter.com/fr/blog/module_javascript"/><meta property="og:site_name" content="Nicolas Froidure"/><meta property="og:locale" content="fr_FR"/><meta property="og:image:alt" content="Banni√®re du site"/><meta property="og:image" content="https://insertafter.com/images/banner.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@nfroidure"/><meta name="twitter:creator" content="@nfroidure"/><meta name="twitter:title" content="Les modules Javascript¬†: Un joyeux B - Nicolas Froidure"/><meta name="twitter:description" content="D√®s lors que l&#x27;on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript."/><meta name="twitter:image:alt" content="Banni√®re du site"/><meta name="twitter:image" content="https://insertafter.com/images/banner.png"/><link rel="icon" href="/images/favicon.svg" type="image/svg+xml" sizes="any"/><link rel="icon" href="/images/favicon-16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/images/favicon-128.png" type="image/png" sizes="128x128"/><script src="https://insertafter.com/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="layout_body__jFZuu"><header class="header_iaHeader__4vCMA"><div><h1><a href="/fr" title="Retour √† l‚Äôaccueil" class="header_iaHeaderLogo__0uNr1"><img src="/images/logo.svg" alt="Logo d‚ÄôInsertAfter"/></a></h1></div></header><nav class="menu_iaMenu__B_rtj"><ul class="menu_iaMenuBody__0Zveq"><li class="menu_iaMenuItem__rOch4"><a href="/fr" title="Retour √† l‚Äôaccueil" class="">Accueil</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/blog" title="Retour √† l‚Äôindex du blog" class="">Blog</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/projets" title="D√©couvrir mes divers projets" class="">Projets</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/a_propos" title="En savoir plus √† mon sujet" class="">√Ä propos</a></li></ul></nav><nav class="languages_iaLanguages__K2J3W"><ul><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagEn__angfJ languages_selected__w1dKv"><a href="/en"><span>en</span></a></li><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagFr__Us5Jb"><a href="/fr"><span>fr</span></a></li></ul></nav><main class="layout_iaMain__6s2gl"><div><section class="contentBlock_root__802UK"><h1 class="h1_root__VPXQG"><span>Les modules Javascript¬†: Un joyeux B</span></h1><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><span>‚ö† Attention: Cet article est ancien et son contenu n&#x27;est plus d&#x27;actualit√©. Les modules JavaScript sont maintenant unifi√©s et en passe d&#x27;√™tre support√©s nativement sur toutes les plateformes gr√¢ce √† l&#x27;effort de standardisation r√©alis√© par la communaut√©.</span></p><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><span>D√®s lors que l&#x27;on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript.</span></p><p class="p_root__SHE_W"><span>Il existe deux approches principales pour la cr√©ation de modules Javascript, </span><a class="a_root__WEPS7" title="Voir la d√©finition Wikip√©dia" target="_blank" href="https://fr.wikipedia.org/wiki/CommonJS"><span>CommonJS</span></a><span>, bas√© sur une approche synchrone du chargement de module et AMD bas√© sur le chargement asynchrone des modules. Voici le r√©sultats de mes recherches sur le sujet.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Principe de base</span> <small><a class="anchored_icon__N5Sem" id="principe-de-base" title="Lien vers cette section" href="#principe-de-base"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Que ce soit c√¥t√© serveur ou c√¥t√© client, le contenu d&#x27;un fichier Javascript s‚Äôex√©cute dans le contexte global. L&#x27;objectif des modules est de cloisonner le code dans un contexte restreint (appel√© scope), et d&#x27;exporter de ce contexte uniquement les informations n√©cessaires √† sa bonne utilisation (closure pattern). Un exemple simple de ce principe¬†:</span></p><div class="code_root__5JLV_"><code><pre>(function (exports) {
  var a = 1,
    b = 2; // Cr√©ation de deux variables dans le scope restreint
  exports.a = a; // Variable a export√©e dans le scope global
})(window);</pre></code></div><p class="p_root__SHE_W"><span>Ce script est tr√®s basique malgr√© son apparence peu conventionnelle pour un d√©veloppeur d√©butant en Javascript. Il cr√©e une fonction anonyme entre parenth√®se et l‚Äôex√©cute imm√©diatement apr√®s. L&#x27;objet window repr√©sentant le contexte global, il est pass√© en argument √† cette fonction.</span></p><p class="p_root__SHE_W"><span>Ainsi, √† l&#x27;int√©rieur de la fonction, le code s&#x27;ex√©cute dans un contexte restreint et seules les variables ajout√©es √† l&#x27;objet exports seront disponibles dans le contexte global. A noter que par variable, √©tant donn√© la nature de Javascript, il peut s&#x27;agir de types natifs ou d&#x27;objets (donc aussi de fonctions).</span></p><p class="p_root__SHE_W"><span>Nous aurions pu passer en param√®tre un autre contexte et ainsi permettre l&#x27;utilisation du module par un autre module.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Approche synchrone (CommonJS, NodeJS)</span> <small><a class="anchored_icon__N5Sem" id="approche-synchrone-commonjs-nodejs" title="Lien vers cette section" href="#approche-synchrone-commonjs-nodejs"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Conscients de la n√©cessit√© de modulariser le Javascript, l&#x27;initiative CommonJs a propos√© une m√©thode qui est utilis√©e au sein de NodeJS. Les modules CommonJS proposent deux √©l√©ments centraux. La fonction require() qui retourne le contenu export√© au chargement d&#x27;un module et l&#x27;objet exports qui permet, un peu √† la mani√®re de l&#x27;exemple pr√©c√©dent, d&#x27;exporter certaines valeurs du module.</span></p><p class="p_root__SHE_W"><span>La </span><a class="a_root__WEPS7" title="Voir le fichier" target="_blank" href="https://github.com/nfroidure/VarStream/blob/ed0b883f15a0ba1e59beebcaf77169adefa4ec53/VarStreamReader.js#L344"><span>derni√®re ligne du fichier VarStreamReader</span></a><span> de mon projet VarStream montre bien comment exporter un objet (ici l&#x27;objet VarStreamReader)¬†:</span></p><div class="code_root__5JLV_"><code><pre>if (!(typeof module == &quot;undefined&quot;)) module.exports = VarStreamReader;</pre></code></div><p class="p_root__SHE_W"><span>La condition sert √† pouvoir utiliser le fichier dans un contexte √©tranger √† CommonJS. Pour charger un module, rien de plus simple, il suffit d&#x27;utiliser la fonction globale require() comme on peut le voir dans ce fichier qui inclus le module cit√© pr√©c√©demment¬†:</span></p><div class="code_root__5JLV_"><code><pre>var VarStreamReader = require(&quot;./VarStreamReader&quot;);</pre></code></div><p class="p_root__SHE_W"><span>Cette approche est parfaite pour le Javascript c√¥t√© serveur puisque le chargement se fait directement √† partir du disque dur. Malheureusement, celle-ci est imparfaite pour le chargement de modules c√¥t√© client, dans un navigateur.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Approche Asynchrone (AMD)</span> <small><a class="anchored_icon__N5Sem" id="approche-asynchrone-amd" title="Lien vers cette section" href="#approche-asynchrone-amd"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>L&#x27;approche synchrone dans le navigateur induit un chargement s√©quentiel des fichiers Javascript compos√© d&#x27;it√©rations successives de la s√©quence t√©l√©chargement + interpr√©tation. Ainsi, si un module n√©cessite le chargement de trois autres modules (concept appel√© d√©pendance), le temps n√©cessaire pour r√©soudre ces d√©pendances sera donc une addition des temps de t√©l√©chargement et d&#x27;interpr√©tation de chacun des trois fichiers Javascript.</span></p><p class="p_root__SHE_W"><span>Un autre inconv√©nient de l&#x27;approche synchrone est qu&#x27;elle implique le chargement du fichier via la fonction </span><code class="code_root__5JLV_">eval</code><span> n√©cessairement. Or comme le rappelle la c√©l√®bre expression eval is evil, cela pose de s√©rieux probl√®mes. En effet, la fonction </span><code class="code_root__5JLV_">eval</code><span> rend le d√©bogage beaucoup plus compliqu√© puisque le num√©ro de la ligne et le nom de fichier ayant provoqu√© l&#x27;erreur ne sont pas connus, de plus, la fonction </span><code class="code_root__5JLV_">eval</code><span> n&#x27;est pas homog√®ne sur tous les navigateurs posant des probl√®mes √©vidents de compatibilit√© Cross-Browser.</span></p><p class="p_root__SHE_W"><span>Il a donc fallu trouver une approche permettant de t√©l√©charger chaque fichier Javascript de la m√™me mani√®re que le fait le navigateur pour les fichiers Javascript inclus directement dans le HTML. Pour cela, l&#x27;initiative AMD impl√©ment√©e dans la tr√®s c√©l√®bre librairie </span><a class="a_root__WEPS7" title="En savoir plus sur cette librairie bien pratique" target="_blank" href="https://requirejs.org/"><span>RequireJs</span></a><span> utilise un concept bien connu depuis l&#x27;av√®nement d&#x27;Ajax.</span></p><p class="p_root__SHE_W"><span>En effet, RequireJs </span><a class="a_root__WEPS7" title="Voir le code de RequireJs impliqu√©" target="_blank" href="https://github.com/requirejs/requirejs/blob/master/require.js"><span>ajoute une balise </span><code class="code_root__5JLV_">&lt;script&gt;</code></a><span> gr√¢ce aux fonctions de manipulation du DOM. Gr√¢ce √† une fonction de callback, le nom, les d√©pendances et le contenu du module sont d√©clar√©s. Les chargements de scripts avec fonctions de callback √©taient tr√®s utilis√©es pour charger du JSon depuis un nom de domaine tiers.</span></p><p class="p_root__SHE_W"><span>Cette approche permet un chargement asynchrone de toutes les ressources qui sont d√®s lors parall√©lis√©es. Le temps de chargement des modules est donc r√©duit au temps de chargement et d&#x27;interpr√©tation du dernier fichier Javascript √† √™tre totalement t√©l√©charg√©.</span></p><p class="p_root__SHE_W"><span>L&#x27;√©criture d&#x27;un module AMD se pr√©sente comme suit¬†:</span></p><div class="code_root__5JLV_"><code><pre>define(&quot;moduleName&quot;, [&quot;dep1&quot;, &quot;dep2&quot;], function (dep1, dep2) {
  // dep1 et dep2 contiennent les exports r√©alis√©s par les modules dont d√©pend ce m√™me module
  // le contenu du module vient ici
  return function () {}; // Ici, le module exporte via un retour de fonction, les valeurs souhait√©es.
});</pre></code></div><p class="p_root__SHE_W"><span>On pourrait croire que tout est bien qui fini bien, mais il nous reste un gros probl√®me √† r√©soudre. Comment utiliser les modules AMD avec NodeJS et vice-versa¬†? Il </span><a class="a_root__WEPS7" title="Voir les solutions passe-partout existantes" target="_blank" href="http://www.2ality.com/2011/11/module-gap.html"><span>existe plusieurs solutions</span></a><span> pour rendre inter-compatibles les diff√©rents modules, mais cela reste une sorte de tambouille incompr√©hensible. D&#x27;ailleurs, je serais ravi d&#x27;avoir vos bonnes pratiques en la mati√®re.</span></p><p class="p_root__SHE_W"><span>Edit¬†: On me </span><a class="a_root__WEPS7" title="Voir la conversation" target="_blank" href="https://twitter.com/%5FFlorian%5FR/status/236437043004207104"><span>souffle dans l&#x27;oreille</span></a><span> que </span><code class="code_root__5JLV_">require.js</code><span> est utilisable avec NodeJs, un petit lot de consolation donc ;).</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>ECMAScript 6¬†: La lumi√®re au bout du tunnel</span> <small><a class="anchored_icon__N5Sem" id="ecmascript-6-la-lumiere-au-bout-du-tunnel" title="Lien vers cette section" href="#ecmascript-6-la-lumiere-au-bout-du-tunnel"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Gr√¢ce √† la derni√®re mouture d&#x27;ECMAScript (aussi appel√© ECMAScript.next) le standard qui sous tend Javascript, un gestionnaire natif de modules Javascript sera disponible. Malheureusement, on ne peut faire aucune pr√©vision en ce qui concerne le jour o√π il sera envisageable d&#x27;utiliser ce dernier √©tant donn√© qu&#x27;il faudra que tous les principaux navigateurs du march√© l&#x27;aient impl√©ment√©. En ce qui concerne NodeJs, √©tant donn√© qu&#x27;il est bas√© sur le moteur javascript V8 de Google Chrome, son impl√©mentation sera s√ªrement conditionn√©e √† celle de Google Chrome.</span></p><p class="p_root__SHE_W"><span>L&#x27;approche de la nouvelle version de Javascript est simple, le mot cl√© export permet de d√©clarer une fonction comme devant √™tre export√©e ou d&#x27;√©num√©rer les variables devant √™tre export√©e.</span></p><div class="code_root__5JLV_"><code><pre>var a=1, b=2, c=3;
 export a, b, c;
export function() {};</pre></code></div><p class="p_root__SHE_W"><span>Voil√†, vivement que nous puissions enfin utiliser cette version de Javascript et r√©soudre tous nos probl√®mes de compatibilit√© de modules. Vos pr√©cisions ou commentaires sont les bienvenus.</span></p><p class="p_root__SHE_W">Published at<!-- --> <!-- -->vendredi 17 ao√ªt 2012 √† 13:34:48<!-- -->.</p></section><section class="contentBlock_root__802UK"><aside class="share_root__Qm_RR"><h2 class="h2_root__Y02lX">Commenter et partager</h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Commenter sur Facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fmodule_javascript"><span class="share_icon__bi4Q3 share_facebook__JKn8d"></span>Facebook</a> - <a class="a_root__WEPS7" title="Commenter sur Twitter" target="_blank" href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fmodule_javascript&amp;text=Les%20modules%20Javascript%C2%A0%3A%20Un%20joyeux%20B&amp;via=nfroidure"><span class="share_icon__bi4Q3 "></span>Twitter</a> - <a class="a_root__WEPS7" title="Me r√©pondre par mail" target="_self" href="mailto:nicolas.froidure@gmail.com"><span class="share_icon__bi4Q3 share_mail__yvBDK"></span>Courriel</a></p></aside></section><section class="contentBlock_root__802UK"><aside class="page_linkedEntries__jiPuT"><h2 class="h2_root__Y02lX">Articles similaires</h2><p class="p_root__SHE_W">Dans les cat√©gories<!-- --> <!-- -->JavaScript<!-- -->.</p><div class="items_entries__5hkLG"><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//firefox_mobile_console">Firefox Mobile Android¬†: Acc√©der aux consoles d&#x27;erreur Javascript / stderr</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Pour d√©velopper pour Firefox Mobile, mieux vaut avoir la console d&#x27;erreur √† port√©e de main. Voici la m√©thode.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//firefox_mobile_console">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->lundi 18 juin 2012 √† 09:49:47<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//markdown_ast_vers_react">Rendre votre contenu Markdown avec React via l&#x27;AST</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">O√π comment ne plus jamais utiliser dangerouslySetInnerHTML.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//markdown_ast_vers_react">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->mercredi 1 d√©cembre 2021 √† 23:00:00<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//injection_de_dependance_nodejs">Injection de d√©pendances avec NodeJS </a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Pr√©sentation donn√©e lors du ChtiJS 21 √† propos de l&#x27;injection de d√©pendances en JavaScript.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//injection_de_dependance_nodejs">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->samedi 2 f√©vrier 2019 √† 08:00:00<!-- -->.</p><div class="items_clear__3fyGk"></div></div></div></aside></section></div></main><aside class="social_iaSocial__kdR1x"><nav><ul><li><a href="https://mastodon.social/@nfroidure" rel="me" title="Me suivre sur Mastodon" class="social_iaSocialMastodon__MTF6o"><span>Mastodon</span></a></li><li><a href="https://bsky.app/profile/nfroidure.bsky.social" rel="me" title="Me suivre sur Bluesky" class="social_iaSocialBluesky__fKW6M"><span>Bluesky</span></a></li><li><a href="https://twitter.com/nfroidure" title="Me suivre sur Twitter" class="social_iaSocialTwitter__9nU6R"><span>Twitter</span></a></li><li><a href="https://github.com/nfroidure" title="Voir mes projets sur GitHub" class="social_iaSocialGithub__vcU5_"><span>GitHub</span></a></li><li><a href="https://www.npmjs.org/~nfroidure" title="Voir mon compte NPM" class="social_iaSocialNpm__6nku5"><span>NPM</span></a></li><li><a href="https://www.linkedin.com/in/nfroidure/" rel="me" title="Voir mon profil LinkedIn" class="social_iaSocialLinkedin__pWACO"><span>LinkedIn</span></a></li><li><a href="https://facebook.com/nicolas.froidure.douai" rel="me" title="Me suivre sur Facebook" class="social_iaSocialFacebook__w4wfH"><span>Facebook</span></a></li><li><a href="/fr/blog/index.atom" title="S‚Äôabonner au flux RSS" class="social_iaSocialFeed__gEQQ0"><span>Flux RSS</span></a></li></ul></nav></aside><footer class="footer_iaFooter__rhlnQ"><p class="footer_iaFooterContent__VZndF">¬© Nicolas Froidure 2012-<!-- -->2024</p></footer><script src="https://insertafter.com/_next/static/chunks/webpack-bc3269b1fdd7d5a8.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:HL[\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"style\",{\"crossOrigin\":\"\"}]\n3:HL[\"https://insertafter.com/_next/static/css/cd8d1ff5c688cf4d.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\na:I[1778,[],\"\"]\n11:I[8955,[],\"\"]\n8:[\"locale\",\"fr\",\"d\"]\n9:[\"slug\",\"articles-module_javascript\",\"oc\"]\nc:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\nd:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeig"])</script><script>self.__next_f.push([1,"ht\":\"49px\"}\ne:{\"display\":\"inline-block\"}\nf:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n"])</script><script>self.__next_f.push([1,"1:[null,[\"$\",\"$L4\",null,{\"buildId\":\"0iMe3vHKCcHPUIZbS85nF\",\"assetPrefix\":\"https://insertafter.com\",\"initialCanonicalUrl\":\"/fr/articles-module_javascript\",\"initialTree\":[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[[\"slug\",\"articles-module_javascript\",\"oc\"],{\"children\":[\"__PAGE__?{\\\"locale\\\":\\\"fr\\\",\\\"slug\\\":[\\\"articles-module_javascript\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true]}]}],\"initialSeedData\":[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[[\"slug\",\"articles-module_javascript\",\"oc\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\",\"$9\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/cd8d1ff5c688cf4d.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[null,\"$Lb\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$c\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$d\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$e\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$f\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]],\"initialHead\":[false,\"$L10\"],\"globalErrorComponent\":\"$11\"}]]\n"])</script><script>self.__next_f.push([1,"12:\"$Sreact.strict_mode\"\n13:I[4630,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\n14:I[4341,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"$12\",null,{\"children\":[\"$\",\"html\",null,{\"lang\":\"fr\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_body__jFZuu\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"header_iaHeader__4vCMA\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr\",\"title\":\"Retour √† l‚Äôaccueil\",\"className\":\"header_iaHeaderLogo__0uNr1\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/logo.svg\",\"alt\":\"Logo d‚ÄôInsertAfter\"}]}]}]}]}],[\"$\",\"$L13\",null,{\"locale\":\"fr\",\"dictionary\":{\"home\":{\"label\":\"Accueil\",\"title\":\"Retour √† l‚Äôaccueil\"},\"blog\":{\"label\":\"Blog\",\"title\":\"Retour √† l‚Äôindex du blog\"},\"projects\":{\"label\":\"Projets\",\"title\":\"D√©couvrir mes divers projets\"},\"about\":{\"label\":\"√Ä propos\",\"title\":\"En savoir plus √† mon sujet\"}}}],[\"$\",\"$L14\",null,{\"locale\":\"fr\"}],[\"$\",\"main\",null,{\"className\":\"layout_iaMain__6s2gl\",\"children\":[\"$\",\"div\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$L15\",\"notFoundStyles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/719d59f1b635ba1d.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],\"styles\":null}]}]}],[\"$\",\"aside\",null,{\"className\":\"social_iaSocial__kdR1x\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@nfroidure\",\"rel\":\"me\",\"title\":\"Me suivre sur Mastodon\",\"className\":\"social_iaSocialMastodon__MTF6o\",\"children\":[\"$\",\"span\",null,{\"children\":\"Mastodon\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://bsky.app/profile/nfroidure.bsky.social\",\"rel\":\"me\",\"title\":\"Me suivre sur Bluesky\",\"className\":\"social_iaSocialBluesky__fKW6M\",\"children\":[\"$\",\"span\",null,{\"children\":\"Bluesky\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://twitter.com/nfroidure\",\"title\":\"Me suivre sur Twitter\",\"className\":\"social_iaSocialTwitter__9nU6R\",\"children\":[\"$\",\"span\",null,{\"children\":\"Twitter\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/nfroidure\",\"title\":\"Voir mes projets sur GitHub\",\"className\":\"social_iaSocialGithub__vcU5_\",\"children\":[\"$\",\"span\",null,{\"children\":\"GitHub\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.org/~nfroidure\",\"title\":\"Voir mon compte NPM\",\"className\":\"social_iaSocialNpm__6nku5\",\"children\":[\"$\",\"span\",null,{\"children\":\"NPM\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/nfroidure/\",\"rel\":\"me\",\"title\":\"Voir mon profil LinkedIn\",\"className\":\"social_iaSocialLinkedin__pWACO\",\"children\":[\"$\",\"span\",null,{\"children\":\"LinkedIn\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://facebook.com/nicolas.froidure.douai\",\"rel\":\"me\",\"title\":\"Me suivre sur Facebook\",\"className\":\"social_iaSocialFacebook__w4wfH\",\"children\":[\"$\",\"span\",null,{\"children\":\"Facebook\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr/blog/index.atom\",\"title\":\"S‚Äôabonner au flux RSS\",\"className\":\"social_iaSocialFeed__gEQQ0\",\"children\":[\"$\",\"span\",null,{\"children\":\"Flux RSS\"}]}]}]]}]}]}],[\"$\",\"footer\",null,{\"className\":\"footer_iaFooter__rhlnQ\",\"children\":[\"$\",\"p\",null,{\"className\":\"footer_iaFooterContent__VZndF\",\"children\":[\"¬© Nicolas Froidure 2012-\",2024]}]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"15:[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"not-found_p__fvcGn\",\"children\":[[\"$\",\"img\",null,{\"className\":\"not-found_img__IT2jY\",\"src\":\"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif\",\"alt\":\"404.png\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":\"It seems that the page you look for doesn't exist.\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"16:I[5250,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"790\",\"static/chunks/790-a194f74901d33197.js\",\"730\",\"static/chunks/app/(withLocale)/%5Blocale%5D/%5B%5B...slug%5D%5D/page-992952bac383cfc2.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Les modules Javascript¬†: Un joyeux B\"}]]}],[\"$\",\"hr\",null,{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"‚ö† Attention: Cet article est ancien et son contenu n'est plus d'actualit√©. Les modules JavaScript sont maintenant unifi√©s et en passe d'√™tre support√©s nativement sur toutes les plateformes gr√¢ce √† l'effort de standardisation r√©alis√© par la communaut√©.\"}]]}],[\"$\",\"hr\",null,{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"D√®s lors que l'on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Il existe deux approches principales pour la cr√©ation de modules Javascript, \"}],[\"$\",\"$L16\",null,{\"href\":\"https://fr.wikipedia.org/wiki/CommonJS\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir la d√©finition Wikip√©dia\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"CommonJS\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\", bas√© sur une approche synchrone du chargement de module et AMD bas√© sur le chargement asynchrone des modules. Voici le r√©sultats de mes recherches sur le sujet.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Principe de base\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#principe-de-base\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"principe-de-base\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Que ce soit c√¥t√© serveur ou c√¥t√© client, le contenu d'un fichier Javascript s‚Äôex√©cute dans le contexte global. L'objectif des modules est de cloisonner le code dans un contexte restreint (appel√© scope), et d'exporter de ce contexte uniquement les informations n√©cessaires √† sa bonne utilisation (closure pattern). Un exemple simple de ce principe¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"(function (exports) {\\n  var a = 1,\\n    b = 2; // Cr√©ation de deux variables dans le scope restreint\\n  exports.a = a; // Variable a export√©e dans le scope global\\n})(window);\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ce script est tr√®s basique malgr√© son apparence peu conventionnelle pour un d√©veloppeur d√©butant en Javascript. Il cr√©e une fonction anonyme entre parenth√®se et l‚Äôex√©cute imm√©diatement apr√®s. L'objet window repr√©sentant le contexte global, il est pass√© en argument √† cette fonction.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ainsi, √† l'int√©rieur de la fonction, le code s'ex√©cute dans un contexte restreint et seules les variables ajout√©es √† l'objet exports seront disponibles dans le contexte global. A noter que par variable, √©tant donn√© la nature de Javascript, il peut s'agir de types natifs ou d'objets (donc aussi de fonctions).\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Nous aurions pu passer en param√®tre un autre contexte et ainsi permettre l'utilisation du module par un autre module.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Approche synchrone (CommonJS, NodeJS)\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#approche-synchrone-commonjs-nodejs\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"approche-synchrone-commonjs-nodejs\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Conscients de la n√©cessit√© de modulariser le Javascript, l'initiative CommonJs a propos√© une m√©thode qui est utilis√©e au sein de NodeJS. Les modules CommonJS proposent deux √©l√©ments centraux. La fonction require() qui retourne le contenu export√© au chargement d'un module et l'objet exports qui permet, un peu √† la mani√®re de l'exemple pr√©c√©dent, d'exporter certaines valeurs du module.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"La \"}],[\"$\",\"$L16\",null,{\"href\":\"https://github.com/nfroidure/VarStream/blob/ed0b883f15a0ba1e59beebcaf77169adefa4ec53/VarStreamReader.js#L344\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le fichier\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"derni√®re ligne du fichier VarStreamReader\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" de mon projet VarStream montre bien comment exporter un objet (ici l'objet VarStreamReader)¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"if (!(typeof module == \\\"undefined\\\")) module.exports = VarStreamReader;\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"La condition sert √† pouvoir utiliser le fichier dans un contexte √©tranger √† CommonJS. Pour charger un module, rien de plus simple, il suffit d'utiliser la fonction globale require() comme on peut le voir dans ce fichier qui inclus le module cit√© pr√©c√©demment¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"var VarStreamReader = require(\\\"./VarStreamReader\\\");\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Cette approche est parfaite pour le Javascript c√¥t√© serveur puisque le chargement se fait directement √† partir du disque dur. Malheureusement, celle-ci est imparfaite pour le chargement de modules c√¥t√© client, dans un navigateur.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Approche Asynchrone (AMD)\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#approche-asynchrone-amd\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"approche-asynchrone-amd\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'approche synchrone dans le navigateur induit un chargement s√©quentiel des fichiers Javascript compos√© d'it√©rations successives de la s√©quence t√©l√©chargement + interpr√©tation. Ainsi, si un module n√©cessite le chargement de trois autres modules (concept appel√© d√©pendance), le temps n√©cessaire pour r√©soudre ces d√©pendances sera donc une addition des temps de t√©l√©chargement et d'interpr√©tation de chacun des trois fichiers Javascript.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Un autre inconv√©nient de l'approche synchrone est qu'elle implique le chargement du fichier via la fonction \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"eval\"}],[\"$\",\"span\",\"2\",{\"children\":\" n√©cessairement. Or comme le rappelle la c√©l√®bre expression eval is evil, cela pose de s√©rieux probl√®mes. En effet, la fonction \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"eval\"}],[\"$\",\"span\",\"4\",{\"children\":\" rend le d√©bogage beaucoup plus compliqu√© puisque le num√©ro de la ligne et le nom de fichier ayant provoqu√© l'erreur ne sont pas connus, de plus, la fonction \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"eval\"}],[\"$\",\"span\",\"6\",{\"children\":\" n'est pas homog√®ne sur tous les navigateurs posant des probl√®mes √©vidents de compatibilit√© Cross-Browser.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Il a donc fallu trouver une approche permettant de t√©l√©charger chaque fichier Javascript de la m√™me mani√®re que le fait le navigateur pour les fichiers Javascript inclus directement dans le HTML. Pour cela, l'initiative AMD impl√©ment√©e dans la tr√®s c√©l√®bre librairie \"}],[\"$\",\"$L16\",null,{\"href\":\"https://requirejs.org/\",\"className\":\"a_root__WEPS7\",\"title\":\"En savoir plus sur cette librairie bien pratique\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"RequireJs\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" utilise un concept bien connu depuis l'av√®nement d'Ajax.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"En effet, RequireJs \"}],[\"$\",\"$L16\",null,{\"href\":\"https://github.com/requirejs/requirejs/blob/master/require.js\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le code de RequireJs impliqu√©\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"ajoute une balise \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"\u003cscript\u003e\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" gr√¢ce aux fonctions de manipulation du DOM. Gr√¢ce √† une fonction de callback, le nom, les d√©pendances et le contenu du module sont d√©clar√©s. Les chargements de scripts avec fonctions de callback √©taient tr√®s utilis√©es pour charger du JSon depuis un nom de domaine tiers.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Cette approche permet un chargement asynchrone de toutes les ressources qui sont d√®s lors parall√©lis√©es. Le temps de chargement des modules est donc r√©duit au temps de chargement et d'interpr√©tation du dernier fichier Javascript √† √™tre totalement t√©l√©charg√©.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'√©criture d'un module AMD se pr√©sente comme suit¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"define(\\\"moduleName\\\", [\\\"dep1\\\", \\\"dep2\\\"], function (dep1, dep2) {\\n  // dep1 et dep2 contiennent les exports r√©alis√©s par les modules dont d√©pend ce m√™me module\\n  // le contenu du module vient ici\\n  return function () {}; // Ici, le module exporte via un retour de fonction, les valeurs souhait√©es.\\n});\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"On pourrait croire que tout est bien qui fini bien, mais il nous reste un gros probl√®me √† r√©soudre. Comment utiliser les modules AMD avec NodeJS et vice-versa¬†? Il \"}],[\"$\",\"$L16\",null,{\"href\":\"http://www.2ality.com/2011/11/module-gap.html\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir les solutions passe-partout existantes\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"existe plusieurs solutions\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" pour rendre inter-compatibles les diff√©rents modules, mais cela reste une sorte de tambouille incompr√©hensible. D'ailleurs, je serais ravi d'avoir vos bonnes pratiques en la mati√®re.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Edit¬†: On me \"}],[\"$\",\"$L16\",null,{\"href\":\"https://twitter.com/%5FFlorian%5FR/status/236437043004207104\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir la conversation\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"souffle dans l'oreille\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" que \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"require.js\"}],[\"$\",\"span\",\"4\",{\"children\":\" est utilisable avec NodeJs, un petit lot de consolation donc ;).\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"ECMAScript 6¬†: La lumi√®re au bout du tunnel\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#ecmascript-6-la-lumiere-au-bout-du-tunnel\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"ecmascript-6-la-lumiere-au-bout-du-tunnel\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Gr√¢ce √† la derni√®re mouture d'ECMAScript (aussi appel√© ECMAScript.next) le standard qui sous tend Javascript, un gestionnaire natif de modules Javascript sera disponible. Malheureusement, on ne peut faire aucune pr√©vision en ce qui concerne le jour o√π il sera envisageable d'utiliser ce dernier √©tant donn√© qu'il faudra que tous les principaux navigateurs du march√© l'aient impl√©ment√©. En ce qui concerne NodeJs, √©tant donn√© qu'il est bas√© sur le moteur javascript V8 de Google Chrome, son impl√©mentation sera s√ªrement conditionn√©e √† celle de Google Chrome.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'approche de la nouvelle version de Javascript est simple, le mot cl√© export permet de d√©clarer une fonction comme devant √™tre export√©e ou d'√©num√©rer les variables devant √™tre export√©e.\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"var a=1, b=2, c=3;\\n export a, b, c;\\nexport function() {};\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Voil√†, vivement que nous puissions enfin utiliser cette version de Javascript et r√©soudre tous nos probl√®mes de compatibilit√© de modules. Vos pr√©cisions ou commentaires sont les bienvenus.\"}]]}]],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Published at\",\" \",\"vendredi 17 ao√ªt 2012 √† 13:34:48\",\".\"]}]]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"share_root__Qm_RR\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Commenter et partager\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L16\",null,{\"href\":\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fmodule_javascript\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Facebook\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_facebook__JKn8d\"}],\"Facebook\"]]}],\" - \",[\"$\",\"$L16\",null,{\"href\":\"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fmodule_javascript\u0026text=Les%20modules%20Javascript%C2%A0%3A%20Un%20joyeux%20B\u0026via=nfroidure\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Twitter\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 \"}],\"Twitter\"]]}],\" - \",[\"$\",\"$L16\",null,{\"href\":\"mailto:nicolas.froidure@gmail.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Me r√©pondre par mail\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_mail__yvBDK\"}],\"Courriel\"]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"page_linkedEntries__jiPuT\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Articles similaires\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Dans les cat√©gories\",\" \",\"JavaScript\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_entries__5hkLG\",\"children\":[[\"$\",\"div\",\"firefox_mobile_console\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//firefox_mobile_console\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Firefox Mobile Android¬†: Acc√©der aux consoles d'erreur Javascript / stderr\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Pour d√©velopper pour Firefox Mobile, mieux vaut avoir la console d'erreur √† port√©e de main. Voici la m√©thode.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//firefox_mobile_console\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"lundi 18 juin 2012 √† 09:49:47\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"markdown_ast_vers_react\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//markdown_ast_vers_react\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Rendre votre contenu Markdown avec React via l'AST\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"O√π comment ne plus jamais utiliser dangerouslySetInnerHTML.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//markdown_ast_vers_react\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"mercredi 1 d√©cembre 2021 √† 23:00:00\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"injection_de_dependance_nodejs\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//injection_de_dependance_nodejs\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Injection de d√©pendances avec NodeJS \"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Pr√©sentation donn√©e lors du ChtiJS 21 √† propos de l'injection de d√©pendances en JavaScript.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//injection_de_dependance_nodejs\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"samedi 2 f√©vrier 2019 √† 08:00:00\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}]]}]]}]}]]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"content\":\"#3e78b2\"}],[\"$\",\"meta\",\"2\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"3\",{\"children\":\"Les modules Javascript¬†: Un joyeux B - Nicolas Froidure\"}],[\"$\",\"meta\",\"4\",{\"name\":\"description\",\"content\":\"D√®s lors que l'on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript.\"}],[\"$\",\"link\",\"5\",{\"rel\":\"author\",\"href\":\"https://insertafter.com\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"link\",\"8\",{\"rel\":\"canonical\",\"href\":\"https://insertafter.com/fr/blog/module_javascript\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:title\",\"content\":\"Les modules Javascript¬†: Un joyeux B - Nicolas Froidure\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:description\",\"content\":\"D√®s lors que l'on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript.\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:url\",\"content\":\"https://insertafter.com/fr/blog/module_javascript\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:site_name\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:locale\",\"content\":\"fr_FR\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:site\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:creator\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:title\",\"content\":\"Les modules Javascript¬†: Un joyeux B - Nicolas Froidure\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:description\",\"content\":\"D√®s lors que l'on tente de cr√©er des applications complexes en Javascript, la segmentation du code en divers fichiers devient n√©cessaire. Cela g√©n√®re une nouvelle difficult√©, la modularisation du Javascript.\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"23\",{\"name\":\"twitter:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"icon\",\"href\":\"/images/favicon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"link\",\"25\",{\"rel\":\"icon\",\"href\":\"/images/favicon-16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"26\",{\"rel\":\"icon\",\"href\":\"/images/favicon-128.png\",\"type\":\"image/png\",\"sizes\":\"128x128\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>