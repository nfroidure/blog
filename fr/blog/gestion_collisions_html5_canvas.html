<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo.svg"/><link rel="preload" as="image" href="/illustrations/classesdiagram-breakit2.png"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/82572465af7cf95c.css" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/b92332a99cee7bfa.css" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/2b26a2222cb58ac3.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://insertafter.com/_next/static/chunks/webpack-0cf58a546aefb656.js"/><script src="https://insertafter.com/_next/static/chunks/4bd1b696-9839e50bf4426210.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/684-1da9a03c34d82cdf.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/main-app-da17a98a2bb76af6.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/874-f855e4232fadb1a1.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/layout-67411bf3cfc47b03.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/96-3883dbab65ddc99f.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-a26bd7e9ac7bd843.js" async=""></script><meta name="theme-color" content="#3e78b2"/><title>Gestion des collisions 2D dans un jeu HTML5 / Javascript - Nicolas Froidure</title><meta name="description" content="L&#x27;exp√©rience du d√©veloppement de Tank Arena m&#x27;am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5."/><link rel="author" href="https://insertafter.com"/><meta name="author" content="Nicolas Froidure"/><meta name="robots" content="index, follow"/><link rel="canonical" href="https://insertafter.com/fr/blog/gestion_collisions_html5_canvas"/><meta property="og:title" content="Gestion des collisions 2D dans un jeu HTML5 / Javascript - Nicolas Froidure"/><meta property="og:description" content="L&#x27;exp√©rience du d√©veloppement de Tank Arena m&#x27;am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5."/><meta property="og:url" content="https://insertafter.com/fr/blog/gestion_collisions_html5_canvas"/><meta property="og:site_name" content="Nicolas Froidure"/><meta property="og:locale" content="fr_FR"/><meta property="og:image:alt" content="Banni√®re du site"/><meta property="og:image" content="https://insertafter.com/images/banner.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Gestion des collisions 2D dans un jeu HTML5 / Javascript - Nicolas Froidure"/><meta name="twitter:description" content="L&#x27;exp√©rience du d√©veloppement de Tank Arena m&#x27;am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5."/><meta name="twitter:image:alt" content="Banni√®re du site"/><meta name="twitter:image" content="https://insertafter.com/images/banner.png"/><link rel="icon" href="/images/favicon.svg" type="image/svg+xml" sizes="any"/><link rel="icon" href="/images/favicon-16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/images/favicon-128.png" type="image/png" sizes="128x128"/><script src="https://insertafter.com/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="layout_body__jFZuu"><header class="header_iaHeader__4vCMA"><div><h1><a href="/fr" title="Retour √† l‚Äôaccueil" class="header_iaHeaderLogo__0uNr1"><img src="/images/logo.svg" alt="Logo d‚ÄôInsertAfter"/></a></h1></div></header><nav class="menu_iaMenu__B_rtj"><ul class="menu_iaMenuBody__0Zveq"><li class="menu_iaMenuItem__rOch4"><a href="/fr" title="Retour √† l‚Äôaccueil" class="">Accueil</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/blog" title="Retour √† l‚Äôindex du blog" class="">Blog</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/projets" title="D√©couvrir mes divers projets" class="">Projets</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/a_propos" title="En savoir plus √† mon sujet" class="">√Ä propos</a></li></ul></nav><nav class="languages_iaLanguages__K2J3W"><ul><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagEn__angfJ languages_selected__w1dKv"><a href="/en/blog"><span>en</span></a></li><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagFr__Us5Jb"><a href="/fr/blog"><span>fr</span></a></li></ul></nav><main class="layout_iaMain__6s2gl"><div><section class="contentBlock_root__802UK"><h1 class="h1_root__VPXQG"><span>Gestion des collisions 2D dans un jeu HTML5 / Javascript</span></h1><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><span>‚ö† Attention: Cet article est ancien et son contenu n&#x27;est plus d&#x27;actualit√©. Une approche orient√©e aspect serait pr√©f√©r√©e √† une approche objet de nos jours. Ce travail m&#x27;a permis d&#x27;affiner mes comp√©tences mais il ne peut servir de base pour impl√©menter un jeu, autant repartir de z√©ro.</span></p><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><span>L&#x27;exp√©rience du d√©veloppement de Tank Arena m&#x27;am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5.</span></p><p class="p_root__SHE_W"><span>Ce n&#x27;est pas un sujet trivial et les choix sont tr√®s larges. En effet, on peut s&#x27;appuyer sur un moteur physique 2D existant, plus complet mais plus lourd, ou g√©rer uniquement les collisions dont on a besoin. Pour ma part, j&#x27;ai d√©cid√© de m&#x27;appuyer sur les nombreuses ressources existantes √©crites en C pour impl√©menter ma propre gestion des collisions adapt√©e aux jeux HTML5 et dans le cas pr√©sent au jeu Tank Arena que je d√©veloppe durant mon temps libre et dont </span><a class="a_root__WEPS7" title="Voir l&#x27;article de pr√©sentation de Web Tank Arena" target="_self" href="./tank_arena_html5"><span>je vous ai d√©j√† parl√©</span></a><span>.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Diagramme des classes UML</span> <small><a class="anchored_icon__N5Sem" id="diagramme-des-classes-uml" title="Lien vers cette section" href="#diagramme-des-classes-uml"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Zoomer le diagramme" target="_blank" href="https://raw.githubusercontent.com/nfroidure/TankArena/master/uml/ClassesDiagram.png"><span> </span><span class="img_root__vTZoG img_landscape__qBqfT"><span class="img_picture__pfsl0"><img alt="Diagramme des classes UML" src="/illustrations/classesdiagram-breakit2.png"/></span></span><span> </span></a></p><p class="p_root__SHE_W"><span>Tous les fichiers Javascript impl√©mentant ce mod√®le se trouvent sur le </span><a class="a_root__WEPS7" title="Voir le code de Tank Arena" target="_blank" href="https://github.com/nfroidure/TankArena"><span>d√©p√¥t GitHub de Tank Arena</span></a><span> sous licence GNU/GPL donc n&#x27;h√©sitez pas √† ajouter votre touche et √† me proposer des commits¬†! J&#x27;ai mis la </span><a class="a_root__WEPS7" title="Voir la premi√®re version" target="_blank" href="http://tank.elitwork.com"><span>premi√®re version</span></a><span> en ligne pour √©clairer la suite de cette article.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Des sprites sur une carte</span> <small><a class="anchored_icon__N5Sem" id="des-sprites-sur-une-carte" title="Lien vers cette section" href="#des-sprites-sur-une-carte"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Comme vous pouvez le voir, l&#x27;id√©e est d&#x27;avoir un plan (classe </span><code class="code_root__5JLV_">Map</code><span>) dans lequel se trouvent des sprites (classe </span><code class="code_root__5JLV_">Sprite</code><span>). La classe </span><code class="code_root__5JLV_">Sprite</code><span> sert de base √† tous les types d&#x27;objets √©voluant sur la carte du jeu. La classe </span><code class="code_root__5JLV_">Movable</code><span> la surcharge pour ajouter les propri√©t√©s d&#x27;un objet se mouvant sur la carte et la classe </span><code class="code_root__5JLV_">Controlable</code><span> indique des objets qui peuvent √™tre contr√¥l√©s par un humain ou par l&#x27;ordinateur.</span></p><p class="p_root__SHE_W"><span>Par exemple, les b√¢timents (classe </span><code class="code_root__5JLV_">Building</code><span>), sont fixes et sont donc directement d√©riv√©s de la classe </span><code class="code_root__5JLV_">Sprite</code><span>. Au contraire, les tirs (classe </span><code class="code_root__5JLV_">Shot</code><span>) h√©ritent de la classe </span><code class="code_root__5JLV_">Movable</code><span> et les tanks de la classe </span><code class="code_root__5JLV_">Controlable</code><span>. Pour ajouter de nouveaux types d&#x27;objet, il suffit d&#x27;√©tendre une de ces trois classes abstraites et de surcharger les m√©thodes dont on veut corriger le comportement.</span></p><p class="p_root__SHE_W"><span>Enfin, la carte √©tant √† plusieurs niveaux (avion, h√©licopt√®re), chaque sprite √† une propri√©t√© </span><code class="code_root__5JLV_">z</code><span> indiquant √† quel niveau ce dernier se trouve.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Des sprites compos√©s de formes g√©om√©triques</span> <small><a class="anchored_icon__N5Sem" id="des-sprites-composes-de-formes-geometriques" title="Lien vers cette section" href="#des-sprites-composes-de-formes-geometriques"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Afin de pouvoir calculer les collisions entre chaque objet de la carte chaque sprite peut √™tre compos√© de formes indiquant ses parties solides (</span><code class="code_root__5JLV_">Shapes</code><span>). Pour l&#x27;instant, je n&#x27;ai impl√©ment√© que les formes de type cercle, rectangle (non orientable) et point. Cela est suffisant pour obtenir un r√©sultat satisfaisant. J&#x27;aurai cependant pu √©galement impl√©menter un rectangle orientable, et une droite, mais je les ai substitu√© respectivement par un cercle et par un rectangle d&#x27;un pixel de largeur.</span></p><p class="p_root__SHE_W"><span>L&#x27;avantage de pouvoir associer plusieurs formes positionnables √† un m√™me sprite est qu&#x27;il est possible de composer des formes plus complexes afin d&#x27;obtenir des collisions plus fid√®les √† la r√©alit√©.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Dessinons et animons nos sprites sur la carte</span> <small><a class="anchored_icon__N5Sem" id="dessinons-et-animons-nos-sprites-sur-la-carte" title="Lien vers cette section" href="#dessinons-et-animons-nos-sprites-sur-la-carte"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Chaque sprite poss√®de une m√©thode </span><code class="code_root__5JLV_">draw</code><span> permettant de dessiner ce dernier √† la position √† laquelle il se trouve sur l&#x27;√©l√©ment </span><code class="code_root__5JLV_">&lt;canvas&gt;</code><span> correspondant √† sa position </span><code class="code_root__5JLV_">z</code><span>. De m√™me, les sprites qui peuvent bouger poss√®dent une m√©thode </span><code class="code_root__5JLV_">move</code><span> qui leur permet de se d√©placer en fonction de leur vitesse, leur acc√©l√©ration etc... La boucle principale de jeu appelle successivement les m√©thodes </span><code class="code_root__5JLV_">move</code><span> et </span><code class="code_root__5JLV_">draw</code><span> de chaque objet de la sc√®ne et c&#x27;est ainsi que les sprites commencent √† s&#x27;animer.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Calcul des collisions</span> <small><a class="anchored_icon__N5Sem" id="calcul-des-collisions" title="Lien vers cette section" href="#calcul-des-collisions"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Nous y sommes, c&#x27;est le moment de calculer les collisions de chaque objet avec ceux qui l&#x27;entourent. Le principe du calcul des collisions est simple¬†: il s&#x27;agit d&#x27;enregistrer la position actuelle du sprite, de la faire bouger avec la fonction </span><code class="code_root__5JLV_">move</code><span>, puis de calculer si ce dernier entre en collision ou non dans la nouvelle position calcul√©e. Si non, on finalise le mouvement par le dessin du sprite, si oui, on replace l&#x27;objet entr√© en collision dans sa position ant√©rieure avant de le redessiner.</span></p><p class="p_root__SHE_W"><span>C&#x27;est gr√¢ce √† la m√©thode </span><code class="code_root__5JLV_">hits</code><span> de la classe </span><code class="code_root__5JLV_">Sprite</code><span> que nous y parvenons. Cette derni√®re r√©cup√®re les sprites proches de notre sprite (gr√¢ce √† un tableau mis √† jour √† chaque cycle du jeu avec la m√©thode </span><code class="code_root__5JLV_">declarePositions</code><span>), et confronte chaque forme dont ils sont compos√©s pour d√©duire s&#x27;il y a bien collision ou non.</span></p><p class="p_root__SHE_W"><span>Dans notre impl√©mentation, lorsque le tank entre en collision, on simule le recul de ce dernier en changeant sa direction et son acc√©l√©ration. Lorsqu&#x27;un tir atteint une cible, on inflige des d√©g√¢ts √† cette derni√®re en appelant la m√©thode </span><code class="code_root__5JLV_">damage</code><span>. Tous ces comportements sont impl√©ment√©s en surchargeant la m√©thode de calcul des collisions.</span></p><p class="p_root__SHE_W"><span>Vous pouvez voir tous les d√©tails du calcul des collisions entre chaque forme dans la classe </span><code class="code_root__5JLV_">Shape</code><span> et ses sous-classes qui d√©terminent quels types de formes sont compar√©es et d√©duisent ainsi quelle fonction utiliser pour calculer leur collision.</span></p><p class="p_root__SHE_W"><span>Le calcul des collisions est largement inspir√© de ces deux tutoriels¬†: Th√©orie des collisions (il a disparu avec le Site du Z√©ro) et </span><a class="a_root__WEPS7" title="Voir ce tutoriel" target="_blank" href="http://gregorycorgie.developpez.com/tutoriels/physic/"><span>Conception d&#x27;un moteur physique</span></a><span>.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Conclusion</span> <small><a class="anchored_icon__N5Sem" id="conclusion" title="Lien vers cette section" href="#conclusion"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>La gestion des collisions en Javascript est assez rapide, j&#x27;ai essay√© cet √©bauche de Tank Arena sur mobile et franchement, je ne constate pas de ralentissements. La prochaine √©tape sera certainement d&#x27;isoler le moteur physique du moteur de rendu graphique afin que l&#x27;on puisse calculer les mouvements physiques sur un serveur NodeJS et ainsi permettre un mode multijoueur qui sera bien plus fun que le mode contre l&#x27;ordinateur qui est un peu simple √† mon go√ªt.</span></p><p class="p_root__SHE_W"><span>Sinon, pour parler du projet Tank Arena en g√©n√©ral, il me reste √† trouver le meilleur moyen de tester la r√©ussite d&#x27;une mission et √† trouver un format le plus l√©ger possible pour la cr√©ation de cartes. J&#x27;ai cr√©√© un √©diteur de sprites, il me reste √† cr√©er un √©diteur pour associer les formes √† ces derniers puis un outil pour &quot;compiler&quot; les cartes.</span></p><p class="p_root__SHE_W"><span>Bref, de quoi s&#x27;amuser un peu en attendant le prochain article¬†!</span></p><p class="p_root__SHE_W">Published at<!-- --> <!-- -->dimanche 23 septembre 2012 √† 12:29:46<!-- -->.</p></section><section class="contentBlock_root__802UK"><aside class="share_root__Qm_RR"><h2 class="h2_root__Y02lX">Commenter et partager</h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Commenter sur Facebook" target="_blank" href="https://www.facebook.com/dialog/share?display=popup&amp;href=https%3A%2F%2Finsertafter.com%2Fblog%2Fgestion_collisions_html5_canvas&amp;redirect_uri=https%3A%2F%2Finsertafter.com"><span class="share_icon__bi4Q3 share_facebook__JKn8d"></span>Facebook</a> - <a class="a_root__WEPS7" title="Commenter sur Bluesky" target="_blank" href="https://bsky.app/intent/compose?text=https%3A%2F%2Finsertafter.com%2Fblog%2Fgestion_collisions_html5_canvas"><span class="share_icon__bi4Q3 share_bluesky__ahvrM"></span>Bluesky</a> - <a class="a_root__WEPS7" title="Me r√©pondre par mail" target="_self" href="mailto:nicolas.froidure@gmail.com?subject=Gestion%20des%20collisions%202D%20dans%20un%20jeu%20HTML5%20%2F%20Javascript"><span class="share_icon__bi4Q3 share_mail__yvBDK"></span>Courriel</a></p></aside></section><section class="contentBlock_root__802UK"><aside class="page_linkedEntries__jiPuT"><h2 class="h2_root__Y02lX">Articles similaires</h2><p class="p_root__SHE_W">Dans les cat√©gories<!-- --> <!-- -->Jeux HTML5<!-- -->.</p><div class="items_entries__5hkLG"><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//accelerometre_casse_briques">Utilisation de l&#x27;acc√©l√©rom√®tre dans le Casse Brique</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">HTML5 expose via l&#x27;API accelerometer des information sur l&#x27;inclinaison de l&#x27;appareil en fonction des trois axes de l&#x27;espace, utilisons les pour notre Casse brique.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//accelerometre_casse_briques">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->jeudi 9 ao√ªt 2012 √† 14:14:36<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//request_animation_frame">Utilisation de requestAnimationFrame pour les jeux HTML5</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Une nouvelle sp√©cification permet d&#x27;optimiser l&#x27;affichage des jeux HTML5 en synchronisant ces derniers avec le moteur graphique du navigateur. Petit exemple de mise en oeuvre avec notre casse brique.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//request_animation_frame">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->jeudi 26 juillet 2012 √† 10:13:35<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//tank_arena_html5">Jeux HTML5¬†: D√©fi Tank Arena</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Si vous avez d√©j√† jou√© √† Tank Arena, alors vous savez que c&#x27;est un excellent jeu. Malheureusement, il n&#x27;existe que pour Windows. Relevons le d√©fi d&#x27;en faire un jeu HTML5¬†!<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//tank_arena_html5">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->samedi 9 juin 2012 √† 16:20:22<!-- -->.</p><div class="items_clear__3fyGk"></div></div></div></aside></section></div></main><aside class="social_iaSocial__kdR1x"><nav><ul><li><a href="https://mastodon.social/@nfroidure" rel="me" title="Me suivre sur Mastodon" class="social_iaSocialMastodon__MTF6o"><span>Mastodon</span></a></li><li><a href="https://bsky.app/profile/nfroidure.bsky.social" rel="me" title="Me suivre sur Bluesky" class="social_iaSocialBluesky__fKW6M"><span>Bluesky</span></a></li><li><a href="https://github.com/nfroidure" title="Voir mes projets sur GitHub" class="social_iaSocialGithub__vcU5_"><span>GitHub</span></a></li><li><a href="https://www.npmjs.org/~nfroidure" title="Voir mon compte NPM" class="social_iaSocialNpm__6nku5"><span>NPM</span></a></li><li><a href="https://www.linkedin.com/in/nfroidure/" rel="me" title="Voir mon profil LinkedIn" class="social_iaSocialLinkedin__pWACO"><span>LinkedIn</span></a></li><li><a href="https://facebook.com/nicolas.froidure.douai" rel="me" title="Me suivre sur Facebook" class="social_iaSocialFacebook__w4wfH"><span>Facebook</span></a></li><li><a href="/fr/blog/index.atom" title="S‚Äôabonner au flux RSS" class="social_iaSocialFeed__gEQQ0"><span>Flux RSS</span></a></li></ul></nav></aside><footer class="footer_iaFooter__rhlnQ"><p class="footer_iaFooterContent__VZndF">¬© Nicolas Froidure 2012-<!-- -->2025</p></footer><script src="https://insertafter.com/_next/static/chunks/webpack-0cf58a546aefb656.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n6:I[9665,[],\"OutletBoundary\"]\n9:I[9665,[],\"ViewportBoundary\"]\nb:I[9665,[],\"MetadataBoundary\"]\nd:I[6614,[],\"\"]\n:HL[\"https://insertafter.com/_next/static/css/82572465af7cf95c.css\",\"style\"]\n:HL[\"https://insertafter.com/_next/static/css/b92332a99cee7bfa.css\",\"style\"]\n:HL[\"https://insertafter.com/_next/static/css/2b26a2222cb58ac3.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"dskjTI4D3R3slWPvLBhrU\",\"p\":\"https://insertafter.com\",\"c\":[\"\",\"fr\",\"blog\",\"gestion_collisions_html5_canvas\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[\"blog\",{\"children\":[[\"id\",\"gestion_collisions_html5_canvas\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true]}]}],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"(withLocale)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:style\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:children:props:children:1:props:style\",\"children\":404}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:children:props:children:2:props:style\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:children:props:children:2:props:children:props:style\",\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"locale\",\"fr\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/82572465af7cf95c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],\"$L4\"]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"gestion_collisions_html5_canvas\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",\"$undefined\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/b92332a99cee7bfa.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/2b26a2222cb58ac3.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"children\":[\"$L7\",\"$L8\",null]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"d-eGiVKY3BWtVDebwx71_\",{\"children\":[[\"$\",\"$L9\",null,{\"children\":\"$La\"}],null]}],[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:\"$Sreact.strict_mode\"\nf:I[8873,[\"874\",\"static/chunks/874-f855e4232fadb1a1.js\",\"322\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-67411bf3cfc47b03.js\"],\"default\"]\n10:I[2489,[\"874\",\"static/chunks/874-f855e4232fadb1a1.js\",\"322\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-67411bf3cfc47b03.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"$e\",null,{\"children\":[\"$\",\"html\",null,{\"lang\":\"fr\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_body__jFZuu\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"header_iaHeader__4vCMA\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr\",\"title\":\"Retour √† l‚Äôaccueil\",\"className\":\"header_iaHeaderLogo__0uNr1\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/logo.svg\",\"alt\":\"Logo d‚ÄôInsertAfter\"}]}]}]}]}],[\"$\",\"$Lf\",null,{\"locale\":\"fr\",\"dictionary\":{\"home\":{\"label\":\"Accueil\",\"title\":\"Retour √† l‚Äôaccueil\"},\"blog\":{\"label\":\"Blog\",\"title\":\"Retour √† l‚Äôindex du blog\"},\"projects\":{\"label\":\"Projets\",\"title\":\"D√©couvrir mes divers projets\"},\"about\":{\"label\":\"√Ä propos\",\"title\":\"En savoir plus √† mon sujet\"}}}],[\"$\",\"$L10\",null,{\"locale\":\"fr\"}],[\"$\",\"main\",null,{\"className\":\"layout_iaMain__6s2gl\",\"children\":[\"$\",\"div\",null,{\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$L11\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/b92332a99cee7bfa.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}],[\"$\",\"aside\",null,{\"className\":\"social_iaSocial__kdR1x\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@nfroidure\",\"rel\":\"me\",\"title\":\"Me suivre sur Mastodon\",\"className\":\"social_iaSocialMastodon__MTF6o\",\"children\":[\"$\",\"span\",null,{\"children\":\"Mastodon\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://bsky.app/profile/nfroidure.bsky.social\",\"rel\":\"me\",\"title\":\"Me suivre sur Bluesky\",\"className\":\"social_iaSocialBluesky__fKW6M\",\"children\":[\"$\",\"span\",null,{\"children\":\"Bluesky\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/nfroidure\",\"title\":\"Voir mes projets sur GitHub\",\"className\":\"social_iaSocialGithub__vcU5_\",\"children\":[\"$\",\"span\",null,{\"children\":\"GitHub\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.org/~nfroidure\",\"title\":\"Voir mon compte NPM\",\"className\":\"social_iaSocialNpm__6nku5\",\"children\":[\"$\",\"span\",null,{\"children\":\"NPM\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/nfroidure/\",\"rel\":\"me\",\"title\":\"Voir mon profil LinkedIn\",\"className\":\"social_iaSocialLinkedin__pWACO\",\"children\":[\"$\",\"span\",null,{\"children\":\"LinkedIn\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://facebook.com/nicolas.froidure.douai\",\"rel\":\"me\",\"title\":\"Me suivre sur Facebook\",\"className\":\"social_iaSocialFacebook__w4wfH\",\"children\":[\"$\",\"span\",null,{\"children\":\"Facebook\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr/blog/index.atom\",\"title\":\"S‚Äôabonner au flux RSS\",\"className\":\"social_iaSocialFeed__gEQQ0\",\"children\":[\"$\",\"span\",null,{\"children\":\"Flux RSS\"}]}]}]]}]}]}],[\"$\",\"footer\",null,{\"className\":\"footer_iaFooter__rhlnQ\",\"children\":[\"$\",\"p\",null,{\"className\":\"footer_iaFooterContent__VZndF\",\"children\":[\"¬© Nicolas Froidure 2012-\",2025]}]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"11:[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"not-found_p__fvcGn\",\"children\":[[\"$\",\"img\",null,{\"className\":\"not-found_img__IT2jY\",\"src\":\"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif\",\"alt\":\"404.png\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":\"It seems that the page you look for doesn't exist.\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"content\":\"#3e78b2\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"12:I[6874,[\"874\",\"static/chunks/874-f855e4232fadb1a1.js\",\"96\",\"static/chunks/96-3883dbab65ddc99f.js\",\"852\",\"static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-a26bd7e9ac7bd843.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[[\"$\",\"h1\",\"0\",{\"className\":\"h1_root__VPXQG\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Gestion des collisions 2D dans un jeu HTML5 / Javascript\"}]]}],[\"$\",\"hr\",\"1\",{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",\"2\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"‚ö† Attention: Cet article est ancien et son contenu n'est plus d'actualit√©. Une approche orient√©e aspect serait pr√©f√©r√©e √† une approche objet de nos jours. Ce travail m'a permis d'affiner mes comp√©tences mais il ne peut servir de base pour impl√©menter un jeu, autant repartir de z√©ro.\"}]]}],[\"$\",\"hr\",\"3\",{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",\"4\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'exp√©rience du d√©veloppement de Tank Arena m'am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5.\"}]]}],[\"$\",\"p\",\"5\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ce n'est pas un sujet trivial et les choix sont tr√®s larges. En effet, on peut s'appuyer sur un moteur physique 2D existant, plus complet mais plus lourd, ou g√©rer uniquement les collisions dont on a besoin. Pour ma part, j'ai d√©cid√© de m'appuyer sur les nombreuses ressources existantes √©crites en C pour impl√©menter ma propre gestion des collisions adapt√©e aux jeux HTML5 et dans le cas pr√©sent au jeu Tank Arena que je d√©veloppe durant mon temps libre et dont \"}],[\"$\",\"$L12\",\"1\",{\"href\":\"./tank_arena_html5\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir l'article de pr√©sentation de Web Tank Arena\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"je vous ai d√©j√† parl√©\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\".\"}]]}],[\"$\",\"h2\",\"6\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Diagramme des classes UML\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#diagramme-des-classes-uml\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"diagramme-des-classes-uml\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"7\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L12\",\"0\",{\"href\":\"https://raw.githubusercontent.com/nfroidure/TankArena/master/uml/ClassesDiagram.png\",\"className\":\"a_root__WEPS7\",\"title\":\"Zoomer le diagramme\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\" \"}],[\"$\",\"span\",\"1\",{\"className\":\"img_root__vTZoG img_landscape__qBqfT\",\"children\":[[\"$\",\"span\",null,{\"className\":\"img_picture__pfsl0\",\"children\":[\"$\",\"img\",null,{\"alt\":\"Diagramme des classes UML\",\"src\":\"/illustrations/classesdiagram-breakit2.png\"}]}],null]}],[\"$\",\"span\",\"2\",{\"children\":\" \"}]]]}]]}],[\"$\",\"p\",\"8\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Tous les fichiers Javascript impl√©mentant ce mod√®le se trouvent sur le \"}],[\"$\",\"$L12\",\"1\",{\"href\":\"https://github.com/nfroidure/TankArena\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le code de Tank Arena\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"d√©p√¥t GitHub de Tank Arena\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" sous licence GNU/GPL donc n'h√©sitez pas √† ajouter votre touche et √† me proposer des commits¬†! J'ai mis la \"}],[\"$\",\"$L12\",\"3\",{\"href\":\"http://tank.elitwork.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir la premi√®re version\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"premi√®re version\"}]]]}],[\"$\",\"span\",\"4\",{\"children\":\" en ligne pour √©clairer la suite de cette article.\"}]]}],[\"$\",\"h2\",\"9\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Des sprites sur une carte\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#des-sprites-sur-une-carte\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"des-sprites-sur-une-carte\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"10\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Comme vous pouvez le voir, l'id√©e est d'avoir un plan (classe \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"Map\"}],[\"$\",\"span\",\"2\",{\"children\":\") dans lequel se trouvent des sprites (classe \"}],[\"$\",\"code\",\"3\",{\"className\":\"code_root__5JLV_\",\"children\":\"Sprite\"}],[\"$\",\"span\",\"4\",{\"children\":\"). La classe \"}],[\"$\",\"code\",\"5\",{\"className\":\"code_root__5JLV_\",\"children\":\"Sprite\"}],[\"$\",\"span\",\"6\",{\"children\":\" sert de base √† tous les types d'objets √©voluant sur la carte du jeu. La classe \"}],[\"$\",\"code\",\"7\",{\"className\":\"code_root__5JLV_\",\"children\":\"Movable\"}],[\"$\",\"span\",\"8\",{\"children\":\" la surcharge pour ajouter les propri√©t√©s d'un objet se mouvant sur la carte et la classe \"}],[\"$\",\"code\",\"9\",{\"className\":\"code_root__5JLV_\",\"children\":\"Controlable\"}],[\"$\",\"span\",\"10\",{\"children\":\" indique des objets qui peuvent √™tre contr√¥l√©s par un humain ou par l'ordinateur.\"}]]}],[\"$\",\"p\",\"11\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Par exemple, les b√¢timents (classe \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"Building\"}],[\"$\",\"span\",\"2\",{\"children\":\"), sont fixes et sont donc directement d√©riv√©s de la classe \"}],[\"$\",\"code\",\"3\",{\"className\":\"code_root__5JLV_\",\"children\":\"Sprite\"}],[\"$\",\"span\",\"4\",{\"children\":\". Au contraire, les tirs (classe \"}],[\"$\",\"code\",\"5\",{\"className\":\"code_root__5JLV_\",\"children\":\"Shot\"}],[\"$\",\"span\",\"6\",{\"children\":\") h√©ritent de la classe \"}],[\"$\",\"code\",\"7\",{\"className\":\"code_root__5JLV_\",\"children\":\"Movable\"}],[\"$\",\"span\",\"8\",{\"children\":\" et les tanks de la classe \"}],[\"$\",\"code\",\"9\",{\"className\":\"code_root__5JLV_\",\"children\":\"Controlable\"}],[\"$\",\"span\",\"10\",{\"children\":\". Pour ajouter de nouveaux types d'objet, il suffit d'√©tendre une de ces trois classes abstraites et de surcharger les m√©thodes dont on veut corriger le comportement.\"}]]}],[\"$\",\"p\",\"12\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Enfin, la carte √©tant √† plusieurs niveaux (avion, h√©licopt√®re), chaque sprite √† une propri√©t√© \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"z\"}],[\"$\",\"span\",\"2\",{\"children\":\" indiquant √† quel niveau ce dernier se trouve.\"}]]}],[\"$\",\"h2\",\"13\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Des sprites compos√©s de formes g√©om√©triques\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#des-sprites-composes-de-formes-geometriques\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"des-sprites-composes-de-formes-geometriques\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"14\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Afin de pouvoir calculer les collisions entre chaque objet de la carte chaque sprite peut √™tre compos√© de formes indiquant ses parties solides (\"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"Shapes\"}],[\"$\",\"span\",\"2\",{\"children\":\"). Pour l'instant, je n'ai impl√©ment√© que les formes de type cercle, rectangle (non orientable) et point. Cela est suffisant pour obtenir un r√©sultat satisfaisant. J'aurai cependant pu √©galement impl√©menter un rectangle orientable, et une droite, mais je les ai substitu√© respectivement par un cercle et par un rectangle d'un pixel de largeur.\"}]]}],[\"$\",\"p\",\"15\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'avantage de pouvoir associer plusieurs formes positionnables √† un m√™me sprite est qu'il est possible de composer des formes plus complexes afin d'obtenir des collisions plus fid√®les √† la r√©alit√©.\"}]]}],[\"$\",\"h2\",\"16\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Dessinons et animons nos sprites sur la carte\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#dessinons-et-animons-nos-sprites-sur-la-carte\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"dessinons-et-animons-nos-sprites-sur-la-carte\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"17\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Chaque sprite poss√®de une m√©thode \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"draw\"}],[\"$\",\"span\",\"2\",{\"children\":\" permettant de dessiner ce dernier √† la position √† laquelle il se trouve sur l'√©l√©ment \"}],[\"$\",\"code\",\"3\",{\"className\":\"code_root__5JLV_\",\"children\":\"\u003ccanvas\u003e\"}],[\"$\",\"span\",\"4\",{\"children\":\" correspondant √† sa position \"}],[\"$\",\"code\",\"5\",{\"className\":\"code_root__5JLV_\",\"children\":\"z\"}],[\"$\",\"span\",\"6\",{\"children\":\". De m√™me, les sprites qui peuvent bouger poss√®dent une m√©thode \"}],[\"$\",\"code\",\"7\",{\"className\":\"code_root__5JLV_\",\"children\":\"move\"}],[\"$\",\"span\",\"8\",{\"children\":\" qui leur permet de se d√©placer en fonction de leur vitesse, leur acc√©l√©ration etc... La boucle principale de jeu appelle successivement les m√©thodes \"}],[\"$\",\"code\",\"9\",{\"className\":\"code_root__5JLV_\",\"children\":\"move\"}],[\"$\",\"span\",\"10\",{\"children\":\" et \"}],[\"$\",\"code\",\"11\",{\"className\":\"code_root__5JLV_\",\"children\":\"draw\"}],[\"$\",\"span\",\"12\",{\"children\":\" de chaque objet de la sc√®ne et c'est ainsi que les sprites commencent √† s'animer.\"}]]}],[\"$\",\"h2\",\"18\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Calcul des collisions\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#calcul-des-collisions\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"calcul-des-collisions\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"19\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Nous y sommes, c'est le moment de calculer les collisions de chaque objet avec ceux qui l'entourent. Le principe du calcul des collisions est simple¬†: il s'agit d'enregistrer la position actuelle du sprite, de la faire bouger avec la fonction \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"move\"}],[\"$\",\"span\",\"2\",{\"children\":\", puis de calculer si ce dernier entre en collision ou non dans la nouvelle position calcul√©e. Si non, on finalise le mouvement par le dessin du sprite, si oui, on replace l'objet entr√© en collision dans sa position ant√©rieure avant de le redessiner.\"}]]}],[\"$\",\"p\",\"20\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"C'est gr√¢ce √† la m√©thode \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"hits\"}],[\"$\",\"span\",\"2\",{\"children\":\" de la classe \"}],[\"$\",\"code\",\"3\",{\"className\":\"code_root__5JLV_\",\"children\":\"Sprite\"}],[\"$\",\"span\",\"4\",{\"children\":\" que nous y parvenons. Cette derni√®re r√©cup√®re les sprites proches de notre sprite (gr√¢ce √† un tableau mis √† jour √† chaque cycle du jeu avec la m√©thode \"}],[\"$\",\"code\",\"5\",{\"className\":\"code_root__5JLV_\",\"children\":\"declarePositions\"}],[\"$\",\"span\",\"6\",{\"children\":\"), et confronte chaque forme dont ils sont compos√©s pour d√©duire s'il y a bien collision ou non.\"}]]}],[\"$\",\"p\",\"21\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Dans notre impl√©mentation, lorsque le tank entre en collision, on simule le recul de ce dernier en changeant sa direction et son acc√©l√©ration. Lorsqu'un tir atteint une cible, on inflige des d√©g√¢ts √† cette derni√®re en appelant la m√©thode \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"damage\"}],[\"$\",\"span\",\"2\",{\"children\":\". Tous ces comportements sont impl√©ment√©s en surchargeant la m√©thode de calcul des collisions.\"}]]}],[\"$\",\"p\",\"22\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Vous pouvez voir tous les d√©tails du calcul des collisions entre chaque forme dans la classe \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"Shape\"}],[\"$\",\"span\",\"2\",{\"children\":\" et ses sous-classes qui d√©terminent quels types de formes sont compar√©es et d√©duisent ainsi quelle fonction utiliser pour calculer leur collision.\"}]]}],[\"$\",\"p\",\"23\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le calcul des collisions est largement inspir√© de ces deux tutoriels¬†: Th√©orie des collisions (il a disparu avec le Site du Z√©ro) et \"}],[\"$\",\"$L12\",\"1\",{\"href\":\"http://gregorycorgie.developpez.com/tutoriels/physic/\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir ce tutoriel\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Conception d'un moteur physique\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\".\"}]]}],[\"$\",\"h2\",\"24\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Conclusion\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#conclusion\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"conclusion\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"25\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"La gestion des collisions en Javascript est assez rapide, j'ai essay√© cet √©bauche de Tank Arena sur mobile et franchement, je ne constate pas de ralentissements. La prochaine √©tape sera certainement d'isoler le moteur physique du moteur de rendu graphique afin que l'on puisse calculer les mouvements physiques sur un serveur NodeJS et ainsi permettre un mode multijoueur qui sera bien plus fun que le mode contre l'ordinateur qui est un peu simple √† mon go√ªt.\"}]]}],[\"$\",\"p\",\"26\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Sinon, pour parler du projet Tank Arena en g√©n√©ral, il me reste √† trouver le meilleur moyen de tester la r√©ussite d'une mission et √† trouver un format le plus l√©ger possible pour la cr√©ation de cartes. J'ai cr√©√© un √©diteur de sprites, il me reste √† cr√©er un √©diteur pour associer les formes √† ces derniers puis un outil pour \\\"compiler\\\" les cartes.\"}]]}],[\"$\",\"p\",\"27\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Bref, de quoi s'amuser un peu en attendant le prochain article¬†!\"}]]}]],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Published at\",\" \",\"dimanche 23 septembre 2012 √† 12:29:46\",\".\"]}]]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"share_root__Qm_RR\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Commenter et partager\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"https://www.facebook.com/dialog/share?display=popup\u0026href=https%3A%2F%2Finsertafter.com%2Fblog%2Fgestion_collisions_html5_canvas\u0026redirect_uri=https%3A%2F%2Finsertafter.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Facebook\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_facebook__JKn8d\"}],\"Facebook\"]]}],\" - \",[\"$\",\"$L12\",null,{\"href\":\"https://bsky.app/intent/compose?text=https%3A%2F%2Finsertafter.com%2Fblog%2Fgestion_collisions_html5_canvas\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Bluesky\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_bluesky__ahvrM\"}],\"Bluesky\"]]}],\" - \",[\"$\",\"$L12\",null,{\"href\":\"mailto:nicolas.froidure@gmail.com?subject=Gestion%20des%20collisions%202D%20dans%20un%20jeu%20HTML5%20%2F%20Javascript\",\"className\":\"a_root__WEPS7\",\"title\":\"Me r√©pondre par mail\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_mail__yvBDK\"}],\"Courriel\"]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"page_linkedEntries__jiPuT\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Articles similaires\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Dans les cat√©gories\",\" \",\"Jeux HTML5\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_entries__5hkLG\",\"children\":[[\"$\",\"div\",\"accelerometre_casse_briques\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L12\",null,{\"href\":\".//accelerometre_casse_briques\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Utilisation de l'acc√©l√©rom√®tre dans le Casse Brique\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"HTML5 expose via l'API accelerometer des information sur l'inclinaison de l'appareil en fonction des trois axes de l'espace, utilisons les pour notre Casse brique.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L12\",null,{\"href\":\".//accelerometre_casse_briques\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"jeudi 9 ao√ªt 2012 √† 14:14:36\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"request_animation_frame\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L12\",null,{\"href\":\".//request_animation_frame\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Utilisation de requestAnimationFrame pour les jeux HTML5\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Une nouvelle sp√©cification permet d'optimiser l'affichage des jeux HTML5 en synchronisant ces derniers avec le moteur graphique du navigateur. Petit exemple de mise en oeuvre avec notre casse brique.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L12\",null,{\"href\":\".//request_animation_frame\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"jeudi 26 juillet 2012 √† 10:13:35\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"tank_arena_html5\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L12\",null,{\"href\":\".//tank_arena_html5\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Jeux HTML5¬†: D√©fi Tank Arena\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Si vous avez d√©j√† jou√© √† Tank Arena, alors vous savez que c'est un excellent jeu. Malheureusement, il n'existe que pour Windows. Relevons le d√©fi d'en faire un jeu HTML5¬†!\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L12\",null,{\"href\":\".//tank_arena_html5\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"samedi 9 juin 2012 √† 16:20:22\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}]]}]]}]}]]\n"])</script><script>self.__next_f.push([1,"8:null\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"title\",\"0\",{\"children\":\"Gestion des collisions 2D dans un jeu HTML5 / Javascript - Nicolas Froidure\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"L'exp√©rience du d√©veloppement de Tank Arena m'am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"author\",\"href\":\"https://insertafter.com\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"link\",\"5\",{\"rel\":\"canonical\",\"href\":\"https://insertafter.com/fr/blog/gestion_collisions_html5_canvas\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:title\",\"content\":\"Gestion des collisions 2D dans un jeu HTML5 / Javascript - Nicolas Froidure\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:description\",\"content\":\"L'exp√©rience du d√©veloppement de Tank Arena m'am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5.\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://insertafter.com/fr/blog/gestion_collisions_html5_canvas\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"fr_FR\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:title\",\"content\":\"Gestion des collisions 2D dans un jeu HTML5 / Javascript - Nicolas Froidure\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:description\",\"content\":\"L'exp√©rience du d√©veloppement de Tank Arena m'am√®ne √† faire un petit point sur la gestion des collisions dans un jeu 2D √©crit avec Javascript/HTML5.\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"link\",\"19\",{\"rel\":\"icon\",\"href\":\"/images/favicon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"link\",\"20\",{\"rel\":\"icon\",\"href\":\"/images/favicon-16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"21\",{\"rel\":\"icon\",\"href\":\"/images/favicon-128.png\",\"type\":\"image/png\",\"sizes\":\"128x128\"}]]\n"])</script></body></html>