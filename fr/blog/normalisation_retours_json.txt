3:I[5613,[],""]
6:I[1778,[],""]
4:["locale","fr","d"]
5:["id","normalisation_retours_json","d"]
8:{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"}
9:{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"}
a:{"display":"inline-block"}
b:{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0}
0:["TAeA64I6nSlHSqkZiZ8iQ",[[["",{"children":["(withLocale)",{"children":[["locale","fr","d"],{"children":["blog",{"children":[["id","normalisation_retours_json","d"],{"children":["__PAGE__?{\"locale\":\"fr\",\"id\":\"normalisation_retours_json\"}",{}]}]}]},"$undefined","$undefined",true]}]}],["",{"children":["(withLocale)",{"children":[["locale","fr","d"],{"children":["blog",{"children":[["id","normalisation_retours_json","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children","blog","children","$5","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/b3a30849af1e683f.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,"$L7",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/655a273f6fe37552.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$8","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$9","children":"404"}],["$","div",null,{"style":"$a","children":["$","h2",null,{"style":"$b","children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]],[null,"$Lc"]]]]
d:"$Sreact.strict_mode"
e:I[4630,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js"],""]
f:I[4341,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js"],""]
7:["$","$d",null,{"children":["$","html",null,{"lang":"fr","children":["$","body",null,{"className":"layout_body__jFZuu","children":[null,["$","header",null,{"className":"header_iaHeader__4vCMA","children":["$","div",null,{"className":"$undefined","children":["$","h1",null,{"children":["$","a",null,{"href":"/fr","title":"Retour à l’accueil","className":"header_iaHeaderLogo__0uNr1","children":["$","img",null,{"src":"/images/logo.svg","alt":"Logo d’InsertAfter"}]}]}]}]}],["$","$Le",null,{"locale":"fr","dictionary":{"home":{"label":"Accueil","title":"Retour à l’accueil"},"blog":{"label":"Blog","title":"Retour à l’index du blog"},"projects":{"label":"Projets","title":"Découvrir mes divers projets"},"about":{"label":"À propos","title":"En savoir plus à mon sujet"}}}],["$","$Lf",null,{"locale":"fr"}],["$","main",null,{"className":"layout_iaMain__6s2gl","children":["$","div",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$L10","notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/719d59f1b635ba1d.css","precedence":"next","crossOrigin":""}]],"styles":null}]}]}],["$","aside",null,{"className":"social_iaSocial__kdR1x","children":["$","nav",null,{"children":["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"href":"https://mastodon.social/@nfroidure","rel":"me","title":"Me suivre sur Mastodon","className":"social_iaSocialMastodon__MTF6o","children":["$","span",null,{"children":"Mastodon"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://bsky.app/profile/nfroidure.bsky.social","rel":"me","title":"Me suivre sur Bluesky","className":"social_iaSocialBluesky__fKW6M","children":["$","span",null,{"children":"Bluesky"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://twitter.com/nfroidure","title":"Me suivre sur Twitter","className":"social_iaSocialTwitter__9nU6R","children":["$","span",null,{"children":"Twitter"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://github.com/nfroidure","title":"Voir mes projets sur GitHub","className":"social_iaSocialGithub__vcU5_","children":["$","span",null,{"children":"GitHub"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.npmjs.org/~nfroidure","title":"Voir mon compte NPM","className":"social_iaSocialNpm__6nku5","children":["$","span",null,{"children":"NPM"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.linkedin.com/in/nfroidure/","rel":"me","title":"Voir mon profil LinkedIn","className":"social_iaSocialLinkedin__pWACO","children":["$","span",null,{"children":"LinkedIn"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://facebook.com/nicolas.froidure.douai","rel":"me","title":"Me suivre sur Facebook","className":"social_iaSocialFacebook__w4wfH","children":["$","span",null,{"children":"Facebook"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"/fr/blog/index.atom","title":"S’abonner au flux RSS","className":"social_iaSocialFeed__gEQQ0","children":["$","span",null,{"children":"Flux RSS"}]}]}]]}]}]}],["$","footer",null,{"className":"footer_iaFooter__rhlnQ","children":["$","p",null,{"className":"footer_iaFooterContent__VZndF","children":["© Nicolas Froidure 2012-",2024]}]}]]}]}]}]
10:["$","section",null,{"className":"contentBlock_root__802UK","children":[["$","h1",null,{"className":"h1_root__VPXQG","children":"Page not found"}],["$","p",null,{"className":"not-found_p__fvcGn","children":[["$","img",null,{"className":"not-found_img__IT2jY","src":"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif","alt":"404.png"}],["$","p",null,{"className":"p_root__SHE_W","children":"It seems that the page you look for doesn't exist."}]]}]]}]
11:I[5250,["176","static/chunks/176-0a03be62efe5672b.js","876","static/chunks/876-4c07c683293830f5.js","798","static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-8b95870d35c65aee.js"],""]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"name":"theme-color","content":"#3e78b2"}],["$","meta","2",{"charSet":"utf-8"}],["$","title","3",{"children":"Normalisation des retours JSON - Nicolas Froidure"}],["$","meta","4",{"name":"description","content":"Peu de gens pensent à normaliser les JSON en début de projet. C'est dommage car c'est le meilleur moment pour."}],["$","link","5",{"rel":"author","href":"https://insertafter.com"}],["$","meta","6",{"name":"author","content":"Nicolas Froidure"}],["$","meta","7",{"name":"robots","content":"index, follow"}],["$","link","8",{"rel":"canonical","href":"https://insertafter.com/fr/blog/normalisation_retours_json"}],["$","meta","9",{"property":"og:title","content":"Normalisation des retours JSON - Nicolas Froidure"}],["$","meta","10",{"property":"og:description","content":"Peu de gens pensent à normaliser les JSON en début de projet. C'est dommage car c'est le meilleur moment pour."}],["$","meta","11",{"property":"og:url","content":"https://insertafter.com/fr/blog/normalisation_retours_json"}],["$","meta","12",{"property":"og:site_name","content":"Nicolas Froidure"}],["$","meta","13",{"property":"og:locale","content":"fr_FR"}],["$","meta","14",{"property":"og:image:alt","content":"Bannière du site"}],["$","meta","15",{"property":"og:image","content":"https://insertafter.com/images/banner.png"}],["$","meta","16",{"property":"og:type","content":"article"}],["$","meta","17",{"name":"twitter:card","content":"summary"}],["$","meta","18",{"name":"twitter:site","content":"@nfroidure"}],["$","meta","19",{"name":"twitter:creator","content":"@nfroidure"}],["$","meta","20",{"name":"twitter:title","content":"Normalisation des retours JSON - Nicolas Froidure"}],["$","meta","21",{"name":"twitter:description","content":"Peu de gens pensent à normaliser les JSON en début de projet. C'est dommage car c'est le meilleur moment pour."}],["$","meta","22",{"name":"twitter:image:alt","content":"Bannière du site"}],["$","meta","23",{"name":"twitter:image","content":"https://insertafter.com/images/banner.png"}],["$","link","24",{"rel":"icon","href":"/images/favicon.svg","type":"image/svg+xml","sizes":"any"}],["$","link","25",{"rel":"icon","href":"/images/favicon-16.png","type":"image/png","sizes":"16x16"}],["$","link","26",{"rel":"icon","href":"/images/favicon-128.png","type":"image/png","sizes":"128x128"}]]
1:null
2:[["$","section",null,{"className":"contentBlock_root__802UK","children":[[["$","h1",null,{"className":"h1_root__VPXQG","children":[["$","span","0",{"children":"Normalisation des retours JSON"}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","strong",null,{"className":"strong_root__kOzFq","children":[["$","span","0",{"children":"TL; DR:"}]]}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"{\n  items: [1, 2, ...otherUsersIds],\n  users: {\n    '1' : {\n      content: {\n        id: 1,\n        name: 'Popol',\n        organization_id: 1\n      },\n      avatarURL: '//img.ur/trololol.png'\n    },\n    ...otherUsers\n  },\n  organisations: {\n    '1': {\n      content: {\n        id: 1,\n        name: 'Popol inc.',\n        owner_id: 1\n      }\n    }\n  }\n}"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Cela fait un moment que je souhaite écrire ce billet, notamment à l'usage de référence pour les personnes à qui je parle de ma façon de designer les retours de mes APIs."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Si vous n'avez pas ragequit ce blog à la suite de son TL;DR, laissez moi vous expliquer pourquoi j'ai fini par utiliser cette structure pour mes retours JSON."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Normalisation"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#normalisation","className":"anchored_icon__N5Sem","id":"normalisation","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"À ne pas confondre avec standardisation ou structuration. Ici, j'entends le terme normalisation comme on l'entendrait dans une base de donnée relationnelle mais pour un seul retour JSON."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Souvent, dans de nombreuses API, la décision est prise d'embarquer des ressources relatives à une ressource retournée par un point d'API. Par exemple, un "}],["$","code",null,{"className":"code_root__5JLV_","children":"GET /users/:userId"}],["$","span","2",{"children":" pourrait retourner aussi l'organisation ou les organisations de ce dernier."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Certains diront que c'est le moment où il faut envisager d'utiliser GraphQL. Je ne serais pas aussi catégorique. Je ne vois pas de souci majeur à ajuster légèrement un retour pour apporter des informations supplémentaires. Après tout les principes RESTful autorisent plusieurs représentations d'une même ressource donc pourquoi s'en priver ?"}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"En revanche, l'erreur à ne pas commettre est d'embarquer les ressources liées directement comme propriété de ce dernier. En effet, ceci a pour effet que si deux utilisateurs ont la même organisation, celle-ci se retrouve en double dans le retour JSON."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Vous comprenez donc certainement mieux le TL;DR de ce billet. La structure que j'utilise dans mes JSON permet d'éviter ce problème."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Vous remarquerez également que la liste des items d'une collection n'est pas directement dans la collection, mais seuls leurs identifiants apparaissent. La raison est que cela permet d'avoir des collections qui se répètent. Par exemple, un point d'API "}],["$","code",null,{"className":"code_root__5JLV_","children":"GET /usersQueue"}],["$","span","2",{"children":" pourrait lister plusieurs fois le même utilisateur car ce dernier aurait réservé plusieurs slots dans une file d'attente. Autre avantage, le user propriétaire de l'organisation de mon exemple peut être retrouvé facilement dans le JSON."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Vous pourriez me rétorquer “Et pourquoi pas JSON Reference ?”. Pour rappel, "}],["$","$L11",null,{"href":"https://tools.ietf.org/html/draft-pbryan-zyp-json-ref-03","className":"a_root__WEPS7","title":null,"target":"_blank","children":[null,[["$","span","0",{"children":"JSON reference"}]]]}],["$","span","2",{"children":" est une spécification qui vise à pouvoir utiliser des références à d'autres valeurs du JSON lui-même afin de pouvoir créer des références circulaires."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Trois raisons m'en empêchent :"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"la première est que je souhaite pouvoir désérialiser mes JSON avec le parseur natif sur tous les navigateurs. Cela, bien entendu, pour des raisons de performances. Un navigateur passe son temps à désérialiser du JSON, il est donc hors de question de faire cela en JS avec un polyfill de JSON reference;"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"la seconde est que je veux également pouvoir croiser mes objets de façon transversale. En maintenant des stores d'objets je peux dupliquer les références sur toute mon application et ainsi optimiser la consommation mémoire de l'application entière. Avec ce format, un simple "}],["$","code",null,{"className":"code_root__5JLV_","children":"Object.assign"}],["$","span","2",{"children":" dans mon "}],["$","$L11",null,{"href":"./generation%5Fapi%5Fcliente.html","className":"a_root__WEPS7","title":null,"target":"_self","children":[null,[["$","span","0",{"children":"wrapper d'API"}]]]}],["$","span","4",{"children":" suffit;"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"la dernière est que je ne veux pas polluer mes objets, ce qui me permet de transitionner en douceur sur le point suivant."}]]}]]}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Ségrégation"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#segregation","className":"anchored_icon__N5Sem","id":"segregation","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"En général, la représentation d'une ressource contient deux sortes d'informations. Les données normalisées (encore ;)) sont souvent stockées dans la base de données. Il s'agit de l'essence de la ressource. C'est souvent sur ces données que votre CRUD va agir dans une application. C'est également celle-là que vos appels PUT enverront."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"C'est pour cela que je les ségrègue dans une propriété "}],["$","code",null,{"className":"code_root__5JLV_","children":"content"}],["$","span","2",{"children":". La convention est que son contenu est ce qui peut-être modifié directement par les utilisateurs. Ainsi, pas de filtre à appliquer, dans le front pour extraire les données modifiables."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Le second type de données sont ce que j'appelle les données calculées. Ces dernières sont utiles uniquement pour l'affichage de la ressource et ne peuvent être modifiées directement. C'est le cas du lien d'avatar dans mon exemple, mais c'est aussi le cas des dates d'enregistrement dans les bases de données."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Composition des JSON Schemas"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#composition-des-json-schemas","className":"anchored_icon__N5Sem","id":"composition-des-json-schemas","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"J'aime beaucoup JSON Schema mais il faut bien l'avouer : rien n'est plus saoulant que de les définir. Cette façon de faire permet de réutiliser les définitions simplement afin de construire sa définition Swagger de façon la moins répétitive possible. Voici comment je définirai le JSON Schema de la représentation utilisée en fil rouge de ce billet :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"const userSchema = require(\"user\");\nconst organizationSchema = require(\"organization\");\nconst { idSchema, idPattern } = require(\"utils\");\n\nmodule.exports = {\n  title: \"Users collection\",\n  type: \"object\",\n  additionalProperties: false,\n  properties: {\n    items: {\n      title: \"User's identifiers for the queried collection.\",\n      type: \"array\",\n      items: idSchema,\n    },\n    users: {\n      title: \"Users hash\",\n      description: \"A hash containing users in the items collection.\",\n      type: \"object\",\n      patternProperties: {\n        idPattern: userSchema,\n      },\n    },\n    organizations: {\n      title: \"Organizations hash\",\n      description:\n        \"A hash containing organizations linked to users in the collection.\",\n      type: \"object\",\n      patternProperties: {\n        idPattern: organizationSchema,\n      },\n    },\n  },\n};"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Et voilà ;). Vous savez tout ! N'hésitez pas à me fournir vos astuces personnelles pour structurer et normaliser vos retours JSON !"}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","strong",null,{"className":"strong_root__kOzFq","children":[["$","span","0",{"children":"Ajout de dernière minute :"}]]}],["$","br","1",{}],["$","span","2",{"children":"Kévin Dunglas, un nordiste très actif dans les communautés PHP/REST a cité sur Twitter les standards suivants comme substitutifs à la structure présentée dans cet article :"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","$L11",null,{"href":"http://json-ld.org/","className":"a_root__WEPS7","title":null,"target":"_blank","children":[null,[["$","span","0",{"children":"JSON-LD :"}]]]}],["$","span","1",{"children":" une alternative à l'utilisation de JSON Reference cité ci-dessus. Je n'ai pas choisi ce format car pour moi il mélange définition des données avec les données elle-mêmes. Au delà de l'overhead en taille causé par l'utilisation des URIs en lieu et place des identifiants ainsi que celui causé par l'ajout d'informations de typage, je le trouve moins lisible. De plus, il rend moins efficace la désérialisation du JSON car on compare des chaînes de caractères bien plus longues et l'on doit constituer les hashs après la désérialisation."}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","$L11",null,{"href":"http://www.hydra-cg.com/spec/latest/core/","className":"a_root__WEPS7","title":null,"target":"_blank","children":[null,[["$","span","0",{"children":"Hydra :"}]]]}],["$","span","1",{"children":" permet d'ajouter plus d'informations de \"type\" par dessus JSON-LD comme les opérations que l'on peut réaliser sur la ressource. Le fait d'étendre JSON-LD l'écarte de fait dans mon cas, il va plus loin, mais dans la mauvaise direction selon moi."}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","$L11",null,{"href":"http://stateless.co/hal%5Fspecification.html","className":"a_root__WEPS7","title":null,"target":"_blank","children":[null,[["$","span","0",{"children":"HAL :"}]]]}],["$","span","1",{"children":" je ne connaissais pas. Allez sur le site scrollez sur le premier JSON et voyez si vous avez envie de lire ce dernier. Je ne crée pas les APIs pour les robots, mais pour les humains. Pour les robots, une fois encore, il y a le fichier Swagger."}]]}]]}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Je n'ai pas parlé de l'hypermédia, mais cela va de soi. Les JSON doivent être hypermédia et la concision les a exclu de cet article. Cependant, aujourd'hui, n'importe quel explorateur de JSON sait afficher les URL où qu'elles se trouvent et le fichier Swagger saura spécifier aux robots les URLs qu'ils peuvent explorer."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Swagger/OpenAPI sont des standards ouverts et permettent un grand nombre de choses : génération de l'API cliente pour tout un tas de cibles, tooling et génération de documentation. C'est le standard ouvert que j'ai décidé d'utiliser car il apporte une bonne séparation entre définition et données tout en laissant toute latitude au développeurs pour apporter leur propre valeur ajoutée."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"J'ai beaucoup de respect pour ceux qui créent les standards et je pense que tous les standards valent la peine d'être considérés. Je me réserve en revanche le choix des armes. N'oublions pas qu'XML est un standard, tout comme "}],["$","$L11",null,{"href":"https://www.ibm.com/support/knowledgecenter/SS9H2Y%5F7.1.0/com.ibm.dp.doc/json%5Fjsonx.html","className":"a_root__WEPS7","title":null,"target":"_blank","children":[null,[["$","span","0",{"children":"JSONX"}]]]}],["$","span","2",{"children":" ;). Il ne faut pas suivre bêtement un standard, mais choisir celui qui nous convient, celui qui nous permet d'être productif. Swagger est clairement mon choix de prédilection. Il est à l'image de JavaScript. Il va droit au but et reste suffisamment simple à l'usage. D'ailleurs, je suis réservé sur les évolutions apportées par OpenAPI, j'ai peur que cela ne soit plus le cas. Mais bon, d'ici là, peut-être qu'un nouveau standard pointera le bout de son nez ;)."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span",null,{"className":"img_root__vTZoG img_landscape__qBqfT","children":[["$","span",null,{"className":"img_picture__pfsl0","children":["$","img",null,{"alt":"Dessin hunoristique XKCD sur les compétition entre standards","src":"https://imgs.xkcd.com/comics/standards.png"}]}],null]}],["$","br","1",{}],["$","$L11",null,{"href":"https://xkcd.com/927/","className":"a_root__WEPS7","title":null,"target":"_blank","children":[null,[["$","span","0",{"children":"Source: XKCD"}]]]}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Enfin, utiliser un standard n'est même pas une obligation. Innover c'est souvent tout l'inverse. Les exemples ne manquent pas, mais voici le dernier en date qui m'a complètement scié et m'a pousser une fois encore à remettre en question mes idées reçues :"}]]}]],["$","p",null,{"className":"p_root__SHE_W","children":["Published at"," ","vendredi 3 mars 2017 à 11:07:32","."]}]]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"share_root__Qm_RR","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Commenter et partager"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","$L11",null,{"href":"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fnormalisation_retours_json","className":"a_root__WEPS7","title":"Commenter sur Facebook","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_facebook__JKn8d"}],"Facebook"]]}]," - ",["$","$L11",null,{"href":"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fnormalisation_retours_json&text=Normalisation%20des%20retours%20JSON&via=nfroidure","className":"a_root__WEPS7","title":"Commenter sur Twitter","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 "}],"Twitter"]]}]," - ",["$","$L11",null,{"href":"mailto:nicolas.froidure@gmail.com","className":"a_root__WEPS7","title":"Me répondre par mail","target":"_self","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_mail__yvBDK"}],"Courriel"]]}]]}]]}]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"page_linkedEntries__jiPuT","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Articles similaires"}],["$","p",null,{"className":"p_root__SHE_W","children":["Dans les catégories"," ","Applications Web","."]}],["$","div",null,{"className":"items_entries__5hkLG","children":[["$","div","presentation_nodejs_rest_microservices",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//presentation_nodejs_rest_microservices","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Micro-services first avec NodeJS"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Retour rapide sur ma présentation au ChtiJS 15 sur les microservices et le design d'APIs avec NodeJS."," ",["$","br",null,{}],["$","$L11",null,{"href":".//presentation_nodejs_rest_microservices","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","dimanche 28 février 2016 à 21:32:43","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","applications_vehicules",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//applications_vehicules","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Et si HTML5 accédait à mon véhicule ?"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Citroën vient de lancer un petit concours tout simple auquel je vais proposer une idée. Découvrez là, mais aussi, comment elle pourrait être mise en oeuvre."," ",["$","br",null,{}],["$","$L11",null,{"href":".//applications_vehicules","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","mercredi 9 janvier 2013 à 09:54:05","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","applications_html5",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//applications_html5","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Un futur radieux pour les applications HTML5"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["L'importance des applications HTML5 va croissante, les acteurs qui parient sur ces dernières aussi. L'avenir des applications HTML5 s'annonce épique."," ",["$","br",null,{}],["$","$L11",null,{"href":".//applications_html5","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","samedi 5 janvier 2013 à 16:06:11","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}]]}]]}]}]]
