3:I[5613,[],""]
6:I[1778,[],""]
4:["locale","fr","d"]
5:["id","retour_experience_gulp","d"]
8:{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"}
9:{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"}
a:{"display":"inline-block"}
b:{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0}
0:["KvaQf7Occ1_mTQr28YDxi",[[["",{"children":["(withLocale)",{"children":[["locale","fr","d"],{"children":["blog",{"children":[["id","retour_experience_gulp","d"],{"children":["__PAGE__?{\"locale\":\"fr\",\"id\":\"retour_experience_gulp\"}",{}]}]}]},"$undefined","$undefined",true]}]}],["",{"children":["(withLocale)",{"children":[["locale","fr","d"],{"children":["blog",{"children":[["id","retour_experience_gulp","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children","blog","children","$5","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/b3a30849af1e683f.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,"$L7",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/655a273f6fe37552.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$8","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$9","children":"404"}],["$","div",null,{"style":"$a","children":["$","h2",null,{"style":"$b","children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]],[null,"$Lc"]]]]
d:"$Sreact.strict_mode"
e:I[4630,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js"],""]
f:I[4341,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js"],""]
7:["$","$d",null,{"children":["$","html",null,{"lang":"fr","children":["$","body",null,{"className":"layout_body__jFZuu","children":[null,["$","header",null,{"className":"header_iaHeader__4vCMA","children":["$","div",null,{"className":"$undefined","children":["$","h1",null,{"children":["$","a",null,{"href":"/fr","title":"Retour à l’accueil","className":"header_iaHeaderLogo__0uNr1","children":["$","img",null,{"src":"/images/logo.svg","alt":"Logo d’InsertAfter"}]}]}]}]}],["$","$Le",null,{"locale":"fr","dictionary":{"home":{"label":"Accueil","title":"Retour à l’accueil"},"blog":{"label":"Blog","title":"Retour à l’index du blog"},"projects":{"label":"Projets","title":"Découvrir mes divers projets"},"about":{"label":"À propos","title":"En savoir plus à mon sujet"}}}],["$","$Lf",null,{"locale":"fr"}],["$","main",null,{"className":"layout_iaMain__6s2gl","children":["$","div",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$L10","notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/09b5c201fbf055fc.css","precedence":"next","crossOrigin":""}]],"styles":null}]}]}],["$","aside",null,{"className":"social_iaSocial__kdR1x","children":["$","nav",null,{"children":["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"href":"https://mastodon.social/@nfroidure","rel":"me","title":"Me suivre sur Mastodon","className":"social_iaSocialMastodon__MTF6o","children":["$","span",null,{"children":"Mastodon"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://bsky.app/profile/nfroidure.bsky.social","rel":"me","title":"Me suivre sur Bluesky","className":"social_iaSocialBluesky__fKW6M","children":["$","span",null,{"children":"Bluesky"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://twitter.com/nfroidure","title":"Me suivre sur Twitter","className":"social_iaSocialTwitter__9nU6R","children":["$","span",null,{"children":"Twitter"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://github.com/nfroidure","title":"Voir mes projets sur GitHub","className":"social_iaSocialGithub__vcU5_","children":["$","span",null,{"children":"GitHub"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.npmjs.org/~nfroidure","title":"Voir mon compte NPM","className":"social_iaSocialNpm__6nku5","children":["$","span",null,{"children":"NPM"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.linkedin.com/in/nfroidure/","rel":"me","title":"Voir mon profil LinkedIn","className":"social_iaSocialLinkedin__pWACO","children":["$","span",null,{"children":"LinkedIn"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://facebook.com/nicolas.froidure.douai","rel":"me","title":"Me suivre sur Facebook","className":"social_iaSocialFacebook__w4wfH","children":["$","span",null,{"children":"Facebook"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"/fr/blog/index.atom","title":"S’abonner au flux RSS","className":"social_iaSocialFeed__gEQQ0","children":["$","span",null,{"children":"Flux RSS"}]}]}]]}]}]}],["$","footer",null,{"className":"footer_iaFooter__rhlnQ","children":["$","p",null,{"className":"footer_iaFooterContent__VZndF","children":["© Nicolas Froidure 2012-",2024]}]}]]}]}]}]
10:["$","section",null,{"className":"contentBlock_root__802UK","children":[["$","h1",null,{"className":"h1_root__VPXQG","children":"Page not found"}],["$","p",null,{"className":"not-found_p__fvcGn","children":[["$","img",null,{"className":"not-found_img__IT2jY","src":"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif","alt":"404.png"}],["$","p",null,{"className":"p_root__SHE_W","children":"It seems that the page you look for doesn't exist."}]]}]]}]
11:I[5250,["176","static/chunks/176-0a03be62efe5672b.js","790","static/chunks/790-a194f74901d33197.js","798","static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-8524fb70a93a8de3.js"],""]
2:[["$","section",null,{"className":"contentBlock_root__802UK","children":[[["$","h1",null,{"className":"h1_root__VPXQG","children":[["$","span","0",{"children":"Gulp : Retour d'expérience"}]]}],["$","hr",null,{"className":"hr_root__iMEe9"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"⚠ Attention: Cet article est ancien et n'est conservé que pour des raisons historiques. Gulp n'est plus très utilisé de nos jours et je ne conseillerai pas de démarrer un projet avec maintenant."}]]}],["$","hr",null,{"className":"hr_root__iMEe9"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Comme promis, Gulp revient à l'ordre du jour de ce Blog avec un retour d'expérience sur l'utilisation de Gulp et le développement de plugins."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Suite à la "}],["$","$L11",null,{"href":"gulp%5Fvs%5Fgrunt.html","className":"a_root__WEPS7","title":"Voir le billet de blog sur les différences entre GulpJS et GruntJS","target":"_self","children":[null,[["$","span","0",{"children":"comparaison entre Gulp et Grunt"}]]]}],["$","span","2",{"children":", vous avez peut-être envie d'aller plus loin dans l'utilisation de Gulp. Dans ce billet, je reviendrais sur les fondamentaux de Gulp, les bonnes pratiques et aussi la création de plugins."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Installation"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#installation","className":"anchored_icon__N5Sem","id":"installation","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Pour commencer à utiliser Gulp, deux petites actions doivent être réalisées. Premièrement, l'installation de Gulp de manière globale :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"npm install -g gulp"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Ceci nous permettra de démarrer Gulp, quelque soit le dossier dans lequel on se trouve. Ensuite, nous devons installer Gulp localement à chaque projet pour lequel on souhaite l'utiliser."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"cd monprojet && npm install gulp --save-dev"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Nous sommes prêts à commencer à créer nos tâches Gulp dans le fichier gulpfile.js qui est par convention, le fichier qui doit les contenir :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"touch gulpfile.js && vim gulpfile.js"}]}]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Principe de Gulp"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#principe-de-gulp","className":"anchored_icon__N5Sem","id":"principe-de-gulp","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Les tâches"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#les-taches","className":"anchored_icon__N5Sem","id":"les-taches","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Le principe de Gulp est très simple. Le fichier gulpfile.js contient la déclaration de tâches. Ces dernières sont déclarées de la manière suivante :"}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Cette tâche est nommée "}],["$","code",null,{"className":"code_root__5JLV_","children":"clean"}],["$","span","2",{"children":" et équivaut à une commande "}],["$","code",null,{"className":"code_root__5JLV_","children":"rm -rf"}],["$","span","4",{"children":" (d'où le nom du module). Une fois déclarée, notre tâche pourra être appelée à tout moment depuis la console grâce à la commande suivante :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"gulp clean"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Il est aussi possible de l'appeler directement dans une autre tâche avec la méthode "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.run"}],["$","span","2",{"children":" :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"gulp.run('clean', function() { console.log('Terminé') };"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Cependant, je ne vous conseille pas l'utilisation de cette méthode car elle est encore un peu boguée et "}],["$","$L11",null,{"href":"https://github.com/robrich/orchestrator/issues/15","className":"a_root__WEPS7","title":"Voir l'issue concernant ce souci","target":"_blank","children":[null,[["$","span","0",{"children":"ne fonctionne pas comme on pourrait s'y attendre"}]]]}],["$","span","2",{"children":"."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"En réalité, il est préférable d'utiliser les dépendances qui peuvent être déclarées au niveau de la déclaration d'une tâche comme "}],["$","$L11",null,{"href":"https://github.com/ChtiJS/chtijs.francejs.org/blob/baf3a4d690fa99a5b2e2be7143864f38adda9cef/gulpfile.js#L160","className":"a_root__WEPS7","title":"Voir le gulpfile de ChtiJS","target":"_blank","children":[null,[["$","span","0",{"children":"ici pour le gulpfile de ChtiJS"}]]]}],["$","span","2",{"children":"."}]]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Les streams"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#les-streams","className":"anchored_icon__N5Sem","id":"les-streams","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Passons maintenant à la véritable particularité de Gulp. La plupart des tâches dont on a besoin pour un projet sont en réalité des tâches qui sont appliquées sur un ensemble de fichiers contenus dans une répertoire donné."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"L'idée de Gulp est de créer un stream d'objets représentant chacun de ces fichiers (avec "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.src"}],["$","span","2",{"children":") que l'on pourra modifier au travers de divers plugins. Ces plugins sont en fait des streams d'objets de type "}],["$","code",null,{"className":"code_root__5JLV_","children":"Stream.Transform"}],["$","span","4",{"children":"."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Les plugins opèrent des modifications sur le contenu des fichiers et/ou sur leur propriétés (chemin, nom de fichier et/ou extension)."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"À l'autre bout de la chaîne, on peut utiliser "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.dest"}],["$","span","2",{"children":" pour sauvegarder les modifications effectuées. Un \"pipeline\" typique avec Gulp donne ceci :"}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Il est possible de subordonner un plugin à une condition particulière avec "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.env"}],["$","span","2",{"children":" et "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp-if"}],["$","span","4",{"children":". Ici, selon la valeur de "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.env.prod"}],["$","span","6",{"children":", on minifie ou non les CSS et on utilise Livereload ou non."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Via la ligne de commande, il nous suffira d'ajouter le paramètre suivant pour que "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.env.prod"}],["$","span","2",{"children":" soit vrai :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"gulp css --prod"}]}]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Contenu : Buffer ou streams ?"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#contenu-buffer-ou-streams","className":"anchored_icon__N5Sem","id":"contenu-buffer-ou-streams","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Il existe deux modes différents pour le contenu des fichiers. Le mode buffer comme son nom l'indique traite le contenu du fichier comme un unique buffer (c'est à dire, une zone contigüe de la mémoire virtuelle, ou encore, un objet contenu dans la zone Heap du processus)."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"En mode buffer, la plupart des transformations sur le contenu des fichiers sont réalisées de manière synchrone et on ne peut pas traiter des fichiers trop volumineux sans une dégradation très importante des performances."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Je ne suis personnellement pas fan du mode buffer, bien qu'il soit activé par défaut. À vrai dire, pour ma part, j'aurais préféré que les objets passés aux plugins soient en réalité directement des streams qui, par convention, auraient une propriété réservée aux méta-données (chemin, nom de fichier, répertoire courant etc.)."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Ce qui nous amène au mode stream, celui que j'affectionne le plus. Le contenu des fichiers y est traité cette fois de manière plus fluide, par morceaux. L'avantage de ce mode est qu'il est entièrement asynchrone. Les données sont traitées au fur et à mesure des retours des appels système de lecture et d'écriture sur le disque."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Grâce à la nouvelle API des streams de Node (parfois appelée Streams2, dont je parlerais en détail dans un futur billet), les traitements sont ordonnancés selon la disponibilité des ressources (concept de backpressure). Ainsi, théoriquement, il n'y a aucune limite dans la taille des fichiers traités ou dans leur nombre."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Malheureusement, il y a une certaine incompréhension/difficulté avec l'utilisation des streams. Ainsi, peu de développeurs de plugins implémentent le support de ces derniers. De plus, l'utilisation de "}],["$","code",null,{"className":"code_root__5JLV_","children":"event-stream"}],["$","span","2",{"children":" est conseillée malgré l'utilisation de l'évènement "}],["$","code",null,{"className":"code_root__5JLV_","children":"data"}],["$","span","4",{"children":" qui dans la nouvelle version de Node n'est pas conseillée."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Le choix du mode buffer ou stream se fait au niveau de "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.src"}],["$","span","2",{"children":" ou tout autre plugin devant générer de nouveaux fichiers sans qu'il soit possible de détecter le mode courant. Pour utiliser les streams avec "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp.src"}],["$","span","4",{"children":", il suffit de passer en deuxième paramètre un objet d'options contenant une propriété "}],["$","code",null,{"className":"code_root__5JLV_","children":"buffer"}],["$","span","6",{"children":" valant "}],["$","code",null,{"className":"code_root__5JLV_","children":"false"}],["$","span","8",{"children":"."}]]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Quelques plugins utiles"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#quelques-plugins-utiles","className":"anchored_icon__N5Sem","id":"quelques-plugins-utiles","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Voici une petite liste de plugins qui vous seront bien utile :"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","code",null,{"className":"code_root__5JLV_","children":"gulp-if"}],["$","span","1",{"children":" : conditionner l'utilisation d'un plugin"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","code",null,{"className":"code_root__5JLV_","children":"gulp-rename"}],["$","span","1",{"children":" : Permet de renommer les fichier en tout point d'un pipeline de fichier"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","code",null,{"className":"code_root__5JLV_","children":"gulp-stream"}],["$","span","1",{"children":" : Permet de transformer en stream le contenu des fichiers en entrée. Pratique quand un plugin accepte les streams en entrée, mais retourne un buffer (ce qui est le cas de gulp-browserify, j'ai une "}],["$","$L11",null,{"href":"https://github.com/deepak1556/gulp-browserify/pull/10","className":"a_root__WEPS7","title":"Voir la PR","target":"_blank","children":[null,[["$","span","0",{"children":"PR en attente"}]]]}],["$","span","3",{"children":" à ce sujet)."}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","code",null,{"className":"code_root__5JLV_","children":"gulp-streamify"}],["$","span","1",{"children":" : Un plugin que j'ai créé pour wrapper un plugin qui ne supporte pas les streams afin qu'il ne casse pas le pipeline et que le mode stream soit donc quand même utilisable."}]]}]]}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Créer un plug-in Gulp"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#creer-un-plug-in-gulp","className":"anchored_icon__N5Sem","id":"creer-un-plug-in-gulp","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Étant donné le faible nombre de plugins Gulp, il est fort probable que vous souhaitiez en créer un. Voici donc quelques conseils que je vais illustrer avec le code de "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp-cat"}],["$","span","2",{"children":" et "}],["$","code",null,{"className":"code_root__5JLV_","children":"gulp-svg2ttf"}],["$","span","4",{"children":"."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Tout d'abord, un plugin est un "}],["$","$L11",null,{"href":"https://github.com/ben-eb/gulp-cat/blob/6479a502f42f76e8378ce3bd5c2b2165990f2b8b/index.js#L7","className":"a_root__WEPS7","title":"Voir la ligne concernée","target":"_blank","children":[null,[["$","span","0",{"children":"module NPM qui exporte une fonction"}]]]}],["$","span","2",{"children":" qui "}],["$","$L11",null,{"href":"https://github.com/ben-eb/gulp-cat/blob/6479a502f42f76e8378ce3bd5c2b2165990f2b8b/index.js#L27","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"retourne"}]]]}],["$","span","4",{"children":" un "}],["$","$L11",null,{"href":"https://github.com/ben-eb/gulp-cat/blob/6479a502f42f76e8378ce3bd5c2b2165990f2b8b/index.js#L8","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"stream d'objets"}]]]}],["$","span","6",{"children":". Idéalement, cette fonction "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L32","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"doit être nommée"}]]]}],["$","span","8",{"children":" pour faciliter le débogage."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Selon moi, il très important d'hériter des interface "}],["$","code",null,{"className":"code_root__5JLV_","children":"Stream.*"}],["$","span","2",{"children":" de NodeJS plutôt que d'utiliser des modules comme "}],["$","code",null,{"className":"code_root__5JLV_","children":"event-stream"}],["$","span","4",{"children":" ou "}],["$","code",null,{"className":"code_root__5JLV_","children":"event-map"}],["$","span","6",{"children":". C'est certes, un peu plus verbeux, mais ces interfaces ont été pensées pour conserver les bénéfices de l'usage des streams. La plupart du temps, vous utiliserez une instance de l'interface "}],["$","code",null,{"className":"code_root__5JLV_","children":"Stream.Transform"}],["$","span","8",{"children":" qui doit être augmentée d'une "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L40","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"méthode _transform"}]]]}],["$","span","10",{"children":" qui comme son nom l'indique gère la transformation du contenu du stream (ici, les fichiers) et d'une méthode "}],["$","code",null,{"className":"code_root__5JLV_","children":"_flush"}],["$","span","12",{"children":", optionnelle, dans le cas où vous souhaiteriez faire une action particulière à la fin du flux d'objets."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Au sein de la méthode de transformation des fichiers, dans la plupart des cas, les fichier dont le contenu est nul "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L42","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"seront ignorés"}]]]}],["$","span","2",{"children":". Puis, selon que le contenu du fichier est "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L60","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"un buffer"}]]]}],["$","span","4",{"children":" ou "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L68","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"un stream"}]]]}],["$","span","6",{"children":", on "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L62","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"modifiera le buffer"}]]]}],["$","span","8",{"children":" ou, on "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L70","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"pipera le stream dans un nouveau stream de transformation"}]]]}],["$","span","10",{"children":"."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Si l'on souhaite uniquement lire les données, pour le buffer, il suffit d'accéder à la "}],["$","$L11",null,{"href":"https://github.com/ben-eb/gulp-cat/blob/6479a502f42f76e8378ce3bd5c2b2165990f2b8b/index.js#L18","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"propriété contents"}]]]}],["$","span","2",{"children":" pour en lire le contenu. Pour un stream, il faudra "}],["$","$L11",null,{"href":"https://github.com/ben-eb/gulp-cat/blob/6479a502f42f76e8378ce3bd5c2b2165990f2b8b/index.js#L20","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"le dédoubler"}]]]}],["$","span","4",{"children":" via une instance de "}],["$","code",null,{"className":"code_root__5JLV_","children":"Stream.PassThrough"}],["$","span","6",{"children":" afin de garantir aux autre plugins un accès à toute les données du stream."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Enfin, une fois le buffer transformé ou le stream du contenu du fichier \"pipé\", on "}],["$","$L11",null,{"href":"https://github.com/ben-eb/gulp-cat/blob/6479a502f42f76e8378ce3bd5c2b2165990f2b8b/index.js#L24","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"passe l'objet représentant le fichier"}]]]}],["$","span","2",{"children":" au plugin suivant et on "}],["$","$L11",null,{"href":"https://github.com/ben-eb/gulp-cat/blob/6479a502f42f76e8378ce3bd5c2b2165990f2b8b/index.js#L25","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"appelle le callback"}]]]}],["$","span","4",{"children":" reçu en argument de la méthode "}],["$","code",null,{"className":"code_root__5JLV_","children":"_transform"}],["$","span","6",{"children":"."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Si durant ce processus, vous ne traitez que les fichiers d'un genre particulier, il peut-être utile de "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L48","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"tester l'extension du fichier"}]]]}],["$","span","2",{"children":" et de passer directement au plugin suivant tout fichier ne correspondant pas aux critères souhaités."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"De la même façon, une option permettant de "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L53","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"cloner les fichiers"}]]]}],["$","span","2",{"children":" avant de les transformer peut être très utile pour "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-iconfont/commit/58f0f61c1a829eb316759b5bf26a3423e8795404","className":"a_root__WEPS7","title":"Voir un commit illustrant cette facilité d'usage","target":"_blank","children":[null,[["$","span","0",{"children":"faciliter l'usage d'un plugin"}]]]}],["$","span","4",{"children":"."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Bien-sûr, si une transformation d'un fichier, implique le changement de type de ce dernier, il est de votre responsabilité de "}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L57","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"changer l'extension de ce dernier"}]]]}],["$","span","2",{"children":"."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Enfin, toute erreur doit être signalée par l'"}],["$","$L11",null,{"href":"https://github.com/nfroidure/gulp-svg2ttf/blob/bc06b3dd0a91f6442a64256105dfed37e9c9a327/src/index.js#L64","className":"a_root__WEPS7","title":"Voir la ligne","target":"_blank","children":[null,[["$","span","0",{"children":"émission d'un évènement"}]]]}],["$","span","2",{"children":"."}]]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Supportez les streams !"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#supportez-les-streams","className":"anchored_icon__N5Sem","id":"supportez-les-streams","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Bien-sûr, créer une API streamable n'est pas la solution de facilité. Mais je vous encourage grandement à le faire. Qui peut le plus, peut le moins. J'ai bien écris trois fois cette maxime sur ce blog, mais en la matière mieux vaut trop que pas assez."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Si vous pensez que votre API ne peut pas utiliser les streams, je vous enjoint à regarder le code de Browserify. Si ils ont réussi à tirer parti des streams pour un module aussi complexe, il y a fort à parier que votre format XML peut le faire également."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Si cependant, vous n'avez pas la main sur la bibliothèque wrappée par votre plugin, utilisez "}],["$","$L11",null,{"href":"https://npmjs.org/package/bufferstreams","className":"a_root__WEPS7","title":"Voir le module","target":"_blank","children":[null,[["$","span","0",{"children":"BufferStreams"}]]]}],["$","span","2",{"children":" en attendant et créer une issue, ou mieux, faîtes une PR !"}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Voilà, c'est tout pour aujourd'hui ! Vos retours ou questions sont les bienvenues :)."}]]}]],["$","p",null,{"className":"p_root__SHE_W","children":["Published at"," ","dimanche 26 janvier 2014 à 09:01:26","."]}]]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"share_root__Qm_RR","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Commenter et partager"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","$L11",null,{"href":"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fretour_experience_gulp","className":"a_root__WEPS7","title":"Commenter sur Facebook","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_facebook__JKn8d"}],"Facebook"]]}]," - ",["$","$L11",null,{"href":"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fretour_experience_gulp&text=Gulp%C2%A0%3A%20Retour%20d'exp%C3%A9rience&via=nfroidure","className":"a_root__WEPS7","title":"Commenter sur Twitter","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 "}],"Twitter"]]}]," - ",["$","$L11",null,{"href":"mailto:nicolas.froidure@gmail.com","className":"a_root__WEPS7","title":"Me répondre par mail","target":"_self","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_mail__yvBDK"}],"Courriel"]]}]]}]]}]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"page_linkedEntries__jiPuT","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Articles similaires"}],["$","p",null,{"className":"p_root__SHE_W","children":["Dans les catégories"," ","NodeJS, JavaScript et Gulp","."]}],["$","div",null,{"className":"items_entries__5hkLG","children":[["$","div","gulp_vs_grunt",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//gulp_vs_grunt","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Gulp remplacera-t-il Grunt ?"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Gulp est un concurrent de Grunt qui se targue d'exploiter les capacités des streams NodeJS. Petit passage en revue de cet outil."," ",["$","br",null,{}],["$","$L11",null,{"href":".//gulp_vs_grunt","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","lundi 23 décembre 2013 à 23:25:29","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","browserify",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//browserify","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Browserify : Partager le code JavaScript entre front et back end"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Exécuter du JavaScript aussi bien côté serveur que dans le navigateur de vos clients devient possible grâce à Browserify."," ",["$","br",null,{}],["$","$L11",null,{"href":".//browserify","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","lundi 16 décembre 2013 à 13:23:52","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","gruntjs_font_icons",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//gruntjs_font_icons","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Générer des fontes d'icônes avec GruntJS"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Cette semaine, je me suis penché sur la génération de fontes automatiquement avec GruntJS. Compte rendu de mes découvertes et des développements qui les ont suivies."," ",["$","br",null,{}],["$","$L11",null,{"href":".//gruntjs_font_icons","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","samedi 9 novembre 2013 à 15:25:29","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}]]}]]}]}]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"name":"theme-color","content":"#3e78b2"}],["$","meta","2",{"charSet":"utf-8"}],["$","title","3",{"children":"Gulp : Retour d'expérience - Nicolas Froidure"}],["$","meta","4",{"name":"description","content":"Comme promis, Gulp revient à l'ordre du jour de ce Blog avec un retour d'expérience sur l'utilisation de Gulp et le développement de plugins."}],["$","link","5",{"rel":"author","href":"https://insertafter.com"}],["$","meta","6",{"name":"author","content":"Nicolas Froidure"}],["$","meta","7",{"name":"robots","content":"index, follow"}],["$","link","8",{"rel":"canonical","href":"https://insertafter.com/fr/blog/retour_experience_gulp"}],["$","meta","9",{"property":"og:title","content":"Gulp : Retour d'expérience - Nicolas Froidure"}],["$","meta","10",{"property":"og:description","content":"Comme promis, Gulp revient à l'ordre du jour de ce Blog avec un retour d'expérience sur l'utilisation de Gulp et le développement de plugins."}],["$","meta","11",{"property":"og:url","content":"https://insertafter.com/fr/blog/retour_experience_gulp"}],["$","meta","12",{"property":"og:site_name","content":"Nicolas Froidure"}],["$","meta","13",{"property":"og:locale","content":"fr_FR"}],["$","meta","14",{"property":"og:image:alt","content":"Bannière du site"}],["$","meta","15",{"property":"og:image","content":"https://insertafter.com/images/banner.png"}],["$","meta","16",{"property":"og:type","content":"article"}],["$","meta","17",{"name":"twitter:card","content":"summary"}],["$","meta","18",{"name":"twitter:site","content":"@nfroidure"}],["$","meta","19",{"name":"twitter:creator","content":"@nfroidure"}],["$","meta","20",{"name":"twitter:title","content":"Gulp : Retour d'expérience - Nicolas Froidure"}],["$","meta","21",{"name":"twitter:description","content":"Comme promis, Gulp revient à l'ordre du jour de ce Blog avec un retour d'expérience sur l'utilisation de Gulp et le développement de plugins."}],["$","meta","22",{"name":"twitter:image:alt","content":"Bannière du site"}],["$","meta","23",{"name":"twitter:image","content":"https://insertafter.com/images/banner.png"}],["$","link","24",{"rel":"icon","href":"/images/favicon.svg","type":"image/svg+xml","sizes":"any"}],["$","link","25",{"rel":"icon","href":"/images/favicon-16.png","type":"image/png","sizes":"16x16"}],["$","link","26",{"rel":"icon","href":"/images/favicon-128.png","type":"image/png","sizes":"128x128"}]]
1:null
