<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo.svg"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/655a273f6fe37552.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/7202abb5c6529620.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://insertafter.com/_next/static/chunks/webpack-df4a5e9c808eb5e4.js" crossorigin=""/><script src="https://insertafter.com/_next/static/chunks/fd9d1056-5bc70f044f3cb802.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/938-bf741a2eb8fd4828.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/main-app-2e6280b5273157a5.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/176-0a03be62efe5672b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/876-4c07c683293830f5.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-b34423019a386624.js" async=""></script><meta name="theme-color" content="#3e78b2"/><title>Les champs SET et les requ√™tes GROUP BY - Nicolas Froidure</title><meta name="description" content="J&#x27;adore utiliser les champs de type SET pour leur souplesse et leur nature multivalu√©es, mais quand GROUP BY entre dans la place, attention les d√©g√¢ts¬†!"/><link rel="author" href="https://insertafter.com"/><meta name="author" content="Nicolas Froidure"/><meta name="robots" content="index, follow"/><link rel="canonical" href="https://insertafter.com/fr/blog/champs_set_et_group_by"/><meta property="og:title" content="Les champs SET et les requ√™tes GROUP BY - Nicolas Froidure"/><meta property="og:description" content="J&#x27;adore utiliser les champs de type SET pour leur souplesse et leur nature multivalu√©es, mais quand GROUP BY entre dans la place, attention les d√©g√¢ts¬†!"/><meta property="og:url" content="https://insertafter.com/fr/blog/champs_set_et_group_by"/><meta property="og:site_name" content="Nicolas Froidure"/><meta property="og:locale" content="fr_FR"/><meta property="og:image:alt" content="Banni√®re du site"/><meta property="og:image" content="https://insertafter.com/images/banner.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@nfroidure"/><meta name="twitter:creator" content="@nfroidure"/><meta name="twitter:title" content="Les champs SET et les requ√™tes GROUP BY - Nicolas Froidure"/><meta name="twitter:description" content="J&#x27;adore utiliser les champs de type SET pour leur souplesse et leur nature multivalu√©es, mais quand GROUP BY entre dans la place, attention les d√©g√¢ts¬†!"/><meta name="twitter:image:alt" content="Banni√®re du site"/><meta name="twitter:image" content="https://insertafter.com/images/banner.png"/><link rel="icon" href="/images/favicon.svg" type="image/svg+xml" sizes="any"/><link rel="icon" href="/images/favicon-16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/images/favicon-128.png" type="image/png" sizes="128x128"/><script src="https://insertafter.com/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="layout_body__jFZuu"><header class="header_iaHeader__4vCMA"><div><h1><a href="/fr" title="Retour √† l‚Äôaccueil" class="header_iaHeaderLogo__0uNr1"><img src="/images/logo.svg" alt="Logo d‚ÄôInsertAfter"/></a></h1></div></header><nav class="menu_iaMenu__B_rtj"><ul class="menu_iaMenuBody__0Zveq"><li class="menu_iaMenuItem__rOch4"><a href="/fr" title="Retour √† l‚Äôaccueil" class="">Accueil</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/blog" title="Retour √† l‚Äôindex du blog" class="">Blog</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/projets" title="D√©couvrir mes divers projets" class="">Projets</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/a_propos" title="En savoir plus √† mon sujet" class="">√Ä propos</a></li></ul></nav><nav class="languages_iaLanguages__K2J3W"><ul><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagEn__angfJ languages_selected__w1dKv"><a href="/en/blog"><span>en</span></a></li><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagFr__Us5Jb"><a href="/fr/blog"><span>fr</span></a></li></ul></nav><main class="layout_iaMain__6s2gl"><div><section class="contentBlock_root__802UK"><h1 class="h1_root__VPXQG"><span>Les champs </span><code class="code_root__5JLV_">SET</code><span> et les requ√™tes </span><code class="code_root__5JLV_">GROUP BY</code></h1><p class="p_root__SHE_W"><span>J&#x27;adore utiliser les champs de type </span><code class="code_root__5JLV_">SET</code><span> pour leur souplesse et leur nature multivalu√©es, mais quand </span><code class="code_root__5JLV_">GROUP BY</code><span> entre dans la place, attention les d√©g√¢ts¬†!</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Petit rappel sur les champs </span><code class="code_root__5JLV_">SET</code><span> dans MySQL</span> <small><a class="anchored_icon__N5Sem" id="petit-rappel-sur-les-champs-dans-mysql" title="Lien vers cette section" href="#petit-rappel-sur-les-champs-dans-mysql"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Si j&#x27;aime tant utiliser les champs </span><code class="code_root__5JLV_">SET</code><span> dans mes tables, c&#x27;est que contrairement aux champs √† premi√®re vue similaires de type </span><code class="code_root__5JLV_">ENUM</code><span>, ces derniers peuvent √™tre multivalu√©s. Imaginons la table suivante permettant de stocker des documents techniques, relatifs √† des mod√®les d&#x27;√©quipements, qui peuvent √™tre de plusieurs types pr√©d√©finis¬†:</span></p><div class="code_root__5JLV_"><code><pre>CREATE TABLE `documents` (
 `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
 `label` varchar(75) NOT NULL DEFAULT &#x27;&#x27;,
 `model` mediumint(8) unsigned DEFAULT NULL COMMENT &#x27;link:equipmentModels&#x27;,
 `type` **set(&#x27;standard&#x27;,&#x27;law&#x27;,&#x27;rule&#x27;,&#x27;assemblynotice&#x27;,&#x27;washnotice&#x27;,&#x27;usenotice&#x27;,&#x27;certificate&#x27;,&#x27;testreport&#x27;,&#x27;implant&#x27;)** NOT NULL DEFAULT &#x27;law&#x27;,
 `description` text,
 `applicationDate` date NOT NULL DEFAULT &#x27;0000-00-00&#x27;,
 PRIMARY KEY (`id`),
 KEY `model` (`model`),
 KEY `applicationDate` (`applicationDate`),
 KEY `type` (`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1175 ;</pre></code></div><p class="p_root__SHE_W"><span>L&#x27;avantage du champs </span><code class="code_root__5JLV_">SET</code><span> est que pour un set pr√©d√©fini de valeurs qui n&#x27;est pas amen√© √† √©voluer, on fait l&#x27;√©conomie d&#x27;une table de jointure qui rendrait plus complexe notre schema. Mais ce n&#x27;est pas le seul avantage de ce type de champs. En effet, les valeurs ne sont pas stock√©es sous une forme textuelle dans la base de donn√©e, mais sous la forme d&#x27;un entier particulier.</span></p><p class="p_root__SHE_W"><span>Un peu comme pour les droits UNIX, chaque valeurs du champs </span><code class="code_root__5JLV_">SET</code><span> se voit assigner en correspondance un entier dont le bit de poids faible indique la </span><a class="a_root__WEPS7" title="Voir la documentation de SET" target="_blank" href="https://dev.mysql.com/doc/refman/8.0/en/set.html"><span>position dans la liste des valeurs</span></a><span> accept√©es par le champs de type </span><code class="code_root__5JLV_">SET</code><span>. Pour notre table, on a donc </span><code class="code_root__5JLV_">standard=1</code><span>, </span><code class="code_root__5JLV_">law=2</code><span>, </span><code class="code_root__5JLV_">rule=4</code><span>, </span><code class="code_root__5JLV_">assemblynotice=8</code><span>, </span><code class="code_root__5JLV_">washnotice=16</code><span>, </span><code class="code_root__5JLV_">usenotice=32</code><span>, </span><code class="code_root__5JLV_">certificate=64</code><span>, </span><code class="code_root__5JLV_">testreport=128</code><span>, </span><code class="code_root__5JLV_">implant=256</code><span>. Un champs </span><code class="code_root__5JLV_">SET</code><span> ne peut avoir que 64 valeurs ce qui correspond √† la valeur maximale d&#x27;un entier non sign√© sur un syst√®me 64bits.</span></p><p class="p_root__SHE_W"><span>Ainsi, si je souhaite obtenir la liste des documents contenant une notice d&#x27;utilisation, je peux indiff√©remment utiliser les deux requ√™tes suivantes¬†:</span></p><div class="code_root__5JLV_"><code><pre>/* ici type est converti en cha√Æne */
SELECT _ FROM `documents` WHERE `type` LIKE &#x27;%usenotice%&#x27;;

/* ici type est converti en entier  */
SELECT _ FROM `documents` WHERE `type`&amp;32;

/* ici une fonction sp√©cifique aux champs SET est utilis√© */
SELECT \* FROM `documents` WHERE FIND_IN_SET(`type`,&#x27;usenotice&#x27;)&gt;0</pre></code></div><p class="p_root__SHE_W"><span>Id√©alement, il vaut mieux utiliser la fonction d√©di√©e ou la conversion en cha√Æne car elles sont ind√©pendantes de l&#x27;ordre des valeurs dans le champs </span><code class="code_root__5JLV_">SET</code><span> contrairement √† la technique de l&#x27;op√©rateur binaire </span><code class="code_root__5JLV_">&amp;</code><span>. Mais il existe un cas o√π cela peut sauver la vie, c&#x27;est ce qui vient de m&#x27;arriver pour cette table.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Et un jour </span><code class="code_root__5JLV_">GROUP BY</code><span> arriva</span> <small><a class="anchored_icon__N5Sem" id="et-un-jour-arriva" title="Lien vers cette section" href="#et-un-jour-arriva"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Le probl√®me vient quand votre client vous demande si il serait possible de sortir une liste des mod√®les d&#x27;√©quipement pour lesquels certains documents ne sont pas pr√©sents. La difficult√© ici est qu&#x27;√† un mod√®le d&#x27;√©quipement peuvent correspondre plusieurs lignes de la table </span><code class="code_root__5JLV_">documents</code><span>. Nous avons donc besoin de r√©unir toutes les lignes correspondant au mod√®le associ√© et de &quot;merger&quot; les valeurs du champs type pour pouvoir y rechercher les valeurs suppos√©es absentes.</span></p><p class="p_root__SHE_W"><span>Ce f√ªt alors le moment d&#x27;utiliser la valeur num√©rique des champs </span><code class="code_root__5JLV_">SET</code><span>. Mon premier r√©flexe f√ªt d&#x27;essayer de coupler la fonction SUM avec l&#x27;op√©rateur binaire au sein d&#x27;une seule et m√™me requ√™te, mais MySQL n&#x27;accepte pas cette forme, j&#x27;ai donc d√ª utiliser les requ√™tes imbriqu√©es, voil√† le r√©sultat¬†:</span></p><div class="code_root__5JLV_"><code><pre>SELECT * FROM (
  SELECT
    organizations.label AS organization,
    equipmentModels.model AS eqtModel,
    equipmentModels.reference AS eqtRef,
    equipmentModels.description AS eqtDesc,
    SUM(documents.type) AS docTypesInt,
    GROUP_CONCAT(documents.type) AS docTypesString
  FROM `equipmentModels`
  LEFT JOIN documents
    ON documents.model = equipmentModels.id
  LEFT JOIN organizations
    ON organizations.id = equipmentModels.builder
  GROUP BY equipmentModels.id
  ORDER BY equipmentModels.builder
) AS temp
WHERE docTypesInt IS NULL
  OR NOT docTypesInt&amp;1 /* standard */
  OR NOT docTypesInt&amp;2 /* law */
  OR NOT docTypesInt&amp;4 /* rule */
  OR NOT docTypesInt&amp;8 /* assemblynotice */
  OR NOT docTypesInt&amp;16 /* washnotice */
  OR NOT docTypesInt&amp;32 /* usernotice */
  OR NOT docTypesInt&amp;64 /* certificate */
  OR NOT docTypesInt&amp;128 /* testreport */
  OR NOT docTypesInt&amp;256 /* implant */</pre></code></div><p class="p_root__SHE_W"><span>Le principe est simple, on fait la somme des valeurs du champs </span><code class="code_root__5JLV_">type</code><span> pour toutes les lignes concernant le m√™me √©quipement (gr√¢ce √† la clause </span><code class="code_root__5JLV_">GROUP BY</code><span>). Cette somme obtenue, on peut utiliser l&#x27;op√©rateur binaire afin de v√©rifier la pr√©sence d&#x27;une ou plusieurs valeurs au sein de ces champs. la ligne </span><code class="code_root__5JLV_">docTypeInt IS NULL</code><span> sert √† prendre √©galement en compte le cas o√π il n&#x27;y a aucune valeur de type correspondant au mod√®le.</span></p><p class="p_root__SHE_W"><span>Le lecteur averti aura remarqu√© une vaine tentative d&#x27;utilisation de la fonction </span><code class="code_root__5JLV_">GROUP_CONCAT</code><span> qui aurait peut-√™tre pu servir √† continuer d&#x27;utiliser une comparaison √† partir de cha√Ænes, mais le probl√®me est qu&#x27;il n&#x27;y aura pas de virgule ins√©r√©e entre chaque valeurs du champs </span><code class="code_root__5JLV_">type</code><span>. J&#x27;ai cherch√© apr√®s la fonction </span><code class="code_root__5JLV_">GROUP_CONCAT_WS</code><span>, mais elle n&#x27;existe pas encore.</span></p><p class="p_root__SHE_W"><span>Bref, les champs SET c&#x27;est pratique, mais il faut bien conna√Ætre leur nature pour pouvoir en profiter pleinement. Et vous, que fa√Ætes vous avec vosSET¬†?</span></p><p class="p_root__SHE_W">Published at<!-- --> <!-- -->mardi 28 ao√ªt 2012 √† 09:34:25<!-- -->.</p></section><section class="contentBlock_root__802UK"><aside class="share_root__Qm_RR"><h2 class="h2_root__Y02lX">Commenter et partager</h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Commenter sur Facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fchamps_set_et_group_by"><span class="share_icon__bi4Q3 share_facebook__JKn8d"></span>Facebook</a> - <a class="a_root__WEPS7" title="Commenter sur Twitter" target="_blank" href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fchamps_set_et_group_by&amp;text=Les%20champs%20SET%20et%20les%20requ%C3%AAtes%20GROUP%20BY&amp;via=nfroidure"><span class="share_icon__bi4Q3 "></span>Twitter</a> - <a class="a_root__WEPS7" title="Me r√©pondre par mail" target="_self" href="mailto:nicolas.froidure@gmail.com"><span class="share_icon__bi4Q3 share_mail__yvBDK"></span>Courriel</a></p></aside></section><section class="contentBlock_root__802UK"><aside class="page_linkedEntries__jiPuT"><h2 class="h2_root__Y02lX">Articles similaires</h2><p class="p_root__SHE_W">Dans les cat√©gories<!-- --> <!-- -->Base de donn√©es<!-- -->.</p><div class="items_entries__5hkLG"><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//design_probabiliste_mongodb">MongoDB ou la conception probabiliste</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Concevoir une base de donn√©e MongoDB c&#x27;est composer avec le hasard. Dans ce billet je vous propose de d√©couvrir pourquoi et comment.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//design_probabiliste_mongodb">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->samedi 4 avril 2015 √† 15:29:02<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//design_base_donnee_mongodb">Design de bases de donn√©es MongoDB</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Le design de bases de donn√©es MongoDB est une activit√© complexe qui n√©cessite d&#x27;avoir une profonde connaissance des implications des divers choix possibles.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//design_base_donnee_mongodb">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->samedi 28 mars 2015 √† 13:40:32<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//retour_xp_mongodb">MongoDB : Retour d&#x27;exp√©rience</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Je travaille avec MongoDB depuis maintenant presque un an, il est temps pour moi de faire un petit retour sur cette base de donn√©es et sur le NoSQL de mani√®re g√©n√©rale.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//retour_xp_mongodb">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->jeudi 4 d√©cembre 2014 √† 20:44:40<!-- -->.</p><div class="items_clear__3fyGk"></div></div></div></aside></section></div></main><aside class="social_iaSocial__kdR1x"><nav><ul><li><a href="https://mastodon.social/@nfroidure" rel="me" title="Me suivre sur Mastodon" class="social_iaSocialMastodon__MTF6o"><span>Mastodon</span></a></li><li><a href="https://bsky.app/profile/nfroidure.bsky.social" rel="me" title="Me suivre sur Bluesky" class="social_iaSocialBluesky__fKW6M"><span>Bluesky</span></a></li><li><a href="https://twitter.com/nfroidure" title="Me suivre sur Twitter" class="social_iaSocialTwitter__9nU6R"><span>Twitter</span></a></li><li><a href="https://github.com/nfroidure" title="Voir mes projets sur GitHub" class="social_iaSocialGithub__vcU5_"><span>GitHub</span></a></li><li><a href="https://www.npmjs.org/~nfroidure" title="Voir mon compte NPM" class="social_iaSocialNpm__6nku5"><span>NPM</span></a></li><li><a href="https://www.linkedin.com/in/nfroidure/" rel="me" title="Voir mon profil LinkedIn" class="social_iaSocialLinkedin__pWACO"><span>LinkedIn</span></a></li><li><a href="https://facebook.com/nicolas.froidure.douai" rel="me" title="Me suivre sur Facebook" class="social_iaSocialFacebook__w4wfH"><span>Facebook</span></a></li><li><a href="/fr/blog/index.atom" title="S‚Äôabonner au flux RSS" class="social_iaSocialFeed__gEQQ0"><span>Flux RSS</span></a></li></ul></nav></aside><footer class="footer_iaFooter__rhlnQ"><p class="footer_iaFooterContent__VZndF">¬© Nicolas Froidure 2012-<!-- -->2024</p></footer><script src="https://insertafter.com/_next/static/chunks/webpack-df4a5e9c808eb5e4.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:HL[\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"style\",{\"crossOrigin\":\"\"}]\n3:HL[\"https://insertafter.com/_next/static/css/7202abb5c6529620.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\na:I[1778,[],\"\"]\n11:I[8955,[],\"\"]\n8:[\"locale\",\"fr\",\"d\"]\n9:[\"id\",\"champs_set_et_group_by\",\"d\"]\nc:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\nd:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49"])</script><script>self.__next_f.push([1,"px\"}\ne:{\"display\":\"inline-block\"}\nf:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n"])</script><script>self.__next_f.push([1,"1:[null,[\"$\",\"$L4\",null,{\"buildId\":\"QtVK61TW6FdEz0vqMu-ol\",\"assetPrefix\":\"https://insertafter.com\",\"initialCanonicalUrl\":\"/fr/blog/champs_set_et_group_by\",\"initialTree\":[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[\"blog\",{\"children\":[[\"id\",\"champs_set_et_group_by\",\"d\"],{\"children\":[\"__PAGE__?{\\\"locale\\\":\\\"fr\\\",\\\"id\\\":\\\"champs_set_et_group_by\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true]}]}],\"initialSeedData\":[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[\"blog\",{\"children\":[[\"id\",\"champs_set_et_group_by\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\",\"blog\",\"children\",\"$9\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/7202abb5c6529620.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\",\"blog\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,\"$Lb\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$c\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$d\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$e\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$f\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]],\"initialHead\":[false,\"$L10\"],\"globalErrorComponent\":\"$11\"}]]\n"])</script><script>self.__next_f.push([1,"12:\"$Sreact.strict_mode\"\n13:I[4630,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\n14:I[4341,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"$12\",null,{\"children\":[\"$\",\"html\",null,{\"lang\":\"fr\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_body__jFZuu\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"header_iaHeader__4vCMA\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr\",\"title\":\"Retour √† l‚Äôaccueil\",\"className\":\"header_iaHeaderLogo__0uNr1\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/logo.svg\",\"alt\":\"Logo d‚ÄôInsertAfter\"}]}]}]}]}],[\"$\",\"$L13\",null,{\"locale\":\"fr\",\"dictionary\":{\"home\":{\"label\":\"Accueil\",\"title\":\"Retour √† l‚Äôaccueil\"},\"blog\":{\"label\":\"Blog\",\"title\":\"Retour √† l‚Äôindex du blog\"},\"projects\":{\"label\":\"Projets\",\"title\":\"D√©couvrir mes divers projets\"},\"about\":{\"label\":\"√Ä propos\",\"title\":\"En savoir plus √† mon sujet\"}}}],[\"$\",\"$L14\",null,{\"locale\":\"fr\"}],[\"$\",\"main\",null,{\"className\":\"layout_iaMain__6s2gl\",\"children\":[\"$\",\"div\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$L15\",\"notFoundStyles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/719d59f1b635ba1d.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],\"styles\":null}]}]}],[\"$\",\"aside\",null,{\"className\":\"social_iaSocial__kdR1x\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@nfroidure\",\"rel\":\"me\",\"title\":\"Me suivre sur Mastodon\",\"className\":\"social_iaSocialMastodon__MTF6o\",\"children\":[\"$\",\"span\",null,{\"children\":\"Mastodon\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://bsky.app/profile/nfroidure.bsky.social\",\"rel\":\"me\",\"title\":\"Me suivre sur Bluesky\",\"className\":\"social_iaSocialBluesky__fKW6M\",\"children\":[\"$\",\"span\",null,{\"children\":\"Bluesky\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://twitter.com/nfroidure\",\"title\":\"Me suivre sur Twitter\",\"className\":\"social_iaSocialTwitter__9nU6R\",\"children\":[\"$\",\"span\",null,{\"children\":\"Twitter\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/nfroidure\",\"title\":\"Voir mes projets sur GitHub\",\"className\":\"social_iaSocialGithub__vcU5_\",\"children\":[\"$\",\"span\",null,{\"children\":\"GitHub\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.org/~nfroidure\",\"title\":\"Voir mon compte NPM\",\"className\":\"social_iaSocialNpm__6nku5\",\"children\":[\"$\",\"span\",null,{\"children\":\"NPM\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/nfroidure/\",\"rel\":\"me\",\"title\":\"Voir mon profil LinkedIn\",\"className\":\"social_iaSocialLinkedin__pWACO\",\"children\":[\"$\",\"span\",null,{\"children\":\"LinkedIn\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://facebook.com/nicolas.froidure.douai\",\"rel\":\"me\",\"title\":\"Me suivre sur Facebook\",\"className\":\"social_iaSocialFacebook__w4wfH\",\"children\":[\"$\",\"span\",null,{\"children\":\"Facebook\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr/blog/index.atom\",\"title\":\"S‚Äôabonner au flux RSS\",\"className\":\"social_iaSocialFeed__gEQQ0\",\"children\":[\"$\",\"span\",null,{\"children\":\"Flux RSS\"}]}]}]]}]}]}],[\"$\",\"footer\",null,{\"className\":\"footer_iaFooter__rhlnQ\",\"children\":[\"$\",\"p\",null,{\"className\":\"footer_iaFooterContent__VZndF\",\"children\":[\"¬© Nicolas Froidure 2012-\",2024]}]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"15:[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"not-found_p__fvcGn\",\"children\":[[\"$\",\"img\",null,{\"className\":\"not-found_img__IT2jY\",\"src\":\"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif\",\"alt\":\"404.png\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":\"It seems that the page you look for doesn't exist.\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"16:I[5250,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"876\",\"static/chunks/876-4c07c683293830f5.js\",\"798\",\"static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-b34423019a386624.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Les champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\" et les requ√™tes \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"GROUP BY\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"J'adore utiliser les champs de type \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\" pour leur souplesse et leur nature multivalu√©es, mais quand \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"GROUP BY\"}],[\"$\",\"span\",\"4\",{\"children\":\" entre dans la place, attention les d√©g√¢ts¬†!\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Petit rappel sur les champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\" dans MySQL\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#petit-rappel-sur-les-champs-dans-mysql\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"petit-rappel-sur-les-champs-dans-mysql\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Si j'aime tant utiliser les champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\" dans mes tables, c'est que contrairement aux champs √† premi√®re vue similaires de type \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"ENUM\"}],[\"$\",\"span\",\"4\",{\"children\":\", ces derniers peuvent √™tre multivalu√©s. Imaginons la table suivante permettant de stocker des documents techniques, relatifs √† des mod√®les d'√©quipements, qui peuvent √™tre de plusieurs types pr√©d√©finis¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"CREATE TABLE `documents` (\\n `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,\\n `label` varchar(75) NOT NULL DEFAULT '',\\n `model` mediumint(8) unsigned DEFAULT NULL COMMENT 'link:equipmentModels',\\n `type` **set('standard','law','rule','assemblynotice','washnotice','usenotice','certificate','testreport','implant')** NOT NULL DEFAULT 'law',\\n `description` text,\\n `applicationDate` date NOT NULL DEFAULT '0000-00-00',\\n PRIMARY KEY (`id`),\\n KEY `model` (`model`),\\n KEY `applicationDate` (`applicationDate`),\\n KEY `type` (`type`)\\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1175 ;\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'avantage du champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\" est que pour un set pr√©d√©fini de valeurs qui n'est pas amen√© √† √©voluer, on fait l'√©conomie d'une table de jointure qui rendrait plus complexe notre schema. Mais ce n'est pas le seul avantage de ce type de champs. En effet, les valeurs ne sont pas stock√©es sous une forme textuelle dans la base de donn√©e, mais sous la forme d'un entier particulier.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Un peu comme pour les droits UNIX, chaque valeurs du champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\" se voit assigner en correspondance un entier dont le bit de poids faible indique la \"}],[\"$\",\"$L16\",null,{\"href\":\"https://dev.mysql.com/doc/refman/8.0/en/set.html\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir la documentation de SET\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"position dans la liste des valeurs\"}]]]}],[\"$\",\"span\",\"4\",{\"children\":\" accept√©es par le champs de type \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"6\",{\"children\":\". Pour notre table, on a donc \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"standard=1\"}],[\"$\",\"span\",\"8\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"law=2\"}],[\"$\",\"span\",\"10\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"rule=4\"}],[\"$\",\"span\",\"12\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"assemblynotice=8\"}],[\"$\",\"span\",\"14\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"washnotice=16\"}],[\"$\",\"span\",\"16\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"usenotice=32\"}],[\"$\",\"span\",\"18\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"certificate=64\"}],[\"$\",\"span\",\"20\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"testreport=128\"}],[\"$\",\"span\",\"22\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"implant=256\"}],[\"$\",\"span\",\"24\",{\"children\":\". Un champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"26\",{\"children\":\" ne peut avoir que 64 valeurs ce qui correspond √† la valeur maximale d'un entier non sign√© sur un syst√®me 64bits.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ainsi, si je souhaite obtenir la liste des documents contenant une notice d'utilisation, je peux indiff√©remment utiliser les deux requ√™tes suivantes¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"/* ici type est converti en cha√Æne */\\nSELECT _ FROM `documents` WHERE `type` LIKE '%usenotice%';\\n\\n/* ici type est converti en entier  */\\nSELECT _ FROM `documents` WHERE `type`\u002632;\\n\\n/* ici une fonction sp√©cifique aux champs SET est utilis√© */\\nSELECT \\\\* FROM `documents` WHERE FIND_IN_SET(`type`,'usenotice')\u003e0\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Id√©alement, il vaut mieux utiliser la fonction d√©di√©e ou la conversion en cha√Æne car elles sont ind√©pendantes de l'ordre des valeurs dans le champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\" contrairement √† la technique de l'op√©rateur binaire \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"\u0026\"}],[\"$\",\"span\",\"4\",{\"children\":\". Mais il existe un cas o√π cela peut sauver la vie, c'est ce qui vient de m'arriver pour cette table.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Et un jour \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"GROUP BY\"}],[\"$\",\"span\",\"2\",{\"children\":\" arriva\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#et-un-jour-arriva\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"et-un-jour-arriva\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le probl√®me vient quand votre client vous demande si il serait possible de sortir une liste des mod√®les d'√©quipement pour lesquels certains documents ne sont pas pr√©sents. La difficult√© ici est qu'√† un mod√®le d'√©quipement peuvent correspondre plusieurs lignes de la table \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"documents\"}],[\"$\",\"span\",\"2\",{\"children\":\". Nous avons donc besoin de r√©unir toutes les lignes correspondant au mod√®le associ√© et de \\\"merger\\\" les valeurs du champs type pour pouvoir y rechercher les valeurs suppos√©es absentes.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ce f√ªt alors le moment d'utiliser la valeur num√©rique des champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"SET\"}],[\"$\",\"span\",\"2\",{\"children\":\". Mon premier r√©flexe f√ªt d'essayer de coupler la fonction SUM avec l'op√©rateur binaire au sein d'une seule et m√™me requ√™te, mais MySQL n'accepte pas cette forme, j'ai donc d√ª utiliser les requ√™tes imbriqu√©es, voil√† le r√©sultat¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"SELECT * FROM (\\n  SELECT\\n    organizations.label AS organization,\\n    equipmentModels.model AS eqtModel,\\n    equipmentModels.reference AS eqtRef,\\n    equipmentModels.description AS eqtDesc,\\n    SUM(documents.type) AS docTypesInt,\\n    GROUP_CONCAT(documents.type) AS docTypesString\\n  FROM `equipmentModels`\\n  LEFT JOIN documents\\n    ON documents.model = equipmentModels.id\\n  LEFT JOIN organizations\\n    ON organizations.id = equipmentModels.builder\\n  GROUP BY equipmentModels.id\\n  ORDER BY equipmentModels.builder\\n) AS temp\\nWHERE docTypesInt IS NULL\\n  OR NOT docTypesInt\u00261 /* standard */\\n  OR NOT docTypesInt\u00262 /* law */\\n  OR NOT docTypesInt\u00264 /* rule */\\n  OR NOT docTypesInt\u00268 /* assemblynotice */\\n  OR NOT docTypesInt\u002616 /* washnotice */\\n  OR NOT docTypesInt\u002632 /* usernotice */\\n  OR NOT docTypesInt\u002664 /* certificate */\\n  OR NOT docTypesInt\u0026128 /* testreport */\\n  OR NOT docTypesInt\u0026256 /* implant */\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le principe est simple, on fait la somme des valeurs du champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"type\"}],[\"$\",\"span\",\"2\",{\"children\":\" pour toutes les lignes concernant le m√™me √©quipement (gr√¢ce √† la clause \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"GROUP BY\"}],[\"$\",\"span\",\"4\",{\"children\":\"). Cette somme obtenue, on peut utiliser l'op√©rateur binaire afin de v√©rifier la pr√©sence d'une ou plusieurs valeurs au sein de ces champs. la ligne \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"docTypeInt IS NULL\"}],[\"$\",\"span\",\"6\",{\"children\":\" sert √† prendre √©galement en compte le cas o√π il n'y a aucune valeur de type correspondant au mod√®le.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le lecteur averti aura remarqu√© une vaine tentative d'utilisation de la fonction \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"GROUP_CONCAT\"}],[\"$\",\"span\",\"2\",{\"children\":\" qui aurait peut-√™tre pu servir √† continuer d'utiliser une comparaison √† partir de cha√Ænes, mais le probl√®me est qu'il n'y aura pas de virgule ins√©r√©e entre chaque valeurs du champs \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"type\"}],[\"$\",\"span\",\"4\",{\"children\":\". J'ai cherch√© apr√®s la fonction \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"GROUP_CONCAT_WS\"}],[\"$\",\"span\",\"6\",{\"children\":\", mais elle n'existe pas encore.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Bref, les champs SET c'est pratique, mais il faut bien conna√Ætre leur nature pour pouvoir en profiter pleinement. Et vous, que fa√Ætes vous avec vosSET¬†?\"}]]}]],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Published at\",\" \",\"mardi 28 ao√ªt 2012 √† 09:34:25\",\".\"]}]]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"share_root__Qm_RR\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Commenter et partager\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L16\",null,{\"href\":\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fchamps_set_et_group_by\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Facebook\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_facebook__JKn8d\"}],\"Facebook\"]]}],\" - \",[\"$\",\"$L16\",null,{\"href\":\"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fchamps_set_et_group_by\u0026text=Les%20champs%20SET%20et%20les%20requ%C3%AAtes%20GROUP%20BY\u0026via=nfroidure\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Twitter\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 \"}],\"Twitter\"]]}],\" - \",[\"$\",\"$L16\",null,{\"href\":\"mailto:nicolas.froidure@gmail.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Me r√©pondre par mail\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_mail__yvBDK\"}],\"Courriel\"]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"page_linkedEntries__jiPuT\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Articles similaires\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Dans les cat√©gories\",\" \",\"Base de donn√©es\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_entries__5hkLG\",\"children\":[[\"$\",\"div\",\"design_probabiliste_mongodb\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//design_probabiliste_mongodb\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"MongoDB ou la conception probabiliste\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Concevoir une base de donn√©e MongoDB c'est composer avec le hasard. Dans ce billet je vous propose de d√©couvrir pourquoi et comment.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//design_probabiliste_mongodb\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"samedi 4 avril 2015 √† 15:29:02\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"design_base_donnee_mongodb\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//design_base_donnee_mongodb\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Design de bases de donn√©es MongoDB\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Le design de bases de donn√©es MongoDB est une activit√© complexe qui n√©cessite d'avoir une profonde connaissance des implications des divers choix possibles.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//design_base_donnee_mongodb\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"samedi 28 mars 2015 √† 13:40:32\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"retour_xp_mongodb\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//retour_xp_mongodb\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"MongoDB : Retour d'exp√©rience\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Je travaille avec MongoDB depuis maintenant presque un an, il est temps pour moi de faire un petit retour sur cette base de donn√©es et sur le NoSQL de mani√®re g√©n√©rale.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//retour_xp_mongodb\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"jeudi 4 d√©cembre 2014 √† 20:44:40\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}]]}]]}]}]]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"content\":\"#3e78b2\"}],[\"$\",\"meta\",\"2\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"3\",{\"children\":\"Les champs SET et les requ√™tes GROUP BY - Nicolas Froidure\"}],[\"$\",\"meta\",\"4\",{\"name\":\"description\",\"content\":\"J'adore utiliser les champs de type SET pour leur souplesse et leur nature multivalu√©es, mais quand GROUP BY entre dans la place, attention les d√©g√¢ts¬†!\"}],[\"$\",\"link\",\"5\",{\"rel\":\"author\",\"href\":\"https://insertafter.com\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"link\",\"8\",{\"rel\":\"canonical\",\"href\":\"https://insertafter.com/fr/blog/champs_set_et_group_by\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:title\",\"content\":\"Les champs SET et les requ√™tes GROUP BY - Nicolas Froidure\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:description\",\"content\":\"J'adore utiliser les champs de type SET pour leur souplesse et leur nature multivalu√©es, mais quand GROUP BY entre dans la place, attention les d√©g√¢ts¬†!\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:url\",\"content\":\"https://insertafter.com/fr/blog/champs_set_et_group_by\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:site_name\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:locale\",\"content\":\"fr_FR\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:site\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:creator\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:title\",\"content\":\"Les champs SET et les requ√™tes GROUP BY - Nicolas Froidure\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:description\",\"content\":\"J'adore utiliser les champs de type SET pour leur souplesse et leur nature multivalu√©es, mais quand GROUP BY entre dans la place, attention les d√©g√¢ts¬†!\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"23\",{\"name\":\"twitter:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"icon\",\"href\":\"/images/favicon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"link\",\"25\",{\"rel\":\"icon\",\"href\":\"/images/favicon-16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"26\",{\"rel\":\"icon\",\"href\":\"/images/favicon-128.png\",\"type\":\"image/png\",\"sizes\":\"128x128\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>