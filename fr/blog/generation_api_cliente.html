<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo.svg"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/5ae1d7c7e300ccde.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/30c50e2434328b9a.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://insertafter.com/_next/static/chunks/webpack-aa95dccaf68483d1.js" crossorigin=""/><script src="https://insertafter.com/_next/static/chunks/fd9d1056-5bc70f044f3cb802.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/938-bf741a2eb8fd4828.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/main-app-2e6280b5273157a5.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/176-0a03be62efe5672b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/layout-9d5968bc5fa10dc2.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/876-4c07c683293830f5.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-b35c319b7df441da.js" async=""></script><meta name="theme-color" content="#3e78b2"/><title>G√©n√©ration automatique de clients d&#x27;APIs - Nicolas Froidure</title><meta name="description" content="Personne de devrait perdre du temps √† √©crire du code qui peut √™tre g√©n√©r√© automatiquement. Voici comment je m&#x27;y prends pour les clients d&#x27;APIs."/><link rel="author" href="https://insertafter.com"/><meta name="author" content="Nicolas Froidure"/><meta name="robots" content="index, follow"/><link rel="canonical" href="https://insertafter.com/fr/blog/generation_api_cliente"/><meta property="og:title" content="G√©n√©ration automatique de clients d&#x27;APIs - Nicolas Froidure"/><meta property="og:description" content="Personne de devrait perdre du temps √† √©crire du code qui peut √™tre g√©n√©r√© automatiquement. Voici comment je m&#x27;y prends pour les clients d&#x27;APIs."/><meta property="og:url" content="https://insertafter.com/fr/blog/generation_api_cliente"/><meta property="og:site_name" content="Nicolas Froidure"/><meta property="og:locale" content="fr_FR"/><meta property="og:image:alt" content="Banni√®re du site"/><meta property="og:image" content="https://insertafter.com/images/banner.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@nfroidure"/><meta name="twitter:creator" content="@nfroidure"/><meta name="twitter:title" content="G√©n√©ration automatique de clients d&#x27;APIs - Nicolas Froidure"/><meta name="twitter:description" content="Personne de devrait perdre du temps √† √©crire du code qui peut √™tre g√©n√©r√© automatiquement. Voici comment je m&#x27;y prends pour les clients d&#x27;APIs."/><meta name="twitter:image:alt" content="Banni√®re du site"/><meta name="twitter:image" content="https://insertafter.com/images/banner.png"/><link rel="icon" href="/images/favicon.svg" type="image/svg+xml" sizes="any"/><link rel="icon" href="/images/favicon-16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/images/favicon-128.png" type="image/png" sizes="128x128"/><script src="https://insertafter.com/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="layout_body__jFZuu"><header class="header_iaHeader__4vCMA"><div><h1><a href="/fr" title="Retour √† l‚Äôaccueil" class="header_iaHeaderLogo__0uNr1"><img src="/images/logo.svg" alt="Logo d‚ÄôInsertAfter"/></a></h1></div></header><nav class="menu_iaMenu__B_rtj"><ul class="menu_iaMenuBody__0Zveq"><li class="menu_iaMenuItem__rOch4"><a href="/fr" title="Retour √† l‚Äôaccueil" class="">Accueil</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/blog" title="Retour √† l‚Äôindex du blog" class="">Blog</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/projets" title="D√©couvrir mes divers projets" class="">Projets</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/a_propos" title="En savoir plus √† mon sujet" class="">√Ä propos</a></li></ul></nav><nav class="languages_iaLanguages__K2J3W"><ul><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagEn__angfJ languages_selected__w1dKv"><a href="/en/blog"><span>en</span></a></li><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagFr__Us5Jb"><a href="/fr/blog"><span>fr</span></a></li></ul></nav><main class="layout_iaMain__6s2gl"><div><section class="contentBlock_root__802UK"><h1 class="h1_root__VPXQG"><span>G√©n√©ration automatique de clients d&#x27;APIs</span></h1><p class="p_root__SHE_W"><strong class="strong_root__kOzFq"><span>TL; DR:</span></strong><span> G√©n√©rez du code simple et allez √† l&#x27;essentiel.</span></p><p class="p_root__SHE_W"><span>Il para√Ætrait fou de nos jours avec des outils Comme HapiJS, ExpressJS ou m√™me avec un routeur perso comme le mien de cr√©er des APIs non-document√©es. L&#x27;initiative </span><a class="a_root__WEPS7" target="_blank" href="https://www.openapis.org/"><span>OpenAPI</span></a><span> (anciennement la sp√©cification Swagger) nous offre aujourd&#x27;hui une fa√ßon formelle et largement support√©e de d√©finir des APIs.</span></p><p class="p_root__SHE_W"><span>Les d√©veloppeurs frontends ont besoin de prendre connaissance des APIs qu&#x27;ils utilisent mais nous devons aller encore plus loin en leur proposant une API cliente g√©n√©r√©e automatiquement.</span></p><p class="p_root__SHE_W"><span>Le projet </span><a class="a_root__WEPS7" target="_blank" href="https://swagger.io/tools/swagger-codegen/"><span>Swagger Codegen</span></a><span>, propose de nombreux g√©n√©rateurs pr√™ts √† l&#x27;usage pour de nombreux environnements et languages cibles.</span></p><p class="p_root__SHE_W"><span>J&#x27;ai d√ª r√©cemment g√©n√©rer un client d&#x27;API pour AngularJS (qu&#x27;au passage je trouve meilleur qu&#x27;Angular2).</span></p><p class="p_root__SHE_W"><span>Malheureusement, les g√©n√©rateurs existant ne me satisfaisaient pas. Ils proposent une interface en POO (patron de conception inadapt√© selon moi) et ajoutent un niveau de complexit√© inutile en √©clatant l&#x27;API dans plusieurs fichiers.</span></p><p class="p_root__SHE_W"><span>Ils cr√©ent des fonctions ayant un param√®tre pour chaque valeur d√©clar√©e dans le swagger cr√©ant des signatures de fonctions √† rallonge dont il faut se souvenir l&#x27;ordre des arguments. Comme notre application utilisait ES6, je voulais √©galement tirer parti du destructuring pour avoir un interface plus moderne pour notre client d&#x27;API.</span></p><p class="p_root__SHE_W"><span>J&#x27;ai donc d√©cid√© de cr√©er notre propre g√©n√©rateur en prenant en compte ce qui fait d&#x27;un client d&#x27;API un bon client¬†:</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Du code g√©n√©r√© ne doit pas √™tre modifi√© √† la main</span> <small><a class="anchored_icon__N5Sem" id="du-code-genere-ne-doit-pas-etre-modifie-a-la-main" title="Lien vers cette section" href="#du-code-genere-ne-doit-pas-etre-modifie-a-la-main"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>En effet, si l&#x27;on peut g√©n√©rer du code une fois, on peut le faire mille fois. Pour moi, g√©n√©rer le client d&#x27;API devrait √™tre fait √† chaque build.</span></p><p class="p_root__SHE_W"><span>Dans mon cas, j&#x27;ai cr√©√© rapidement un chargeur Webpack pour les fichiers </span><code class="code_root__5JLV_">*.swagger.json</code><span> me permettant d&#x27;importer notre client d&#x27;API dans Angular gr√¢ce √† une simple ligne de code comme suit </span><code class="code_root__5JLV_">require(&#x27;./api.swagger.json&#x27;);</code><span>.</span></p><p class="p_root__SHE_W"><span>L&#x27;avantage de ne pas avoir √† changer le code √† la main est que de ce fait on se fiche totalement que le code ne soit pas √©l√©gant ou que les fichiers g√©n√©r√©s soient trop long ou mal indent√©s. Seule la surface de l&#x27;API a une vraie importance.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>L&#x27;API doit masquer les d√©tails HTTP</span> <small><a class="anchored_icon__N5Sem" id="l-api-doit-masquer-les-details-http" title="Lien vers cette section" href="#l-api-doit-masquer-les-details-http"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Rien n&#x27;est pire que d&#x27;avoir des dizaines de milliers de lignes de code qui d√©pendent de vos appels HTTP. D&#x27;exp√©rience, maintenir une API REST retro-compatible est un v√©ritable cauchemar pour la productivit√©, surtout quand on part d&#x27;un existant peu structur√©.</span></p><p class="p_root__SHE_W"><span>Sauf si votre API est publique, vous pouvez vous √©pargner de nombreuses peines en masquant les d√©tails de vos appels HTTP et en les englobant dans une simple fonction dont l&#x27;unique argument est un objet dont les propri√©t√©s sont les param√®tres accept√©s par votre appel HTTP.</span></p><p class="p_root__SHE_W"><span>Par exemple, dans mon client HTTP, </span><code class="code_root__5JLV_">GET /articles/{articleId}?token=x</code><span> devient simplement </span><code class="code_root__5JLV_">getArticle({ articleId, token })</code><span>. Si demain, le param√®tre </span><code class="code_root__5JLV_">token</code><span> devait √™tre ajout√© dans le header </span><code class="code_root__5JLV_">Authorization</code><span> au lieu des param√®tres de requ√™te, ce serait transparent pour les frontends.</span></p><p class="p_root__SHE_W"><span>Ils n&#x27;auraient qu&#x27;√† r√©importer le fichier OpenAPI et √† simplement builder le projet de nouveau sans rien avoir √† faire de plus.</span></p><p class="p_root__SHE_W"><span>Je suis, en quelques sorte, pompier de vielle application Express depuis quelques ann√©es. Je transforme des APIs r√©alis√©es √† la h√¢te en API RESTful progressivement en essayant de ne rien casser. B√©n√©ficier de ce type de flexibilit√© est du pain b√©ni. Par exemple, transformer les appels POST en appels PUT avec un UUID g√©n√©r√© via le client devient simple comme bonjour.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Une surface d&#x27;API minimaliste</span> <small><a class="anchored_icon__N5Sem" id="une-surface-d-api-minimaliste" title="Lien vers cette section" href="#une-surface-d-api-minimaliste"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Je n&#x27;ai fait qu&#x27;exporter un service Angular nomm√© </span><code class="code_root__5JLV_">API</code><span>. C&#x27;est un simple objet ayant une m√©thode pour chaque id d&#x27;op√©ration du fichier Swagger. Pas de POO, pas de gestion de l&#x27;authentification, simplement un gros mapping des appels HTTP possibles en fonctions.</span></p><p class="p_root__SHE_W"><span>Utiliser ce client dans l&#x27;application h√¥te revient donc √† cr√©er un autre service par dessus ajoutant la logique d&#x27;acc√®s sp√©cifique √† l&#x27;application.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Effets de bord sympas</span> <small><a class="anchored_icon__N5Sem" id="effets-de-bord-sympas" title="Lien vers cette section" href="#effets-de-bord-sympas"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Depuis que je fais du d√©veloppement d&#x27;API Rest dirig√© par la documentation (depuis </span><a class="a_root__WEPS7" target="_blank" href="https://github.com/Rest4/Rest4-php/blob/master/php/class.RestAuthDigestDriver.php#L7-L30"><span>assez longtemps</span></a><span> en fait), je prend soin de forcer un order pr√©cis pour les param√®tres de requ√™te (query parameters).</span></p><p class="p_root__SHE_W"><span>Ceci me permet d&#x27;optimiser le cache en assurant l&#x27;unicit√© des URLs pour une m√™me ressource. Cependant, cela peut ennuyer les d√©veloppeurs fronts qui n&#x27;aiment pas les APIs strictes. Pour plus d&#x27;info, vous pouvez jeter un ≈ìil √† </span><a class="a_root__WEPS7" target="_blank" href="https://github.com/nfroidure/strict-qs"><span>strict-qs</span></a><span>.</span></p><p class="p_root__SHE_W"><span>L&#x27;avantage de g√©n√©rer soit m√™me le code du client d&#x27;API front est que l&#x27;on peut g√©rer tout cela de mani√®re transparente pour les d√©veloppeurs front qui ne sont plus confront√©s √† des erreurs dues √† leur utilisation de l&#x27;API Rest.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Et si on s&#x27;amusait un peu?</span> <small><a class="anchored_icon__N5Sem" id="et-si-on-s-amusait-un-peu" title="Lien vers cette section" href="#et-si-on-s-amusait-un-peu"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Bon, g√©n√©rer du code c&#x27;est plus cool que de l&#x27;√©crire. Mais pourquoi ne pas saisir l&#x27;occasion pour recycler une vielle id√©e¬†? Pourquoi ne pas cr√©er un nouveau genre de template¬†? J&#x27;ai d√©j√† explor√© la puissance des arbres AST avec </span><a class="a_root__WEPS7" target="_self" href="/en/blog/lets_subset_javascript"><span>jsub</span></a><span> mais je voulais exp√©rimenter un autre concept bas√© l√† dessus que j&#x27;ai nomm√© template AST.</span></p><p class="p_root__SHE_W"><span>L&#x27;id√©e est de cr√©er des templates pour g√©n√©rer des fichiers JavaScript mais qui sont eux-m√™me des fichiers JavaScript valides. De cette fa√ßon, les outils de linting, d&#x27;analyse de syntaxe et tous ceux qui sont habituellement compatibles avec du bon vieux JS fonctionnent.</span></p><p class="p_root__SHE_W"><span>J&#x27;ai donc cr√©√© </span><a class="a_root__WEPS7" target="_blank" href="https://github.com/nfroidure/asttpl"><span>astpl</span></a><span> et je vous laisse voir le template de notre client d&#x27;API AngularJS avec cet </span><a class="a_root__WEPS7" target="_blank" href="https://github.com/nfroidure/asttpl/blob/master/src/realworld.mocha.js#L82-L131"><span>exemple</span></a><span>.</span></p><p class="p_root__SHE_W"><span>Et voil√†¬†! J&#x27;esp√®re que je vous ai donn√© envie de g√©n√©rer vos client d&#x27;APIs et que mes quelques conseils vous √©viteront certains d√©boires ;).</span></p><p class="p_root__SHE_W">Published at<!-- --> <!-- -->dimanche 19 f√©vrier 2017 √† 16:00:00<!-- -->.</p></section><section class="contentBlock_root__802UK"><aside class="share_root__Qm_RR"><h2 class="h2_root__Y02lX">Commenter et partager</h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Commenter sur Facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fgeneration_api_cliente"><span class="share_icon__bi4Q3 share_facebook__JKn8d"></span>Facebook</a> - <a class="a_root__WEPS7" title="Commenter sur Twitter" target="_blank" href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fgeneration_api_cliente&amp;text=G%C3%A9n%C3%A9ration%20automatique%20de%20clients%20d&#x27;APIs&amp;via=nfroidure"><span class="share_icon__bi4Q3 "></span>Twitter</a> - <a class="a_root__WEPS7" title="Me r√©pondre par mail" target="_self" href="mailto:nicolas.froidure@gmail.com"><span class="share_icon__bi4Q3 share_mail__yvBDK"></span>Courriel</a></p></aside></section><section class="contentBlock_root__802UK"><aside class="page_linkedEntries__jiPuT"><h2 class="h2_root__Y02lX">Articles similaires</h2><p class="p_root__SHE_W">Dans les cat√©gories<!-- --> <!-- -->JavaScript<!-- -->.</p><div class="items_entries__5hkLG"><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//metapak">M√©ta-paquets NPM avec metapak</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Pr√©sentation sur metapak, un module d&#x27;aide √† la cr√©ation de m√©ta-paquets NPM.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//metapak">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->dimanche 5 f√©vrier 2017 √† 08:46:44<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//es6_dans_ton_code">ES6 dans ton code</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Pr√©sentation sur les √©volutions apport√©es par la version 6 d&#x27;ECMAScript donn√©e √† l&#x27;occasion de ChtiJS.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//es6_dans_ton_code">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->mardi 12 mai 2015 √† 10:21:43<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//infrastructure_microservices">Architecture d&#x27;une API NodeJS</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Pr√©sentation d&#x27;une architecture d&#x27;API REST r√©alis√©e avec des microservices.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//infrastructure_microservices">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->mardi 12 mai 2015 √† 10:21:43<!-- -->.</p><div class="items_clear__3fyGk"></div></div></div></aside></section></div></main><aside class="social_iaSocial__kdR1x"><nav><ul><li><a href="https://mastodon.social/@nfroidure" rel="me" title="Me suivre sur Mastodon" class="social_iaSocialMastodon__MTF6o"><span>Mastodon</span></a></li><li><a href="https://bsky.app/profile/nfroidure.bsky.social" rel="me" title="Me suivre sur Bluesky" class="social_iaSocialBluesky__fKW6M"><span>Bluesky</span></a></li><li><a href="https://twitter.com/nfroidure" title="Me suivre sur Twitter" class="social_iaSocialTwitter__9nU6R"><span>Twitter</span></a></li><li><a href="https://github.com/nfroidure" title="Voir mes projets sur GitHub" class="social_iaSocialGithub__vcU5_"><span>GitHub</span></a></li><li><a href="https://www.npmjs.org/~nfroidure" title="Voir mon compte NPM" class="social_iaSocialNpm__6nku5"><span>NPM</span></a></li><li><a href="https://www.linkedin.com/in/nfroidure/" rel="me" title="Voir mon profil LinkedIn" class="social_iaSocialLinkedin__pWACO"><span>LinkedIn</span></a></li><li><a href="https://facebook.com/nicolas.froidure.douai" rel="me" title="Me suivre sur Facebook" class="social_iaSocialFacebook__w4wfH"><span>Facebook</span></a></li><li><a href="/fr/blog/index.atom" title="S‚Äôabonner au flux RSS" class="social_iaSocialFeed__gEQQ0"><span>Flux RSS</span></a></li></ul></nav></aside><footer class="footer_iaFooter__rhlnQ"><p class="footer_iaFooterContent__VZndF">¬© Nicolas Froidure 2012-<!-- -->2024</p></footer><script src="https://insertafter.com/_next/static/chunks/webpack-aa95dccaf68483d1.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:HL[\"https://insertafter.com/_next/static/css/5ae1d7c7e300ccde.css\",\"style\",{\"crossOrigin\":\"\"}]\n3:HL[\"https://insertafter.com/_next/static/css/30c50e2434328b9a.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\na:I[1778,[],\"\"]\n11:I[8955,[],\"\"]\n8:[\"locale\",\"fr\",\"d\"]\n9:[\"id\",\"generation_api_cliente\",\"d\"]\nc:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\nd:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49"])</script><script>self.__next_f.push([1,"px\"}\ne:{\"display\":\"inline-block\"}\nf:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n"])</script><script>self.__next_f.push([1,"1:[null,[\"$\",\"$L4\",null,{\"buildId\":\"mDCHn5j1V2qyug5qJSTyA\",\"assetPrefix\":\"https://insertafter.com\",\"initialCanonicalUrl\":\"/fr/blog/generation_api_cliente\",\"initialTree\":[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[\"blog\",{\"children\":[[\"id\",\"generation_api_cliente\",\"d\"],{\"children\":[\"__PAGE__?{\\\"locale\\\":\\\"fr\\\",\\\"id\\\":\\\"generation_api_cliente\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true]}]}],\"initialSeedData\":[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[\"blog\",{\"children\":[[\"id\",\"generation_api_cliente\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\",\"blog\",\"children\",\"$9\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/30c50e2434328b9a.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\",\"blog\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,\"$Lb\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/5ae1d7c7e300ccde.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$c\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$d\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$e\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$f\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]],\"initialHead\":[false,\"$L10\"],\"globalErrorComponent\":\"$11\"}]]\n"])</script><script>self.__next_f.push([1,"12:\"$Sreact.strict_mode\"\n13:I[4630,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-9d5968bc5fa10dc2.js\"],\"\"]\n14:I[4341,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-9d5968bc5fa10dc2.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"$12\",null,{\"children\":[\"$\",\"html\",null,{\"lang\":\"fr\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_body__jFZuu\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"header_iaHeader__4vCMA\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr\",\"title\":\"Retour √† l‚Äôaccueil\",\"className\":\"header_iaHeaderLogo__0uNr1\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/logo.svg\",\"alt\":\"Logo d‚ÄôInsertAfter\"}]}]}]}]}],[\"$\",\"$L13\",null,{\"locale\":\"fr\",\"dictionary\":{\"home\":{\"label\":\"Accueil\",\"title\":\"Retour √† l‚Äôaccueil\"},\"blog\":{\"label\":\"Blog\",\"title\":\"Retour √† l‚Äôindex du blog\"},\"projects\":{\"label\":\"Projets\",\"title\":\"D√©couvrir mes divers projets\"},\"about\":{\"label\":\"√Ä propos\",\"title\":\"En savoir plus √† mon sujet\"}}}],[\"$\",\"$L14\",null,{\"locale\":\"fr\"}],[\"$\",\"main\",null,{\"className\":\"layout_iaMain__6s2gl\",\"children\":[\"$\",\"div\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withLocale)\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$L15\",\"notFoundStyles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/719d59f1b635ba1d.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],\"styles\":null}]}]}],[\"$\",\"aside\",null,{\"className\":\"social_iaSocial__kdR1x\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@nfroidure\",\"rel\":\"me\",\"title\":\"Me suivre sur Mastodon\",\"className\":\"social_iaSocialMastodon__MTF6o\",\"children\":[\"$\",\"span\",null,{\"children\":\"Mastodon\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://bsky.app/profile/nfroidure.bsky.social\",\"rel\":\"me\",\"title\":\"Me suivre sur Bluesky\",\"className\":\"social_iaSocialBluesky__fKW6M\",\"children\":[\"$\",\"span\",null,{\"children\":\"Bluesky\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://twitter.com/nfroidure\",\"title\":\"Me suivre sur Twitter\",\"className\":\"social_iaSocialTwitter__9nU6R\",\"children\":[\"$\",\"span\",null,{\"children\":\"Twitter\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/nfroidure\",\"title\":\"Voir mes projets sur GitHub\",\"className\":\"social_iaSocialGithub__vcU5_\",\"children\":[\"$\",\"span\",null,{\"children\":\"GitHub\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.org/~nfroidure\",\"title\":\"Voir mon compte NPM\",\"className\":\"social_iaSocialNpm__6nku5\",\"children\":[\"$\",\"span\",null,{\"children\":\"NPM\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/nfroidure/\",\"rel\":\"me\",\"title\":\"Voir mon profil LinkedIn\",\"className\":\"social_iaSocialLinkedin__pWACO\",\"children\":[\"$\",\"span\",null,{\"children\":\"LinkedIn\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://facebook.com/nicolas.froidure.douai\",\"rel\":\"me\",\"title\":\"Me suivre sur Facebook\",\"className\":\"social_iaSocialFacebook__w4wfH\",\"children\":[\"$\",\"span\",null,{\"children\":\"Facebook\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr/blog/index.atom\",\"title\":\"S‚Äôabonner au flux RSS\",\"className\":\"social_iaSocialFeed__gEQQ0\",\"children\":[\"$\",\"span\",null,{\"children\":\"Flux RSS\"}]}]}]]}]}]}],[\"$\",\"footer\",null,{\"className\":\"footer_iaFooter__rhlnQ\",\"children\":[\"$\",\"p\",null,{\"className\":\"footer_iaFooterContent__VZndF\",\"children\":[\"¬© Nicolas Froidure 2012-\",2024]}]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"15:[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"not-found_p__fvcGn\",\"children\":[[\"$\",\"img\",null,{\"className\":\"not-found_img__IT2jY\",\"src\":\"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif\",\"alt\":\"404.png\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":\"It seems that the page you look for doesn't exist.\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"16:I[5250,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"876\",\"static/chunks/876-4c07c683293830f5.js\",\"798\",\"static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-b35c319b7df441da.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"G√©n√©ration automatique de clients d'APIs\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"TL; DR:\"}]]}],[\"$\",\"span\",\"1\",{\"children\":\" G√©n√©rez du code simple et allez √† l'essentiel.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Il para√Ætrait fou de nos jours avec des outils Comme HapiJS, ExpressJS ou m√™me avec un routeur perso comme le mien de cr√©er des APIs non-document√©es. L'initiative \"}],[\"$\",\"$L16\",null,{\"href\":\"https://www.openapis.org/\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"OpenAPI\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" (anciennement la sp√©cification Swagger) nous offre aujourd'hui une fa√ßon formelle et largement support√©e de d√©finir des APIs.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Les d√©veloppeurs frontends ont besoin de prendre connaissance des APIs qu'ils utilisent mais nous devons aller encore plus loin en leur proposant une API cliente g√©n√©r√©e automatiquement.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le projet \"}],[\"$\",\"$L16\",null,{\"href\":\"https://swagger.io/tools/swagger-codegen/\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Swagger Codegen\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\", propose de nombreux g√©n√©rateurs pr√™ts √† l'usage pour de nombreux environnements et languages cibles.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"J'ai d√ª r√©cemment g√©n√©rer un client d'API pour AngularJS (qu'au passage je trouve meilleur qu'Angular2).\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Malheureusement, les g√©n√©rateurs existant ne me satisfaisaient pas. Ils proposent une interface en POO (patron de conception inadapt√© selon moi) et ajoutent un niveau de complexit√© inutile en √©clatant l'API dans plusieurs fichiers.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ils cr√©ent des fonctions ayant un param√®tre pour chaque valeur d√©clar√©e dans le swagger cr√©ant des signatures de fonctions √† rallonge dont il faut se souvenir l'ordre des arguments. Comme notre application utilisait ES6, je voulais √©galement tirer parti du destructuring pour avoir un interface plus moderne pour notre client d'API.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"J'ai donc d√©cid√© de cr√©er notre propre g√©n√©rateur en prenant en compte ce qui fait d'un client d'API un bon client¬†:\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Du code g√©n√©r√© ne doit pas √™tre modifi√© √† la main\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#du-code-genere-ne-doit-pas-etre-modifie-a-la-main\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"du-code-genere-ne-doit-pas-etre-modifie-a-la-main\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"En effet, si l'on peut g√©n√©rer du code une fois, on peut le faire mille fois. Pour moi, g√©n√©rer le client d'API devrait √™tre fait √† chaque build.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Dans mon cas, j'ai cr√©√© rapidement un chargeur Webpack pour les fichiers \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"*.swagger.json\"}],[\"$\",\"span\",\"2\",{\"children\":\" me permettant d'importer notre client d'API dans Angular gr√¢ce √† une simple ligne de code comme suit \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"require('./api.swagger.json');\"}],[\"$\",\"span\",\"4\",{\"children\":\".\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'avantage de ne pas avoir √† changer le code √† la main est que de ce fait on se fiche totalement que le code ne soit pas √©l√©gant ou que les fichiers g√©n√©r√©s soient trop long ou mal indent√©s. Seule la surface de l'API a une vraie importance.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"L'API doit masquer les d√©tails HTTP\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#l-api-doit-masquer-les-details-http\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"l-api-doit-masquer-les-details-http\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Rien n'est pire que d'avoir des dizaines de milliers de lignes de code qui d√©pendent de vos appels HTTP. D'exp√©rience, maintenir une API REST retro-compatible est un v√©ritable cauchemar pour la productivit√©, surtout quand on part d'un existant peu structur√©.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Sauf si votre API est publique, vous pouvez vous √©pargner de nombreuses peines en masquant les d√©tails de vos appels HTTP et en les englobant dans une simple fonction dont l'unique argument est un objet dont les propri√©t√©s sont les param√®tres accept√©s par votre appel HTTP.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Par exemple, dans mon client HTTP, \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"GET /articles/{articleId}?token=x\"}],[\"$\",\"span\",\"2\",{\"children\":\" devient simplement \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"getArticle({ articleId, token })\"}],[\"$\",\"span\",\"4\",{\"children\":\". Si demain, le param√®tre \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"token\"}],[\"$\",\"span\",\"6\",{\"children\":\" devait √™tre ajout√© dans le header \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"Authorization\"}],[\"$\",\"span\",\"8\",{\"children\":\" au lieu des param√®tres de requ√™te, ce serait transparent pour les frontends.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ils n'auraient qu'√† r√©importer le fichier OpenAPI et √† simplement builder le projet de nouveau sans rien avoir √† faire de plus.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Je suis, en quelques sorte, pompier de vielle application Express depuis quelques ann√©es. Je transforme des APIs r√©alis√©es √† la h√¢te en API RESTful progressivement en essayant de ne rien casser. B√©n√©ficier de ce type de flexibilit√© est du pain b√©ni. Par exemple, transformer les appels POST en appels PUT avec un UUID g√©n√©r√© via le client devient simple comme bonjour.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Une surface d'API minimaliste\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#une-surface-d-api-minimaliste\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"une-surface-d-api-minimaliste\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Je n'ai fait qu'exporter un service Angular nomm√© \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"API\"}],[\"$\",\"span\",\"2\",{\"children\":\". C'est un simple objet ayant une m√©thode pour chaque id d'op√©ration du fichier Swagger. Pas de POO, pas de gestion de l'authentification, simplement un gros mapping des appels HTTP possibles en fonctions.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Utiliser ce client dans l'application h√¥te revient donc √† cr√©er un autre service par dessus ajoutant la logique d'acc√®s sp√©cifique √† l'application.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Effets de bord sympas\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#effets-de-bord-sympas\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"effets-de-bord-sympas\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Depuis que je fais du d√©veloppement d'API Rest dirig√© par la documentation (depuis \"}],[\"$\",\"$L16\",null,{\"href\":\"https://github.com/Rest4/Rest4-php/blob/master/php/class.RestAuthDigestDriver.php#L7-L30\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"assez longtemps\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" en fait), je prend soin de forcer un order pr√©cis pour les param√®tres de requ√™te (query parameters).\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ceci me permet d'optimiser le cache en assurant l'unicit√© des URLs pour une m√™me ressource. Cependant, cela peut ennuyer les d√©veloppeurs fronts qui n'aiment pas les APIs strictes. Pour plus d'info, vous pouvez jeter un ≈ìil √† \"}],[\"$\",\"$L16\",null,{\"href\":\"https://github.com/nfroidure/strict-qs\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"strict-qs\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\".\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'avantage de g√©n√©rer soit m√™me le code du client d'API front est que l'on peut g√©rer tout cela de mani√®re transparente pour les d√©veloppeurs front qui ne sont plus confront√©s √† des erreurs dues √† leur utilisation de l'API Rest.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Et si on s'amusait un peu?\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L16\",null,{\"href\":\"#et-si-on-s-amusait-un-peu\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"et-si-on-s-amusait-un-peu\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Bon, g√©n√©rer du code c'est plus cool que de l'√©crire. Mais pourquoi ne pas saisir l'occasion pour recycler une vielle id√©e¬†? Pourquoi ne pas cr√©er un nouveau genre de template¬†? J'ai d√©j√† explor√© la puissance des arbres AST avec \"}],[\"$\",\"$L16\",null,{\"href\":\"/en/blog/lets_subset_javascript\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"jsub\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" mais je voulais exp√©rimenter un autre concept bas√© l√† dessus que j'ai nomm√© template AST.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'id√©e est de cr√©er des templates pour g√©n√©rer des fichiers JavaScript mais qui sont eux-m√™me des fichiers JavaScript valides. De cette fa√ßon, les outils de linting, d'analyse de syntaxe et tous ceux qui sont habituellement compatibles avec du bon vieux JS fonctionnent.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"J'ai donc cr√©√© \"}],[\"$\",\"$L16\",null,{\"href\":\"https://github.com/nfroidure/asttpl\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"astpl\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" et je vous laisse voir le template de notre client d'API AngularJS avec cet \"}],[\"$\",\"$L16\",null,{\"href\":\"https://github.com/nfroidure/asttpl/blob/master/src/realworld.mocha.js#L82-L131\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"exemple\"}]]]}],[\"$\",\"span\",\"4\",{\"children\":\".\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Et voil√†¬†! J'esp√®re que je vous ai donn√© envie de g√©n√©rer vos client d'APIs et que mes quelques conseils vous √©viteront certains d√©boires ;).\"}]]}]],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Published at\",\" \",\"dimanche 19 f√©vrier 2017 √† 16:00:00\",\".\"]}]]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"share_root__Qm_RR\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Commenter et partager\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L16\",null,{\"href\":\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fgeneration_api_cliente\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Facebook\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_facebook__JKn8d\"}],\"Facebook\"]]}],\" - \",[\"$\",\"$L16\",null,{\"href\":\"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fgeneration_api_cliente\u0026text=G%C3%A9n%C3%A9ration%20automatique%20de%20clients%20d'APIs\u0026via=nfroidure\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Twitter\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 \"}],\"Twitter\"]]}],\" - \",[\"$\",\"$L16\",null,{\"href\":\"mailto:nicolas.froidure@gmail.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Me r√©pondre par mail\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_mail__yvBDK\"}],\"Courriel\"]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"page_linkedEntries__jiPuT\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Articles similaires\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Dans les cat√©gories\",\" \",\"JavaScript\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_entries__5hkLG\",\"children\":[[\"$\",\"div\",\"metapak\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//metapak\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"M√©ta-paquets NPM avec metapak\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Pr√©sentation sur metapak, un module d'aide √† la cr√©ation de m√©ta-paquets NPM.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//metapak\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"dimanche 5 f√©vrier 2017 √† 08:46:44\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"es6_dans_ton_code\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//es6_dans_ton_code\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"ES6 dans ton code\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Pr√©sentation sur les √©volutions apport√©es par la version 6 d'ECMAScript donn√©e √† l'occasion de ChtiJS.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//es6_dans_ton_code\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"mardi 12 mai 2015 √† 10:21:43\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"infrastructure_microservices\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L16\",null,{\"href\":\".//infrastructure_microservices\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Architecture d'une API NodeJS\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Pr√©sentation d'une architecture d'API REST r√©alis√©e avec des microservices.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L16\",null,{\"href\":\".//infrastructure_microservices\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"mardi 12 mai 2015 √† 10:21:43\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}]]}]]}]}]]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"content\":\"#3e78b2\"}],[\"$\",\"meta\",\"2\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"3\",{\"children\":\"G√©n√©ration automatique de clients d'APIs - Nicolas Froidure\"}],[\"$\",\"meta\",\"4\",{\"name\":\"description\",\"content\":\"Personne de devrait perdre du temps √† √©crire du code qui peut √™tre g√©n√©r√© automatiquement. Voici comment je m'y prends pour les clients d'APIs.\"}],[\"$\",\"link\",\"5\",{\"rel\":\"author\",\"href\":\"https://insertafter.com\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"link\",\"8\",{\"rel\":\"canonical\",\"href\":\"https://insertafter.com/fr/blog/generation_api_cliente\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:title\",\"content\":\"G√©n√©ration automatique de clients d'APIs - Nicolas Froidure\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:description\",\"content\":\"Personne de devrait perdre du temps √† √©crire du code qui peut √™tre g√©n√©r√© automatiquement. Voici comment je m'y prends pour les clients d'APIs.\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:url\",\"content\":\"https://insertafter.com/fr/blog/generation_api_cliente\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:site_name\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:locale\",\"content\":\"fr_FR\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:site\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:creator\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:title\",\"content\":\"G√©n√©ration automatique de clients d'APIs - Nicolas Froidure\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:description\",\"content\":\"Personne de devrait perdre du temps √† √©crire du code qui peut √™tre g√©n√©r√© automatiquement. Voici comment je m'y prends pour les clients d'APIs.\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"23\",{\"name\":\"twitter:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"icon\",\"href\":\"/images/favicon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"link\",\"25\",{\"rel\":\"icon\",\"href\":\"/images/favicon-16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"26\",{\"rel\":\"icon\",\"href\":\"/images/favicon-128.png\",\"type\":\"image/png\",\"sizes\":\"128x128\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>