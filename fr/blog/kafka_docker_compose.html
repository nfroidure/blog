<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo.svg"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/d8edca5e7193033b.css" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/93f5b1caf23b2daf.css" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/2b26a2222cb58ac3.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://insertafter.com/_next/static/chunks/webpack-0cf58a546aefb656.js"/><script src="https://insertafter.com/_next/static/chunks/4bd1b696-9839e50bf4426210.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/684-1da9a03c34d82cdf.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/main-app-da17a98a2bb76af6.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/874-f855e4232fadb1a1.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/layout-f7d50859cdd06b0e.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/96-3883dbab65ddc99f.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-876a21d30dbbc3af.js" async=""></script><meta name="theme-color" content="#3e78b2"/><title>Kafka avec docker-compose - Nicolas Froidure</title><meta name="description" content="Faire tourner Apache Kafka en local avec docker-compose."/><link rel="author" href="https://insertafter.com"/><meta name="author" content="Nicolas Froidure"/><meta name="robots" content="index, follow"/><link rel="canonical" href="https://insertafter.com/fr/blog/kafka_docker_compose"/><meta property="og:title" content="Kafka avec docker-compose - Nicolas Froidure"/><meta property="og:description" content="Faire tourner Apache Kafka en local avec docker-compose."/><meta property="og:url" content="https://insertafter.com/fr/blog/kafka_docker_compose"/><meta property="og:site_name" content="Nicolas Froidure"/><meta property="og:locale" content="fr_FR"/><meta property="og:image:alt" content="Banni√®re du site"/><meta property="og:image" content="https://insertafter.com/images/banner.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@nfroidure"/><meta name="twitter:creator" content="@nfroidure"/><meta name="twitter:title" content="Kafka avec docker-compose - Nicolas Froidure"/><meta name="twitter:description" content="Faire tourner Apache Kafka en local avec docker-compose."/><meta name="twitter:image:alt" content="Banni√®re du site"/><meta name="twitter:image" content="https://insertafter.com/images/banner.png"/><link rel="icon" href="/images/favicon.svg" type="image/svg+xml" sizes="any"/><link rel="icon" href="/images/favicon-16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/images/favicon-128.png" type="image/png" sizes="128x128"/><script src="https://insertafter.com/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="layout_body__jFZuu"><header class="header_iaHeader__4vCMA"><div><h1><a href="/fr" title="Retour √† l‚Äôaccueil" class="header_iaHeaderLogo__0uNr1"><img src="/images/logo.svg" alt="Logo d‚ÄôInsertAfter"/></a></h1></div></header><nav class="menu_iaMenu__B_rtj"><ul class="menu_iaMenuBody__0Zveq"><li class="menu_iaMenuItem__rOch4"><a href="/fr" title="Retour √† l‚Äôaccueil" class="">Accueil</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/blog" title="Retour √† l‚Äôindex du blog" class="">Blog</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/projets" title="D√©couvrir mes divers projets" class="">Projets</a></li><li class="menu_iaMenuItem__rOch4"><a href="/fr/a_propos" title="En savoir plus √† mon sujet" class="">√Ä propos</a></li></ul></nav><nav class="languages_iaLanguages__K2J3W"><ul><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagEn__angfJ languages_selected__w1dKv"><a href="/en/blog"><span>en</span></a></li><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagFr__Us5Jb"><a href="/fr/blog"><span>fr</span></a></li></ul></nav><main class="layout_iaMain__6s2gl"><div><section class="contentBlock_root__802UK"><h1 class="h1_root__VPXQG"><span>Apache Kafka en local avec docker-compose</span></h1><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><strong class="strong_root__kOzFq"><span>Note r√©trospective¬†:</span></strong></p><p class="p_root__SHE_W"><span>Cet article reste utile mais depuis que Kafka ne n√©cessite plus Zookeeper, il est possible de directement ex√©cuter Kafka via la commande </span><code class="code_root__5JLV_">docker run</code><span>.</span></p><div class="code_root__5JLV_"><code><pre>docker run -d --name kafka-server --hostname kafka-server \
  -e KAFKA_CFG_NODE_ID=0 \
  -e KAFKA_CFG_PROCESS_ROLES=controller,broker \
  -e KAFKA_CFG_LISTENERS=PLAINTEXT://:9092,CONTROLLER://:9093 \
  -e KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT \
  -e KAFKA_CFG_CONTROLLER_QUORUM_VOTERS=0@kafka-server:9093 \
  -e KAFKA_CFG_CONTROLLER_LISTENER_NAMES=CONTROLLER \
  bitnami/kafka:latest</pre></code></div><p class="p_root__SHE_W"><span>Le reste de l&#x27;article d√©crivant les interactions avec Kafka peuvent vous √™tre utile surtout si vous comptez l&#x27;int√©grer √† un </span><code class="code_root__5JLV_">docker-compose.yml</code><span> existant.</span></p><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><strong class="strong_root__kOzFq"><span>TL; DR:</span></strong></p><div class="code_root__5JLV_"><code><pre>curl -O https://gist.githubusercontent.com/nfroidure/720e83d6796a7c276f69ec8ad27fd7e9/raw/0bb69bbb8e8d97dd31f5b9dc3655fd6407910480/docker-compose.yml
docker-compose up</pre></code></div><p class="p_root__SHE_W"><span>La donn√©e devient le centre de toute innovation, au fil de mes exp√©riences professionnelles, il en est de plus en plus question. C&#x27;est donc naturellement que je me suis mis √† utiliser le message queuing puis le stream processing.</span></p><p class="p_root__SHE_W"><span>D&#x27;abord avec Kinesis par simplicit√©, mais ce syst√®me ne g√®re pas les topics et est propri√©taire ce qui est g√™nant pour rester cloud agnostique alors j&#x27;ai d√©cid√© de passer sous Kafka dans ma nouvelle aventure technologique chez DiagRAMS ;).</span></p><p class="p_root__SHE_W"><span>Le hic, c&#x27;est qu&#x27;il n&#x27;existe pas d&#x27;image Docker officielle, donc aucune documentation sur la fa√ßon de l&#x27;utiliser, d&#x27;o√π ce petit article qui vous aidera peut-√™tre √† √©viter de passer trop de temps sur votre setup en local.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Configurer docker-compose</span> <small><a class="anchored_icon__N5Sem" id="configurer-docker-compose" title="Lien vers cette section" href="#configurer-docker-compose"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Si, comme moi, vous ne jurez que par </span><code class="code_root__5JLV_">docker-compose</code><span> pour le dev en local, alors voici ma petite recette perso¬†!</span></p><p class="p_root__SHE_W"><span>Tout d&#x27;abord, j&#x27;ai choisi d&#x27;utiliser les images Docker de Bitnami √† d√©faut d&#x27;images officielles (n&#x27;h√©sitez pas √† proposer les votres en commentaire).</span></p><p class="p_root__SHE_W"><span>J&#x27;ai √©galement d√©clar√© explicitement le r√©seau que je souhaite utiliser et ceci pour deux raisons¬†:</span></p><ul class="ul_ul__qh0e9"><li class="li_root__oY9Dv"><p class="p_root__SHE_W"><span>je souhaite maitriser les plages IP utilis√©es par Docker afin d&#x27;√©viter les collisions avec mes VPC (ce qui m&#x27;a caus√© pas mal de fil √† retordre lors du setup de ma connexion VPN...),</span></p></li><li class="li_root__oY9Dv"><p class="p_root__SHE_W"><span>Apache Kafka utilise un syst√®me de diffusion des brokers et pour pouvoir s&#x27;y connecter en local, c&#x27;est mieux de connaitre l&#x27;adresse IP de ces derniers pour pouvoir les ins√©rer dans la variable d&#x27;environnement </span><code class="code_root__5JLV_">KAFKA_ADVERTISED_LISTENERS</code><span> pr√©vue √† cet effet.</span></p></li></ul><p class="p_root__SHE_W"><span>Le r√©sultat est le suivant¬†:</span></p><div class="gist_root__FwqUp"><iframe src="data:text/html;base64,PHNjcmlwdCBzcmM9Imh0dHBzOi8vZ2lzdC5naXRodWIuY29tL25mcm9pZHVyZS83MjBlODNkNjc5NmE3YzI3NmY2OWVjOGFkMjdmZDdlOS5qcyI+PC9zY3JpcHQ+"></iframe><noscript><div class="code_root__5JLV_"><code><pre># From the Gist: https://gist.github.com/nfroidure/720e83d6796a7c276f69ec8ad27fd7e9
version: &quot;3.5&quot;
networks:
  myapp:
    name: &quot;myapp&quot;
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 10.5.0.0/16
          ip_range: 10.5.0.0/24
          gateway: 10.5.0.1
          aux_addresses:
            kafka: 10.5.0.2
            zookeeper: 10.5.0.3
services:
# See:
# https://hub.docker.com/r/bitnami/zookeeper
zookeeper:
  image: &quot;bitnami/zookeeper:latest&quot;
  container_name: &quot;myapp-zookeeper&quot;
  networks:
    - &quot;myapp&quot;
  ports:
    - &quot;2181:2181&quot;
  environment:
    - ALLOW_ANONYMOUS_LOGIN=yes

# See:
# https://hub.docker.com/r/bitnami/kafka
kafka:
  image: bitnami/kafka:2.5.0
  container_name: &quot;myapp-kafka&quot;
  networks:
    - &quot;myapp&quot;
  ports:
    - &quot;9092:9092&quot;
  environment:
    - KAFKA_BROKER_ID=1
    - KAFKA_LISTENERS=PLAINTEXT://:9092
    - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://10.5.0.1:9092
    - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
    - ALLOW_PLAINTEXT_LISTENER=yes
  depends_on:
    - zookeeper</pre></code></div></noscript></div><p class="p_root__SHE_W"><span>Vous pouvez ajouter plus de brokers, il suffira alors d&#x27;adapter les variables d&#x27;environnement, mais en local, c&#x27;est rarement utile.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Se connecter avec Kafdrop</span> <small><a class="anchored_icon__N5Sem" id="se-connecter-avec-kafdrop" title="Lien vers cette section" href="#se-connecter-avec-kafdrop"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>On peut ajouter l&#x27;UI de Kafdrop directement au docker-compose, mais c&#x27;est quelque chose que j&#x27;√©vite pour ne pas avoir un environnement de d√©veloppement trop gourmand en RAM.</span></p><p class="p_root__SHE_W"><span>De plus, √ßa peut √™tre bien de pouvoir, s√©lectivement, d√©marrer Kafdrop pour le Kafka local, mais aussi pour voir ce qu&#x27;il se passe sur le Kafka de production.</span></p><p class="p_root__SHE_W"><span>Pour toutes ces raisons, et aussi car c&#x27;est plus √©cologique, je d√©marre directement Kafdrop quand j&#x27;en ai besoin via la ligne de commande¬†:</span></p><div class="code_root__5JLV_"><code><pre>docker run --rm -p 9000:9000 \
 -e KAFKA_BROKERCONNECT=&quot;10.5.0.1:9092&quot; \
 -e JVM_OPTS=&quot;-Xms32M -Xmx256M&quot; --network myapp \
 -e SERVER_SERVLET_CONTEXTPATH=&quot;/&quot; \
 obsidiandynamics/kafdrop:latest</pre></code></div><p class="p_root__SHE_W"><span>Notez bien le </span><code class="code_root__5JLV_">--network myapp</code><span> qui permet √† Kafdrop d&#x27;√™tre sur le m√™me r√©seau que le reste.</span></p><p class="p_root__SHE_W"><span>Je vous mets √©galement la commande pour la production car cette derni√®re est s√ªrement en SSL et vous devrez donc y ajouter un peu de config comme suit¬†:</span></p><div class="code_root__5JLV_"><code><pre>docker run --rm -p 9000:9000 \
 -e KAFKA_BROKERCONNECT=$(node -e &quot;process.stdout.write($(terraform output kafka_bootstrap_brokers))&quot;) \
 -e JVM_OPTS=&quot;-Xms128M -Xmx2G&quot; -e KAFKA_PROPERTIES=$(echo security.protocol=SSL | base64) \
 -e SERVER_SERVLET_CONTEXTPATH=&quot;/&quot; \
 obsidiandynamics/kafdrop:latest</pre></code></div><p class="p_root__SHE_W"><span>Comme vous pouvez le voir, je r√©cup√®re directement les brokers Kafka depuis mes states Terraform. Libre √† vous d&#x27;en faire autant ou de les mettre √† la main.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Utiliser les scripts Kafka</span> <small><a class="anchored_icon__N5Sem" id="utiliser-les-scripts-kafka" title="Lien vers cette section" href="#utiliser-les-scripts-kafka"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>En lisant la documentation de Kafka, vous devrez probablement utiliser les scripts mis √† disposition par Kafka, voici, par exemple, comment cr√©er un topic avec </span><code class="code_root__5JLV_">docker-compose</code><span>¬†:</span></p><div class="code_root__5JLV_"><code><pre>docker-compose exec kafka /opt/bitnami/kafka/bin/kafka-topics.sh \
 --create \
 --bootstrap-server localhost:9092 \
 --replication-factor 1 \
 --partitions 1 \
 --topic users</pre></code></div><p class="p_root__SHE_W"><span>La liste des commandes s&#x27;obtient facilement ainsi¬†:</span></p><div class="code_root__5JLV_"><code><pre>docker-compose exec kafka ls /opt/bitnami/kafka/bin</pre></code></div><p class="p_root__SHE_W"><span>Kafka est une technologie sympa, je pense qu&#x27;elle est en revanche mal comprise, ce n&#x27;est qu&#x27;un syst√®me de gestion d&#x27;√©v√®nements, pas l&#x27;alpha et l&#x27;omega de la gestion massive de donn√©es.</span></p><p class="p_root__SHE_W"><span>Enfin, en terme de documentation, tous les chemins m√®nent √† Confluent et je trouve cela regrettable qu&#x27;il n&#x27;y ait pas plus de documentation ind√©pendante, d&#x27;o√π cet article, car l&#x27;int√©r√™t d&#x27;utiliser du libre est limit√© si on depend d&#x27;un seul acteur cloud. Bref, j&#x27;attends vos retours d&#x27;exp√©rience √©galement ;).</span></p><p class="p_root__SHE_W">Published at<!-- --> <!-- -->jeudi 31 d√©cembre 2020 √† 14:07:32<!-- -->.</p></section><section class="contentBlock_root__802UK"><aside class="share_root__Qm_RR"><h2 class="h2_root__Y02lX">Commenter et partager</h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Commenter sur Facebook" target="_blank" href="https://www.facebook.com/dialog/share?display=popup&amp;href=https%3A%2F%2Finsertafter.com%2Fblog%2Fkafka_docker_compose&amp;redirect_uri=https%3A%2F%2Finsertafter.com"><span class="share_icon__bi4Q3 share_facebook__JKn8d"></span>Facebook</a> - <a class="a_root__WEPS7" title="Commenter sur Twitter" target="_blank" href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fkafka_docker_compose&amp;text=Kafka%20avec%20docker-compose&amp;via=nfroidure"><span class="share_icon__bi4Q3 "></span>Twitter</a> - <a class="a_root__WEPS7" title="Me r√©pondre par mail" target="_self" href="mailto:nicolas.froidure@gmail.com"><span class="share_icon__bi4Q3 share_mail__yvBDK"></span>Courriel</a></p></aside></section><section class="contentBlock_root__802UK"></section></div></main><aside class="social_iaSocial__kdR1x"><nav><ul><li><a href="https://mastodon.social/@nfroidure" rel="me" title="Me suivre sur Mastodon" class="social_iaSocialMastodon__MTF6o"><span>Mastodon</span></a></li><li><a href="https://bsky.app/profile/nfroidure.bsky.social" rel="me" title="Me suivre sur Bluesky" class="social_iaSocialBluesky__fKW6M"><span>Bluesky</span></a></li><li><a href="https://twitter.com/nfroidure" title="Me suivre sur Twitter" class="social_iaSocialTwitter__9nU6R"><span>Twitter</span></a></li><li><a href="https://github.com/nfroidure" title="Voir mes projets sur GitHub" class="social_iaSocialGithub__vcU5_"><span>GitHub</span></a></li><li><a href="https://www.npmjs.org/~nfroidure" title="Voir mon compte NPM" class="social_iaSocialNpm__6nku5"><span>NPM</span></a></li><li><a href="https://www.linkedin.com/in/nfroidure/" rel="me" title="Voir mon profil LinkedIn" class="social_iaSocialLinkedin__pWACO"><span>LinkedIn</span></a></li><li><a href="https://facebook.com/nicolas.froidure.douai" rel="me" title="Me suivre sur Facebook" class="social_iaSocialFacebook__w4wfH"><span>Facebook</span></a></li><li><a href="/fr/blog/index.atom" title="S‚Äôabonner au flux RSS" class="social_iaSocialFeed__gEQQ0"><span>Flux RSS</span></a></li></ul></nav></aside><footer class="footer_iaFooter__rhlnQ"><p class="footer_iaFooterContent__VZndF">¬© Nicolas Froidure 2012-<!-- -->2025</p></footer><script src="https://insertafter.com/_next/static/chunks/webpack-0cf58a546aefb656.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n6:I[9665,[],\"OutletBoundary\"]\n9:I[9665,[],\"ViewportBoundary\"]\nb:I[9665,[],\"MetadataBoundary\"]\nd:I[6614,[],\"\"]\n:HL[\"https://insertafter.com/_next/static/css/d8edca5e7193033b.css\",\"style\"]\n:HL[\"https://insertafter.com/_next/static/css/93f5b1caf23b2daf.css\",\"style\"]\n:HL[\"https://insertafter.com/_next/static/css/2b26a2222cb58ac3.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"2byf_F3pfdCEJ5l9bUm8H\",\"p\":\"https://insertafter.com\",\"c\":[\"\",\"fr\",\"blog\",\"kafka_docker_compose\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"(withLocale)\",{\"children\":[[\"locale\",\"fr\",\"d\"],{\"children\":[\"blog\",{\"children\":[[\"id\",\"kafka_docker_compose\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true]}]}],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"(withLocale)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:style\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:children:props:children:1:props:style\",\"children\":404}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:children:props:children:2:props:style\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:notFound:0:1:props:children:props:children:2:props:children:props:style\",\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"locale\",\"fr\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/d8edca5e7193033b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],\"$L4\"]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"kafka_docker_compose\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",\"$undefined\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/93f5b1caf23b2daf.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/2b26a2222cb58ac3.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"children\":[\"$L7\",\"$L8\",null]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"zNeaMBqCv2arTBn_Kvrb6\",{\"children\":[[\"$\",\"$L9\",null,{\"children\":\"$La\"}],null]}],[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:\"$Sreact.strict_mode\"\nf:I[8873,[\"874\",\"static/chunks/874-f855e4232fadb1a1.js\",\"322\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-f7d50859cdd06b0e.js\"],\"default\"]\n10:I[2489,[\"874\",\"static/chunks/874-f855e4232fadb1a1.js\",\"322\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-f7d50859cdd06b0e.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"$e\",null,{\"children\":[\"$\",\"html\",null,{\"lang\":\"fr\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_body__jFZuu\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"header_iaHeader__4vCMA\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr\",\"title\":\"Retour √† l‚Äôaccueil\",\"className\":\"header_iaHeaderLogo__0uNr1\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/logo.svg\",\"alt\":\"Logo d‚ÄôInsertAfter\"}]}]}]}]}],[\"$\",\"$Lf\",null,{\"locale\":\"fr\",\"dictionary\":{\"home\":{\"label\":\"Accueil\",\"title\":\"Retour √† l‚Äôaccueil\"},\"blog\":{\"label\":\"Blog\",\"title\":\"Retour √† l‚Äôindex du blog\"},\"projects\":{\"label\":\"Projets\",\"title\":\"D√©couvrir mes divers projets\"},\"about\":{\"label\":\"√Ä propos\",\"title\":\"En savoir plus √† mon sujet\"}}}],[\"$\",\"$L10\",null,{\"locale\":\"fr\"}],[\"$\",\"main\",null,{\"className\":\"layout_iaMain__6s2gl\",\"children\":[\"$\",\"div\",null,{\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$L11\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/93f5b1caf23b2daf.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}],[\"$\",\"aside\",null,{\"className\":\"social_iaSocial__kdR1x\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@nfroidure\",\"rel\":\"me\",\"title\":\"Me suivre sur Mastodon\",\"className\":\"social_iaSocialMastodon__MTF6o\",\"children\":[\"$\",\"span\",null,{\"children\":\"Mastodon\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://bsky.app/profile/nfroidure.bsky.social\",\"rel\":\"me\",\"title\":\"Me suivre sur Bluesky\",\"className\":\"social_iaSocialBluesky__fKW6M\",\"children\":[\"$\",\"span\",null,{\"children\":\"Bluesky\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://twitter.com/nfroidure\",\"title\":\"Me suivre sur Twitter\",\"className\":\"social_iaSocialTwitter__9nU6R\",\"children\":[\"$\",\"span\",null,{\"children\":\"Twitter\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/nfroidure\",\"title\":\"Voir mes projets sur GitHub\",\"className\":\"social_iaSocialGithub__vcU5_\",\"children\":[\"$\",\"span\",null,{\"children\":\"GitHub\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.org/~nfroidure\",\"title\":\"Voir mon compte NPM\",\"className\":\"social_iaSocialNpm__6nku5\",\"children\":[\"$\",\"span\",null,{\"children\":\"NPM\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/nfroidure/\",\"rel\":\"me\",\"title\":\"Voir mon profil LinkedIn\",\"className\":\"social_iaSocialLinkedin__pWACO\",\"children\":[\"$\",\"span\",null,{\"children\":\"LinkedIn\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://facebook.com/nicolas.froidure.douai\",\"rel\":\"me\",\"title\":\"Me suivre sur Facebook\",\"className\":\"social_iaSocialFacebook__w4wfH\",\"children\":[\"$\",\"span\",null,{\"children\":\"Facebook\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/fr/blog/index.atom\",\"title\":\"S‚Äôabonner au flux RSS\",\"className\":\"social_iaSocialFeed__gEQQ0\",\"children\":[\"$\",\"span\",null,{\"children\":\"Flux RSS\"}]}]}]]}]}]}],[\"$\",\"footer\",null,{\"className\":\"footer_iaFooter__rhlnQ\",\"children\":[\"$\",\"p\",null,{\"className\":\"footer_iaFooterContent__VZndF\",\"children\":[\"¬© Nicolas Froidure 2012-\",2025]}]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"11:[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"not-found_p__fvcGn\",\"children\":[[\"$\",\"img\",null,{\"className\":\"not-found_img__IT2jY\",\"src\":\"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif\",\"alt\":\"404.png\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":\"It seems that the page you look for doesn't exist.\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"content\":\"#3e78b2\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"12:I[6874,[\"874\",\"static/chunks/874-f855e4232fadb1a1.js\",\"96\",\"static/chunks/96-3883dbab65ddc99f.js\",\"852\",\"static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-876a21d30dbbc3af.js\"],\"\"]\n13:T40e,# From the Gist: https://gist.github.com/nfroidure/720e83d6796a7c276f69ec8ad27fd7e9\nversion: \"3.5\"\nnetworks:\n  myapp:\n    name: \"myapp\"\n    driver: bridge\n    ipam:\n      driver: default\n      config:\n        - subnet: 10.5.0.0/16\n          ip_range: 10.5.0.0/24\n          gateway: 10.5.0.1\n          aux_addresses:\n            kafka: 10.5.0.2\n            zookeeper: 10.5.0.3\nservices:\n# See:\n# https://hub.docker.com/r/bitnami/zookeeper\nzookeeper:\n  image: \"bitnami/zookeeper:latest\"\n  container_name: \"myapp-zookeeper\"\n  networks:\n    - \"myapp\"\n  ports:\n    - \"2181:2181\"\n  environment:\n    - ALLOW_ANONYMOUS_LOGIN=yes\n\n# See:\n# https://hub.docker.com/r/bitnami/kafka\nkafka:\n  image: bitnami/kafka:2.5.0\n  container_name: \"myapp-kafka\"\n  networks:\n    - \"myapp\"\n  ports:\n    - \"9092:9092\"\n  environment:\n    - KAFKA_BROKER_ID=1\n    - KAFKA_LISTENERS=PLAINTEXT://:9092\n    - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://10.5.0.1:9092\n    - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181\n    - ALLOW_PLAINTEXT_LISTENER=yes\n  depends_on:\n    - zookeeper"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[[\"$\",\"h1\",\"0\",{\"className\":\"h1_root__VPXQG\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Apache Kafka en local avec docker-compose\"}]]}],[\"$\",\"hr\",\"1\",{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",\"2\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"strong\",\"0\",{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Note r√©trospective¬†:\"}]]}]]}],[\"$\",\"p\",\"3\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Cet article reste utile mais depuis que Kafka ne n√©cessite plus Zookeeper, il est possible de directement ex√©cuter Kafka via la commande \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"docker run\"}],[\"$\",\"span\",\"2\",{\"children\":\".\"}]]}],[\"$\",\"div\",\"4\",{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"docker run -d --name kafka-server --hostname kafka-server \\\\\\n  -e KAFKA_CFG_NODE_ID=0 \\\\\\n  -e KAFKA_CFG_PROCESS_ROLES=controller,broker \\\\\\n  -e KAFKA_CFG_LISTENERS=PLAINTEXT://:9092,CONTROLLER://:9093 \\\\\\n  -e KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT \\\\\\n  -e KAFKA_CFG_CONTROLLER_QUORUM_VOTERS=0@kafka-server:9093 \\\\\\n  -e KAFKA_CFG_CONTROLLER_LISTENER_NAMES=CONTROLLER \\\\\\n  bitnami/kafka:latest\"}]}]}],[\"$\",\"p\",\"5\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le reste de l'article d√©crivant les interactions avec Kafka peuvent vous √™tre utile surtout si vous comptez l'int√©grer √† un \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"docker-compose.yml\"}],[\"$\",\"span\",\"2\",{\"children\":\" existant.\"}]]}],[\"$\",\"hr\",\"6\",{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",\"7\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"strong\",\"0\",{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"TL; DR:\"}]]}]]}],[\"$\",\"div\",\"8\",{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"curl -O https://gist.githubusercontent.com/nfroidure/720e83d6796a7c276f69ec8ad27fd7e9/raw/0bb69bbb8e8d97dd31f5b9dc3655fd6407910480/docker-compose.yml\\ndocker-compose up\"}]}]}],[\"$\",\"p\",\"9\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"La donn√©e devient le centre de toute innovation, au fil de mes exp√©riences professionnelles, il en est de plus en plus question. C'est donc naturellement que je me suis mis √† utiliser le message queuing puis le stream processing.\"}]]}],[\"$\",\"p\",\"10\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"D'abord avec Kinesis par simplicit√©, mais ce syst√®me ne g√®re pas les topics et est propri√©taire ce qui est g√™nant pour rester cloud agnostique alors j'ai d√©cid√© de passer sous Kafka dans ma nouvelle aventure technologique chez DiagRAMS ;).\"}]]}],[\"$\",\"p\",\"11\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le hic, c'est qu'il n'existe pas d'image Docker officielle, donc aucune documentation sur la fa√ßon de l'utiliser, d'o√π ce petit article qui vous aidera peut-√™tre √† √©viter de passer trop de temps sur votre setup en local.\"}]]}],[\"$\",\"h2\",\"12\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Configurer docker-compose\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#configurer-docker-compose\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"configurer-docker-compose\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"13\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Si, comme moi, vous ne jurez que par \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"docker-compose\"}],[\"$\",\"span\",\"2\",{\"children\":\" pour le dev en local, alors voici ma petite recette perso¬†!\"}]]}],[\"$\",\"p\",\"14\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Tout d'abord, j'ai choisi d'utiliser les images Docker de Bitnami √† d√©faut d'images officielles (n'h√©sitez pas √† proposer les votres en commentaire).\"}]]}],[\"$\",\"p\",\"15\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"J'ai √©galement d√©clar√© explicitement le r√©seau que je souhaite utiliser et ceci pour deux raisons¬†:\"}]]}],[\"$\",\"ul\",\"16\",{\"className\":\"ul_ul__qh0e9\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"li_root__oY9Dv\",\"children\":[[\"$\",\"p\",\"0\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"je souhaite maitriser les plages IP utilis√©es par Docker afin d'√©viter les collisions avec mes VPC (ce qui m'a caus√© pas mal de fil √† retordre lors du setup de ma connexion VPN...),\"}]]}]]}],[\"$\",\"li\",\"1\",{\"className\":\"li_root__oY9Dv\",\"children\":[[\"$\",\"p\",\"0\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Apache Kafka utilise un syst√®me de diffusion des brokers et pour pouvoir s'y connecter en local, c'est mieux de connaitre l'adresse IP de ces derniers pour pouvoir les ins√©rer dans la variable d'environnement \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"KAFKA_ADVERTISED_LISTENERS\"}],[\"$\",\"span\",\"2\",{\"children\":\" pr√©vue √† cet effet.\"}]]}]]}]]}],[\"$\",\"p\",\"17\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Le r√©sultat est le suivant¬†:\"}]]}],[\"$\",\"div\",\"18\",{\"className\":\"gist_root__FwqUp\",\"children\":[[\"$\",\"iframe\",null,{\"src\":\"data:text/html;base64,PHNjcmlwdCBzcmM9Imh0dHBzOi8vZ2lzdC5naXRodWIuY29tL25mcm9pZHVyZS83MjBlODNkNjc5NmE3YzI3NmY2OWVjOGFkMjdmZDdlOS5qcyI+PC9zY3JpcHQ+\"}],[\"$\",\"noscript\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"$13\"}]}]}]}]]}],[\"$\",\"p\",\"19\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Vous pouvez ajouter plus de brokers, il suffira alors d'adapter les variables d'environnement, mais en local, c'est rarement utile.\"}]]}],[\"$\",\"h2\",\"20\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Se connecter avec Kafdrop\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#se-connecter-avec-kafdrop\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"se-connecter-avec-kafdrop\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"21\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"On peut ajouter l'UI de Kafdrop directement au docker-compose, mais c'est quelque chose que j'√©vite pour ne pas avoir un environnement de d√©veloppement trop gourmand en RAM.\"}]]}],[\"$\",\"p\",\"22\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"De plus, √ßa peut √™tre bien de pouvoir, s√©lectivement, d√©marrer Kafdrop pour le Kafka local, mais aussi pour voir ce qu'il se passe sur le Kafka de production.\"}]]}],[\"$\",\"p\",\"23\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Pour toutes ces raisons, et aussi car c'est plus √©cologique, je d√©marre directement Kafdrop quand j'en ai besoin via la ligne de commande¬†:\"}]]}],[\"$\",\"div\",\"24\",{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"docker run --rm -p 9000:9000 \\\\\\n -e KAFKA_BROKERCONNECT=\\\"10.5.0.1:9092\\\" \\\\\\n -e JVM_OPTS=\\\"-Xms32M -Xmx256M\\\" --network myapp \\\\\\n -e SERVER_SERVLET_CONTEXTPATH=\\\"/\\\" \\\\\\n obsidiandynamics/kafdrop:latest\"}]}]}],[\"$\",\"p\",\"25\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Notez bien le \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"--network myapp\"}],[\"$\",\"span\",\"2\",{\"children\":\" qui permet √† Kafdrop d'√™tre sur le m√™me r√©seau que le reste.\"}]]}],[\"$\",\"p\",\"26\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Je vous mets √©galement la commande pour la production car cette derni√®re est s√ªrement en SSL et vous devrez donc y ajouter un peu de config comme suit¬†:\"}]]}],[\"$\",\"div\",\"27\",{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"docker run --rm -p 9000:9000 \\\\\\n -e KAFKA_BROKERCONNECT=$(node -e \\\"process.stdout.write($(terraform output kafka_bootstrap_brokers))\\\") \\\\\\n -e JVM_OPTS=\\\"-Xms128M -Xmx2G\\\" -e KAFKA_PROPERTIES=$(echo security.protocol=SSL | base64) \\\\\\n -e SERVER_SERVLET_CONTEXTPATH=\\\"/\\\" \\\\\\n obsidiandynamics/kafdrop:latest\"}]}]}],[\"$\",\"p\",\"28\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Comme vous pouvez le voir, je r√©cup√®re directement les brokers Kafka depuis mes states Terraform. Libre √† vous d'en faire autant ou de les mettre √† la main.\"}]]}],[\"$\",\"h2\",\"29\",{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Utiliser les scripts Kafka\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"#utiliser-les-scripts-kafka\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"utiliser-les-scripts-kafka\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",\"30\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"En lisant la documentation de Kafka, vous devrez probablement utiliser les scripts mis √† disposition par Kafka, voici, par exemple, comment cr√©er un topic avec \"}],[\"$\",\"code\",\"1\",{\"className\":\"code_root__5JLV_\",\"children\":\"docker-compose\"}],[\"$\",\"span\",\"2\",{\"children\":\"¬†:\"}]]}],[\"$\",\"div\",\"31\",{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"docker-compose exec kafka /opt/bitnami/kafka/bin/kafka-topics.sh \\\\\\n --create \\\\\\n --bootstrap-server localhost:9092 \\\\\\n --replication-factor 1 \\\\\\n --partitions 1 \\\\\\n --topic users\"}]}]}],[\"$\",\"p\",\"32\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"La liste des commandes s'obtient facilement ainsi¬†:\"}]]}],[\"$\",\"div\",\"33\",{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"docker-compose exec kafka ls /opt/bitnami/kafka/bin\"}]}]}],[\"$\",\"p\",\"34\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Kafka est une technologie sympa, je pense qu'elle est en revanche mal comprise, ce n'est qu'un syst√®me de gestion d'√©v√®nements, pas l'alpha et l'omega de la gestion massive de donn√©es.\"}]]}],[\"$\",\"p\",\"35\",{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Enfin, en terme de documentation, tous les chemins m√®nent √† Confluent et je trouve cela regrettable qu'il n'y ait pas plus de documentation ind√©pendante, d'o√π cet article, car l'int√©r√™t d'utiliser du libre est limit√© si on depend d'un seul acteur cloud. Bref, j'attends vos retours d'exp√©rience √©galement ;).\"}]]}]],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Published at\",\" \",\"jeudi 31 d√©cembre 2020 √† 14:07:32\",\".\"]}]]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"share_root__Qm_RR\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Commenter et partager\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"https://www.facebook.com/dialog/share?display=popup\u0026href=https%3A%2F%2Finsertafter.com%2Fblog%2Fkafka_docker_compose\u0026redirect_uri=https%3A%2F%2Finsertafter.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Facebook\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_facebook__JKn8d\"}],\"Facebook\"]]}],\" - \",[\"$\",\"$L12\",null,{\"href\":\"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fkafka_docker_compose\u0026text=Kafka%20avec%20docker-compose\u0026via=nfroidure\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Twitter\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 \"}],\"Twitter\"]]}],\" - \",[\"$\",\"$L12\",null,{\"href\":\"mailto:nicolas.froidure@gmail.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Me r√©pondre par mail\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_mail__yvBDK\"}],\"Courriel\"]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":null}]]\n"])</script><script>self.__next_f.push([1,"8:null\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"title\",\"0\",{\"children\":\"Kafka avec docker-compose - Nicolas Froidure\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Faire tourner Apache Kafka en local avec docker-compose.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"author\",\"href\":\"https://insertafter.com\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"link\",\"5\",{\"rel\":\"canonical\",\"href\":\"https://insertafter.com/fr/blog/kafka_docker_compose\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:title\",\"content\":\"Kafka avec docker-compose - Nicolas Froidure\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:description\",\"content\":\"Faire tourner Apache Kafka en local avec docker-compose.\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://insertafter.com/fr/blog/kafka_docker_compose\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"fr_FR\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:site\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:creator\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:title\",\"content\":\"Kafka avec docker-compose - Nicolas Froidure\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:description\",\"content\":\"Faire tourner Apache Kafka en local avec docker-compose.\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"link\",\"21\",{\"rel\":\"icon\",\"href\":\"/images/favicon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"link\",\"22\",{\"rel\":\"icon\",\"href\":\"/images/favicon-16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"23\",{\"rel\":\"icon\",\"href\":\"/images/favicon-128.png\",\"type\":\"image/png\",\"sizes\":\"128x128\"}]]\n"])</script></body></html>