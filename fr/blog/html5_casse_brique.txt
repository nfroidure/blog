3:I[5613,[],""]
6:I[1778,[],""]
4:["locale","fr","d"]
5:["id","html5_casse_brique","d"]
8:{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"}
9:{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"}
a:{"display":"inline-block"}
b:{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0}
0:["9fUASsqhclwKyXSiuGa9K",[[["",{"children":["(withLocale)",{"children":[["locale","fr","d"],{"children":["blog",{"children":[["id","html5_casse_brique","d"],{"children":["__PAGE__?{\"locale\":\"fr\",\"id\":\"html5_casse_brique\"}",{}]}]}]},"$undefined","$undefined",true]}]}],["",{"children":["(withLocale)",{"children":[["locale","fr","d"],{"children":["blog",{"children":[["id","html5_casse_brique","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children","blog","children","$5","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/c0794213978ef12b.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,"$L7",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/1f9f2e31c0c7b0ad.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$8","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$9","children":"404"}],["$","div",null,{"style":"$a","children":["$","h2",null,{"style":"$b","children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]],[null,"$Lc"]]]]
d:"$Sreact.strict_mode"
e:I[4630,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-6f34dfcd57f7d3e4.js"],""]
f:I[4341,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-6f34dfcd57f7d3e4.js"],""]
7:["$","$d",null,{"children":["$","html",null,{"lang":"fr","children":["$","body",null,{"className":"layout_body__jFZuu","children":[null,["$","header",null,{"className":"header_iaHeader__4vCMA","children":["$","div",null,{"className":"$undefined","children":["$","h1",null,{"children":["$","a",null,{"href":"/fr","title":"Retour à l’accueil","className":"header_iaHeaderLogo__0uNr1","children":["$","img",null,{"src":"/images/logo.svg","alt":"Logo d’InsertAfter"}]}]}]}]}],["$","$Le",null,{"locale":"fr","dictionary":{"home":{"label":"Accueil","title":"Retour à l’accueil"},"blog":{"label":"Blog","title":"Retour à l’index du blog"},"projects":{"label":"Projets","title":"Découvrir mes divers projets"},"about":{"label":"À propos","title":"En savoir plus à mon sujet"}}}],["$","$Lf",null,{"locale":"fr"}],["$","main",null,{"className":"layout_iaMain__6s2gl","children":["$","div",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(withLocale)","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$L10","notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/719d59f1b635ba1d.css","precedence":"next","crossOrigin":""}]],"styles":null}]}]}],["$","aside",null,{"className":"social_iaSocial__kdR1x","children":["$","nav",null,{"children":["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"href":"https://mastodon.social/@nfroidure","rel":"me","title":"Me suivre sur Mastodon","className":"social_iaSocialMastodon__MTF6o","children":["$","span",null,{"children":"Mastodon"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://bsky.app/profile/nfroidure.bsky.social","rel":"me","title":"Me suivre sur Bluesky","className":"social_iaSocialBluesky__fKW6M","children":["$","span",null,{"children":"Bluesky"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://twitter.com/nfroidure","title":"Me suivre sur Twitter","className":"social_iaSocialTwitter__9nU6R","children":["$","span",null,{"children":"Twitter"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://github.com/nfroidure","title":"Voir mes projets sur GitHub","className":"social_iaSocialGithub__vcU5_","children":["$","span",null,{"children":"GitHub"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.npmjs.org/~nfroidure","title":"Voir mon compte NPM","className":"social_iaSocialNpm__6nku5","children":["$","span",null,{"children":"NPM"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.linkedin.com/in/nfroidure/","rel":"me","title":"Voir mon profil LinkedIn","className":"social_iaSocialLinkedin__pWACO","children":["$","span",null,{"children":"LinkedIn"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://facebook.com/nicolas.froidure.douai","rel":"me","title":"Me suivre sur Facebook","className":"social_iaSocialFacebook__w4wfH","children":["$","span",null,{"children":"Facebook"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"/fr/blog/index.atom","title":"S’abonner au flux RSS","className":"social_iaSocialFeed__gEQQ0","children":["$","span",null,{"children":"Flux RSS"}]}]}]]}]}]}],["$","footer",null,{"className":"footer_iaFooter__rhlnQ","children":["$","p",null,{"className":"footer_iaFooterContent__VZndF","children":["© Nicolas Froidure 2012-",2024]}]}]]}]}]}]
10:["$","section",null,{"className":"contentBlock_root__802UK","children":[["$","h1",null,{"className":"h1_root__VPXQG","children":"Page not found"}],["$","p",null,{"className":"not-found_p__fvcGn","children":[["$","img",null,{"className":"not-found_img__IT2jY","src":"https://media.giphy.com/media/12mPcp41D9a1i0/giphy.gif","alt":"404.png"}],["$","p",null,{"className":"p_root__SHE_W","children":"It seems that the page you look for doesn't exist."}]]}]]}]
11:I[5250,["176","static/chunks/176-0a03be62efe5672b.js","876","static/chunks/876-4c07c683293830f5.js","798","static/chunks/app/(withLocale)/%5Blocale%5D/blog/%5Bid%5D/page-8c92e4ed1884a050.js"],""]
2:[["$","section",null,{"className":"contentBlock_root__802UK","children":[[["$","h1",null,{"className":"h1_root__VPXQG","children":[["$","span","0",{"children":"Jeux HTML5 : Développement d'un casse brique"}]]}],["$","hr",null,{"className":"hr_root__iMEe9"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"⚠ Attention: Cet article est ancien et ne correspond pas à l'état de l'art de la création de casse briques pour le navigateur."}]]}],["$","hr",null,{"className":"hr_root__iMEe9"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Créer un jeu en HTML5 est simple. Cependant, il faut respecter quelques bonnes pratiques pour éviter que cela tourne au cauchemar."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Suite à mon précédent article sur l'amélioration d'un casse brique, j'ai discuté avec Jonathan Kowalski, l'auteur initial des prémices du jeu. Il a très gentiment accepté de passer le jeu sous Licence GNU/GPL de façon à ce que chacun puisse le modifier à sa guise. De cette façon, le jeu que vous allez créer ici sera utilisable comme point de départ d'un véritable jeu avec différents niveaux ou un look à votre guise."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Diagramme des classes"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#diagramme-des-classes","className":"anchored_icon__N5Sem","id":"diagramme-des-classes","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","div","7",{"children":["$","span",null,{"className":"img_root__vTZoG img_landscape__qBqfT","children":[["$","span",null,{"className":"img_picture__pfsl0","children":["$","img",null,{"alt":"Diagramme de classes du Casse Brique","src":"/illustrations/classesdiagram-breakit.png"}]}],null]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Notre application sera composée de 4 objets :"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"l'objet "}],["$","code",null,{"className":"code_root__5JLV_","children":"Game"}],["$","span","2",{"children":" qui se chargera de gérer la boucle de jeu, la création du canvas et la génération des murs à détruire,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"l'objet "}],["$","code",null,{"className":"code_root__5JLV_","children":"Ball"}],["$","span","2",{"children":" qui se chargera de gérer la position de la balle, son dessin sur le Canvas, son rebondissement et son interaction avec les autres éléments du jeu,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"l'objet "}],["$","code",null,{"className":"code_root__5JLV_","children":"Bar"}],["$","span","2",{"children":" qui permettra le dessin de la barre sur le canvas, la gestion de ses déplacement et la collision avec la balle,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"l'objet "}],["$","code",null,{"className":"code_root__5JLV_","children":"Brick"}],["$","span","2",{"children":" qui se chargera du dessin des briques et de la collision avec la balle."}]]}]]}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Enfin, il y a un dépôt existant, mais je vais le réinitialiser et tout reprendre étape par étape afin que vous puissiez suivre ce tutoriel en suivant les modifications faîtes grâce à Git. Pour obtenir le dépôt tel qu'il est au début du tuto :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ mkdir CasseBrique && cd CasseBrique\nnfroidure:~/ git clone git@github.com:nfroidure/CasseBriques.git .\nnfroidure:~/ git checkout [84162a4c2fa6ece151e80031c1e76af25e508835](https://github.com/nfroidure/CasseBriques/commit/84162a4c2fa6ece151e80031c1e76af25e508835 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"A noter aussi, le casse brique était initialement développé avec l'aide de JQuery, je vais plutôt utiliser Mootools qui est plus adapté à la POO et que je maitrise mieux. De plus, je souhaite intégrer ce petit jeu dans une de mes applications comme \"goodies\" pour un de mes clients."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Voilà, vous êtes prêt. Je vais détailler la programmation de chaque ligne de code, mais avant de commencer, petit retour sur `canvas``, l’élément qui permet le dessin de formes et autres graphismes."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Canvas : L'élément central"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#canvas-l-element-central","className":"anchored_icon__N5Sem","id":"canvas-l-element-central","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Créer un jeu vidéo en HTML5 commence souvent par la création d'un élément Canvas. En effet, cet élément permet d'afficher des graphismes grâce à l'utilisation de fonctions de l'API Javascript qui lui sont associées. Les fonctions diffèrent en fonction du contexte, puisque notre casse brique est en 2D, ce sera donc le paradigme de la 2D que nous utiliserons. Vous trouverez un tutorial complet sur le "}],["$","$L11",null,{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Canvas%5FAPI/Tutorial","className":"a_root__WEPS7","title":"Lire la suite","target":"_blank","children":[null,[["$","span","0",{"children":"fonctionnement de Canvas"}]]]}],["$","span","2",{"children":" sur le Mozilla Developer Network. Il est très important de comprendre le fonctionnement de Canvas pour bien comprendre ce tutoriel."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"L'objet Game : Création"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#l-objet-game-creation","className":"anchored_icon__N5Sem","id":"l-objet-game-creation","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Le premier objet qu'il faut créer est l'objet Game, c'est lui qui sera instancié pour commencer une partie de casse brique. Afin de rendre le jeu le plus souple possible, nous allons nous imposer une contrainte : il doit être possible de créer un jeu casse brique en fournissant uniquement à Game l'élément HTML chargé de recueillir le jeu. D'ailleurs, nous allons nous arranger pour que dans l'absolu, il soit possible de créer plusieurs instances du casse brique dans la même page web."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"De cette contrainte, on peut tout de suite déduire quel sera le constructeur de l'objet Game :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [07e4ed976eba295c8bd0e6d9032c1ca6474717c6](https://github.com/nfroidure/CasseBriques/commit/07e4ed976eba295c8bd0e6d9032c1ca6474717c6 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Dans le fichier "}],["$","code",null,{"className":"code_root__5JLV_","children":"index.html"}],["$","span","2",{"children":", ajoutons un code de détection des éléments ayant la classe "}],["$","code",null,{"className":"code_root__5JLV_","children":"CasseBrique"}],["$","span","4",{"children":" et passons le premier trouvé à un object Game nouvellement créé :"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [fbd961660abf136103d84a93aacbeb4d7d734795](https://github.com/nfroidure/CasseBriques/commit/fbd961660abf136103d84a93aacbeb4d7d734795 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","$L11",null,{"href":"http://htmlpreview.github.io/?https://github.com/nfroidure/CasseBriques/07e4ed976eba295c8bd0e6d9032c1ca6474717c6/index.html","className":"a_root__WEPS7","title":"Voir le résultat du commit","target":"_blank","children":[null,[["$","span","0",{"children":"La détection se fait bien"}]]]}],["$","span","1",{"children":", nous allons pouvoir créer un élément "}],["$","code",null,{"className":"code_root__5JLV_","children":"canvas"}],["$","span","3",{"children":" et l'insérer dans l'élément détecté. Pour ce faire, on récupère la taille de l'élément reçu et on l'assigne au canvas. Ensuite, on détecte si l'API de Canvas est bien présente et on ajoute l'élément, sinon, on affiche un message d'erreur."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [fbd961660abf136103d84a93aacbeb4d7d734795b](https://github.com/nfroidure/CasseBriques/commit/fbd961660abf136103d84a93aacbeb4d7d734795 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"On a donc maintenant un canvas en état de marche. Vous remarquerez la présence d'une propriété nommée "}],["$","code",null,{"className":"code_root__5JLV_","children":"aspectRatio"}],["$","span","2",{"children":". Cette dernière va nous servir pour déterminer la taille des différents objets du Canvas pour qu'elle soit adaptée à la place disponible dans l'élément transmis."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Création de la barre et de la balle"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#creation-de-la-barre-et-de-la-balle","className":"anchored_icon__N5Sem","id":"creation-de-la-barre-et-de-la-balle","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Commençons par dessiner la balle et la barre. Pour chacun d'eux, nous allons créer une classe avec comme propriétés la position et les dimensions de l'objet et deux méthodes, une pour dessiner l'objet à sa position actuelle ("}],["$","code",null,{"className":"code_root__5JLV_","children":"draw"}],["$","span","2",{"children":"), une autre pour l'effacer ("}],["$","code",null,{"className":"code_root__5JLV_","children":"clear"}],["$","span","4",{"children":"). Nous allons passer à chaque objet du canvas une référence à l'objet game afin que ces objets puissent s'y référer."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Pour la barre, nous souhaitons dessiner un rectangle. Heureusement, l'élément Canvas dispose de la fonction "}],["$","code",null,{"className":"code_root__5JLV_","children":"fillRect"}],["$","span","2",{"children":". Au début du jeu, nous positionnerons la barre au centre."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [dbea5701e152b7ac36cae867735568d5ae0c6261](https://github.com/nfroidure/CasseBriques/commit/dbea5701e152b7ac36cae867735568d5ae0c6261 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"En ce qui concerne la balle, la classe est similaire à ceci près que nous n'avons pas une largeur et une longueur, mais un rayon. La fonction de dessin est également différente puisqu'ici nous utilisons les fonctions de dessin pour obtenir un cercle. La fonction de positionnement est également différente puisque la position de la balle est relative à celle de la barre."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [8ffcdb2815fc23fcc0fdfcb98a1a589be02af8bf](https://github.com/nfroidure/CasseBriques/commit/8ffcdb2815fc23fcc0fdfcb98a1a589be02af8bf \"Voir le diff de ce commit\")"}]}]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Déplacement de la balle et création de la boucle de jeu"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#deplacement-de-la-balle-et-creation-de-la-boucle-de-jeu","className":"anchored_icon__N5Sem","id":"deplacement-de-la-balle-et-creation-de-la-boucle-de-jeu","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Nous avons déjà "}],["$","$L11",null,{"href":"http://htmlpreview.github.io/?https://github.com/CasseBriques/8ffcdb2815fc23fcc0fdfcb98a1a589be02af8bf/index.html","className":"a_root__WEPS7","title":"Voir le résultats des commits précédents","target":"_blank","children":[null,[["$","span","0",{"children":"deux éléments affichés"}]]]}],["$","span","2",{"children":", maintenant, nous allons animer un peu tout ça. La première chose à faire est de créer une boucle de jeu. Certains utilisent la fonction setInterval à cette fin, je lui préfère la fonction setTimeout. En effet, setTimeout répété plusieurs fois permet de ne pas demander le re-dessin des objets sur le canvas tant que le dessin précédent n'a pas été fait."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"De ce fait, si l'on utilise le jeu sur de petits appareils peu performants, on aura moins de difficultés à jouer, le jeu sera juste un peu ralenti. Ca tombe bien, mon objectif est que ce jeu marche aussi sur les mobiles. MooTools utilise la fonction "}],["$","code",null,{"className":"code_root__5JLV_","children":"delay"}],["$","span","2",{"children":" pour effectuer une action après "}],["$","code",null,{"className":"code_root__5JLV_","children":"n"}],["$","span","4",{"children":" millisecondes d'attente. Garder une référence à ce délai dans la propriété timer nous permettra de mettre fin à la boucle principale en temps voulu."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [efd8c071e8fc6f552640befb2ee12cca8a3d7492](https://github.com/nfroidure/CasseBriques/commit/efd8c071e8fc6f552640befb2ee12cca8a3d7492 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"On a donc notre balle qui est dessinée toutes les 5 millisecondes. Pour la faire bouger, nous allons lui donner une vitesse ("}],["$","code",null,{"className":"code_root__5JLV_","children":"speed"}],["$","span","2",{"children":"), une direction ("}],["$","code",null,{"className":"code_root__5JLV_","children":"angle"}],["$","span","4",{"children":") et ajouter une méthode ("}],["$","code",null,{"className":"code_root__5JLV_","children":"move"}],["$","span","6",{"children":") permettant de lui demander de bouger. Notre boucle principale n'aura alors qu'à appeler la fonction move pour permettre à la balle de s'afficher à chaque fois à une position différente."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Vous remarquerez que nous avons adapté la vitesse à la taille du canvas grâce à la propriété aspect ratio. La vitesse de la balle sera ainsi constante quelle que soit la taille de l'élément dans lequel se déroule le jeu."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [2f6e0b5ace29711707c58c601fbc6cfcfb362a17](https://github.com/nfroidure/CasseBriques/commit/2f6e0b5ace29711707c58c601fbc6cfcfb362a17 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Maintenant, nous devons nous assurer que la balle ne sortira pas du canvas. Pour cela, nous avons déjà préparé le terrain. En effet, dans la fonction move, deux variables sont créées pour stocker temporairement les nouvelles coordonnées. Nous allons donc procéder à divers tests et dévier la balle si les nouvelles coordonnées sont en dehors des limites du jeu, de cette façon, au prochain calcul, la balle "}],["$","$L11",null,{"href":"http://htmlpreview.github.io/?https://github.com/CasseBriques/b738ec5d0167afc29caaf07ca9ec3e71296fe5f3/index.html","className":"a_root__WEPS7","title":"Voir le commit en action","target":"_blank","children":[null,[["$","span","0",{"children":"n'ira plus hors des limites du jeu"}]]]}],["$","span","2",{"children":"."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [b738ec5d0167afc29caaf07ca9ec3e71296fe5f3](https://github.com/nfroidure/CasseBriques/commit/b738ec5d0167afc29caaf07ca9ec3e71296fe5f3 \"Voir le diff de ce commit\")"}]}]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Mouvement de la barre et collision"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#mouvement-de-la-barre-et-collision","className":"anchored_icon__N5Sem","id":"mouvement-de-la-barre-et-collision","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Il faut maintenant permettre à l'utilisateur de faire se déplacer la barre. Pour cela, nous allons suivre le mouvement de la souris. Puisque la barre n'est amenée à être dessinée que quand la souris est bougée, nous allons directement gérer l'évènement et le dessin de la barre au sein de l'objet lui même."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [52e2f453b89e928b13416744a109edb1ce93b25e](https://github.com/nfroidure/CasseBriques/commit/52e2f453b89e928b13416744a109edb1ce93b25e \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Enfin, nous allons gérer la collision de la balle avec la barre. Nous allons faire ceci au sein de l'objet ball puisque la fonction move s'y prête parfaitement. En plus de la collision, nous allons dévier l'angle du rebond en fonction de la position sur la barre."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [5f9309603275df07c3214a97c870ecfa40510f7c](https://github.com/nfroidure/CasseBriques/commit/5f9309603275df07c3214a97c870ecfa40510f7c \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Enfin, nous allons permettre à la barre d'"}],["$","$L11",null,{"href":"http://htmlpreview.github.io/?https://github.com/CasseBriques/fcf6249a93119e4de4b4b38d774fbbd9ed54c5e7/index.html","className":"a_root__WEPS7","title":"Voir le commit","target":"_blank","children":[null,[["$","span","0",{"children":"emmener la balle dans son sillon"}]]]}],["$","span","2",{"children":" quand sa vitesse est nulle, c'est à dire, au début du jeu."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Génération des briques et collision"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#generation-des-briques-et-collision","className":"anchored_icon__N5Sem","id":"generation-des-briques-et-collision","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Nous allons créer un objet brique permettant de dessiner et gérer les collisions avec une brique. Le dessin reprend simplement ce que nous avons vu pour la barre. La fonction de collision ("}],["$","code",null,{"className":"code_root__5JLV_","children":"hit"}],["$","span","2",{"children":") permet, en passant en paramètre des coordonnées et un rayon de retourner une valeur permettant de savoir si il y a eu collision et de quels côtés de la brique. Cette valeur de retour utilise une technique de "}],["$","$L11",null,{"href":"https://fr.wikipedia.org/wiki/Manipulation%5Fde%5Fbit","className":"a_root__WEPS7","title":"En savoir plus","target":"_blank","children":[null,[["$","span","0",{"children":"bit bashing"}]]]}],["$","span","4",{"children":" très connue dans le monde Unix. Ici, grâce à un seul entier, on symbolise un nombre importants de combinaisons de valeurs différentes."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [5336331b048af72cdd1ee3e84afa0bbbdda0a207](https://github.com/nfroidure/CasseBriques/commit/5336331b048af72cdd1ee3e84afa0bbbdda0a207 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Maintenant que l'objet brique est créé, nous allons créer une fonction pour les générer au sein de l'objet Game ("}],["$","code",null,{"className":"code_root__5JLV_","children":"populate"}],["$","span","2",{"children":") afin de "}],["$","$L11",null,{"href":"http://htmlpreview.github.io/?https://github.com/nfroidure/CasseBriques/7f3ed8d067d53fe39816c74aabc66621bee5276d/index.html","className":"a_root__WEPS7","title":"Voir le commit de la création du mur","target":"_blank","children":[null,[["$","span","0",{"children":"former le mur"}]]]}],["$","span","4",{"children":"."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [7f3ed8d067d53fe39816c74aabc66621bee5276d](https://github.com/nfroidure/CasseBriques/commit/7f3ed8d067d53fe39816c74aabc66621bee5276d \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Intéressons nous aux collisions balle briques. Notre fonction "}],["$","code",null,{"className":"code_root__5JLV_","children":"Brick.hit"}],["$","span","2",{"children":" retourne un entier indiquant les côtés de la brique ayant subis la collision. Nous allons donc executer cette fonction pour toutes les briques successivement, supprimer les briques et agglomérer les résultats de toutes les collisions grâce à l'opérateur binaire "}],["$","code",null,{"className":"code_root__5JLV_","children":"|"}],["$","span","4",{"children":" (ou inclusif). Cela se passe toujours dans l'objet "}],["$","code",null,{"className":"code_root__5JLV_","children":"ball"}],["$","span","6",{"children":" et sa fonction "}],["$","code",null,{"className":"code_root__5JLV_","children":"move"}],["$","span","8",{"children":" qui s'y prête bien. Enfin, grâce à l'opérateur binaire "}],["$","code",null,{"className":"code_root__5JLV_","children":"&"}],["$","span","10",{"children":", nous sommes en mesure de déterminer quel est le résultat de cette agglomération et changer l'angle de la balle en conséquence. Nous allons aussi ajouter à la fonction "}],["$","code",null,{"className":"code_root__5JLV_","children":"remove"}],["$","span","12",{"children":" de l'objet "}],["$","code",null,{"className":"code_root__5JLV_","children":"Brick"}],["$","span","14",{"children":" une ligne pour retirer une brique détruite du tableau bricks de l'objet "}],["$","code",null,{"className":"code_root__5JLV_","children":"Game"}],["$","span","16",{"children":"."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [b3ed8c550a2cf8948c838b09aa62c772e34e9381](https://github.com/nfroidure/CasseBriques/commit/b3ed8c550a2cf8948c838b09aa62c772e34e9381 \"Voir le diff de ce commit\")"}]}]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Bouclage du jeu"}]]," ",["$","small",null,{"children":["$","$L11",null,{"href":"#bouclage-du-jeu","className":"anchored_icon__N5Sem","id":"bouclage-du-jeu","title":"Lien vers cette section","children":["$","span",null,{"children":"🔗"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Voilà, nous y sommes quasiment, il reste à permettre de continuer de jouer lorsque la balle est tombée puis à régénérer le mur lorsque ce dernier est complètement détruit."}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"nfroidure:~/ git checkout [9f6794c154cabc0d9f03ca0e4349027f21c79b81](https://github.com/nfroidure/CasseBriques/commit/9f6794c154cabc0d9f03ca0e4349027f21c79b81 \"Voir le diff de ce commit\")"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Et voilà, nous avons "}],["$","$L11",null,{"href":"http://breakit.insertafter.com/index.html","className":"a_root__WEPS7","title":"Voir le jeu dans sa version actuelle","target":"_blank","children":[null,[["$","span","0",{"children":"un jeu sommaire"}]]]}],["$","span","2",{"children":" mais très facilement personnalisable ou augmentable le tout sous licence GNU/GPL. Les collisions mériteraient d'être améliorées pour être plus naturelles, mais pour cela, il faudrait que je me penche plus sérieusement dessus, peut-être que ce sera le sujet d'un autre billet. Y'a plus qu'à continuer le projet pour les plus braves :d."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"PS : L'aventure continue avec l'ajout du "}],["$","$L11",null,{"href":"./request_animation_frame","className":"a_root__WEPS7","title":"Voir le billet sur le support de requestAnimationFrame","target":"_self","children":[null,[["$","span","0",{"children":"support de "}],["$","code",null,{"className":"code_root__5JLV_","children":"requestAnimationFrame"}]]]}],["$","span","2",{"children":"."}]]}]],["$","p",null,{"className":"p_root__SHE_W","children":["Published at"," ","vendredi 11 mai 2012 à 10:51:19","."]}]]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"share_root__Qm_RR","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Commenter et partager"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","$L11",null,{"href":"https://www.facebook.com/dialog/share?display=popup&href=https%3A%2F%2Finsertafter.com%2Fblog%2Fhtml5_casse_brique&redirect_uri=https%3A%2F%2Finsertafter.com","className":"a_root__WEPS7","title":"Commenter sur Facebook","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_facebook__JKn8d"}],"Facebook"]]}]," - ",["$","$L11",null,{"href":"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fhtml5_casse_brique&text=Jeux%20HTML5%C2%A0%3A%20D%C3%A9veloppement%20d'un%20casse%20brique&via=nfroidure","className":"a_root__WEPS7","title":"Commenter sur Twitter","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 "}],"Twitter"]]}]," - ",["$","$L11",null,{"href":"mailto:nicolas.froidure@gmail.com","className":"a_root__WEPS7","title":"Me répondre par mail","target":"_self","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_mail__yvBDK"}],"Courriel"]]}]]}]]}]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"page_linkedEntries__jiPuT","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Articles similaires"}],["$","p",null,{"className":"p_root__SHE_W","children":["Dans les catégories"," ","Jeux HTML5","."]}],["$","div",null,{"className":"items_entries__5hkLG","children":[["$","div","ameliration_casse_brique",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//ameliration_casse_brique","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Amélioration d'un casse brique"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["J'ai cliqué via Twitter sur un lien vers un casse brique en développement. Il avait des problèmes de performance étonnants. J'y ai mis mon grain de sel."," ",["$","br",null,{}],["$","$L11",null,{"href":".//ameliration_casse_brique","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","mardi 8 mai 2012 à 20:09:31","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","jeux_html5_sympas",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//jeux_html5_sympas","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Quelques jeux HTML5 sympas"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Dans mes recherches pour tenter de trouver la meilleure formule pour créer des jeux HTML5 addictifs et de bonne qualité, j'ai trouvé plusieurs jeux aux finitions plus qu'acceptables. Découvrez-les !"," ",["$","br",null,{}],["$","$L11",null,{"href":".//jeux_html5_sympas","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","dimanche 27 janvier 2013 à 13:03:52","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","hackaton_microsoft",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$L11",null,{"href":".//hackaton_microsoft","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Hackathon Windows Phone 8"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Depuis que Windows 8 gère le HTML5, je me suis un peu plus rapproché de la communauté Microsoft grâce notamment à un développeur de mon coin. Petit retour sur ce hackathon."," ",["$","br",null,{}],["$","$L11",null,{"href":".//hackaton_microsoft","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","mardi 25 décembre 2012 à 21:11:57","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}]]}]]}]}]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"name":"theme-color","content":"#3e78b2"}],["$","meta","2",{"charSet":"utf-8"}],["$","title","3",{"children":"Jeux HTML5 : Développement d'un casse brique - Nicolas Froidure"}],["$","meta","4",{"name":"description","content":"Créer un jeu en HTML5 est simple. Cependant, il faut respecter quelques bonnes pratiques pour éviter que cela tourne au cauchemar."}],["$","link","5",{"rel":"author","href":"https://insertafter.com"}],["$","meta","6",{"name":"author","content":"Nicolas Froidure"}],["$","meta","7",{"name":"robots","content":"index, follow"}],["$","link","8",{"rel":"canonical","href":"https://insertafter.com/fr/blog/html5_casse_brique"}],["$","meta","9",{"property":"og:title","content":"Jeux HTML5 : Développement d'un casse brique - Nicolas Froidure"}],["$","meta","10",{"property":"og:description","content":"Créer un jeu en HTML5 est simple. Cependant, il faut respecter quelques bonnes pratiques pour éviter que cela tourne au cauchemar."}],["$","meta","11",{"property":"og:url","content":"https://insertafter.com/fr/blog/html5_casse_brique"}],["$","meta","12",{"property":"og:site_name","content":"Nicolas Froidure"}],["$","meta","13",{"property":"og:locale","content":"fr_FR"}],["$","meta","14",{"property":"og:image:alt","content":"Bannière du site"}],["$","meta","15",{"property":"og:image","content":"https://insertafter.com/images/banner.png"}],["$","meta","16",{"property":"og:type","content":"article"}],["$","meta","17",{"name":"twitter:card","content":"summary"}],["$","meta","18",{"name":"twitter:site","content":"@nfroidure"}],["$","meta","19",{"name":"twitter:creator","content":"@nfroidure"}],["$","meta","20",{"name":"twitter:title","content":"Jeux HTML5 : Développement d'un casse brique - Nicolas Froidure"}],["$","meta","21",{"name":"twitter:description","content":"Créer un jeu en HTML5 est simple. Cependant, il faut respecter quelques bonnes pratiques pour éviter que cela tourne au cauchemar."}],["$","meta","22",{"name":"twitter:image:alt","content":"Bannière du site"}],["$","meta","23",{"name":"twitter:image","content":"https://insertafter.com/images/banner.png"}],["$","link","24",{"rel":"icon","href":"/images/favicon.svg","type":"image/svg+xml","sizes":"any"}],["$","link","25",{"rel":"icon","href":"/images/favicon-16.png","type":"image/png","sizes":"16x16"}],["$","link","26",{"rel":"icon","href":"/images/favicon-128.png","type":"image/png","sizes":"128x128"}]]
1:null
