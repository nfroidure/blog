<!--VarStream
title=Performance des sites web avec SVG
description=SVG est de plus en plus supporté par les navigateurs. Cela peut nous amener à reconsidérer nos choix en ce qui concerne la performance du front-end. Petit tour d'horizon des plus de ce format.
shortTitle=Performance et SVG
shortDesc=En savoir plus sur les avantages de SVG pour la performance
published=2013-01-13T21:09:05.000Z
lang=fr
location=FR
keywords.+=SVG
keywords.+=Performances
categories.+=.*
disqus=true
-->

<h2>Performance des sites web avec SVG</h2>
<p>
  SVG est de plus en plus supporté par les navigateurs. Cela peut nous amener à
  reconsidérer nos choix en ce qui concerne la performance du front-end. Petit
  tour d&#039;horizon des plus de ce format.
</p>

<p>
  J&#039;utilise SVG depuis assez longtemps grâce à l&#039;<a
    title="Télécharger Inkscape"
    href="https://inkscape.org"
    >éditeur libre Inkscape</a
  >. Ce dernier me permet de créer de petites icônes, les logos de mes projets
  et le design de mes sites web persos (comme ce blog). Je suis l&#039;adoption
  de SVG par les navigateurs de loin grâce à un petit test simple, je fais un
  glisser-déposer de mes designs SVG dans le navigateur et je regarde si
  c&#039;est tout cassé ou pas.
</p>
<p>
  Force est de constater que ça ne l&#039;est plus et que SVG devient de plus en
  plus crédible pour la création d&#039;illustrations pour les sites web. Voici
  quelques retours d&#039;expérience et quelques trucs pour exploiter SVG à
  fond.
</p>
<h3>SVG&#0160;: Qu&#039;est-ce que c&#039;est&#0160;?</h3>
<p>
  SVG, Scalable Vector Graphics est un format de dessin vectoriel. Tout est dans
  le mot vectoriel. En définissant les images par leurs formes plutôt que par
  une succession de pixels, SVG permet de rendre une image adaptable à toutes
  les définitions. En effet, là où une image JPG ou PNG n&#039;est adaptée
  qu&#039;à une seule taille d&#039;affichage, une image SVG peut être
  redimensionnée sans perte de qualité.
</p>
<p>
  C&#039;est pour cette raison que j&#039;utilise ce format depuis longtemps, il
  permet de créer des images qui puissent être réutilisées dans d&#039;autres
  contextes, tailles ou formats. Par exemple, pour la création de maquettes de
  sites responsive, c&#039;est une très bonne option.
</p>
<h3>SVG améliore la qualité des sites</h3>
<p>
  Un des premiers arguments en faveur de SVG est qu&#039;il permet
  d&#039;améliorer significativement la qualité des illustrations. On parle
  beaucoup des écrans Rétina, l&#039;avantage de SVG est qu&#039;il n&#039;est
  pas nécessaire d&#039;agir pour exploiter au maximum ces derniers.
</p>
<p>
  De plus, la propriété vectorielle de SVG fait que les nouvelles possibilités
  de CSS3 peuvent être exploitées au maximum. Un exemple simple, la propriété
  <a
    title="En savoir plus sur cette propriété"
    href="https://developer.mozilla.org/fr/docs/CSS/background-size"
    >background-size</a
  >. Celle-ci permet de spécifier la taille du fond. Permettant de
  redimensionner l&#039;image de fond selon vos souhaits. Et qui dit
  redimensionnement, dit SVG&#0160;!
</p>
<p>
  En particulier pour la valeur cover de cette propriété qui permet de
  d&#039;adapter la taille du fond à la taille de l&#039;élément. Par exemple,
  dans le cas de mon dernier petit jeu,
  <a
    hreflang="en"
    title="Visiter le site de Sumuraÿ"
    href="http://sumuray.insertafter.com/"
    >Sumuraÿ</a
  >, j&#039;ai utilisé cette propriété pour avoir un fond qui soit complètement
  recouvert par cette
  <a
    title="Voir l&#039;image en question"
    href="http://sumuray.insertafter.com/www/images/samurai.svg"
    >petite image SVG</a
  >. Si j&#039;avais utilisé un image JPEG à la place, cette dernière aurait dû
  être suffisamment grande pour pouvoir couvrir le fond de la page sans que
  l&#039;on puisse percevoir les pixels de cette dernière. De plus, utiliser le
  format PNG aurait été trop lourd, l&#039;usage de JPG, format destructif se
  serait imposé. Cette image SVG au format JPEG a un poids de 160.3ko. Au format
  SVG, cette dernière ne fait que 45.9ko.
</p>
<h3>Et les sprites&#0160;?</h3>
<p>
  A terme il semble qu&#039;il sera possible de créer des feuilles de sprite en
  SVG grâce à un hash déterminant une vue sur le SVG. Par exemple, avec
  l&#039;<a
    title="Voir un vue de l&#039;image"
    href="http://sumuray.insertafter.com/images/samurai.svg&#35;svgView(viewBox(600,800,200,250))"
    >image précédente</a
  >. Bon, pour être tout à fait honnête, à l&#039;heure actuelle le support de
  cette astuce est un peu bancal et j&#039;ai renoncé à le faire avec Sumuraÿ,
  mais cela promet. N&#039;hésitez pas à laisser un commentaire si vous avez mis
  cette astuce en oeuvre avec succès.
</p>
<p>
  <a title="Voir son profil Twitter" href="https://twitter.com/_kud"
    >&#64;_kud</a
  >
  me souffle sur Twitter que les sprites SVG via les polices perso, c&#039;est
  bien aussi (même si c&#039;est pas encore top sur certains navigateurs).
</p>
<h3>A savoir</h3>
<p>
  A première vue, la performance n&#039;était pas au rendez-vous. Mon fichier
  sumuray.svg faisait 1.7Mo&#0160;! En effet, j&#039;avais dupliqué les feuilles
  et les arbres avec Ctrl + D plutôt que d&#039;utiliser la fonction de clonage
  (qui n&#039;est pas mise en avant dans le menu contextuel d&#039;Inkscape) Alt
  + D, qui elle permet de faire une nouvelle référence à un groupe d&#039;objet.
</p>
<p>
  Un détail qui change tout pour une image qui réutilise plusieurs fois la même
  forme dans des orientations ou dimensions différentes. D&#039;après mes
  comparatifs, il semble que le clonage n&#039;apporte pas de gain dans
  l&#039;affichage des SVG, mais cela pourrait être le cas par la suite.
</p>
<h3>SVG est du texte</h3>
<p>
  Un autre avantage de SVG est que c&#039;est du texte et qu&#039;il est donc
  possible d&#039;utiliser gzip pour compresser les ressources avant de les
  envoyer aux clients ce qui peut représenter un gain significatif de
  performances.
</p>
<h3>SVG est rendu à la volée</h3>
<p>
  Petit édition du lendemain pour mentionner un oubli. Les images SVG ont la
  même nature que le HTML et comme ce dernier, les images SVG sont rendues par
  le navigateur parallèlement à leur téléchargement. Cela signifie qu&#039;une
  image de grande taille peut se dessiner progressivement et commencer à être
  consultée avant la fin de son chargement.
</p>
<p>
  Cela peut-être très utile pour les comics SVG par exemple, on peut commencer à
  lire une planche avant son chargement complet. Il suffit juste de
  s&#039;assurer que la source XML contient bien les vignettes de la planche
  dans leur ordre naturel.
</p>
<h3>Can i use SVG&#0160;?</h3>
<p>
  La question fatidique est&#0160;:
  <a
    hreflang="en"
    title="Voir les navigateurs qui supportent SVG"
    href="http://caniuse.com/svg"
    >puis-je utiliser SVG&#0160;?</a
  >
  Seul, non. En effet, IE 7 et 8 ne le supportent pas. Pour Sumuraÿ, je
  n&#039;ai pas cherché la compatibilité IE 7, 8 et 9. Mais dans la vraie vie,
  pour des sites web, c&#039;est rarement possible. En revanche, rien ne vous
  interdit de balancer du SVG pour les navigateurs qui le supportent et
  d&#039;utiliser des JPG/PNG pour les vieux navigateurs.
</p>
<p>
  De toute façon, utiliser SVG pour créer vos images est une bonne pratique.
  C&#039;est un format libre qui sera sûrement de plus en plus populaire et
  utilisable tel quel sur les sites web. Pourquoi s&#039;en priver&#0160;?
</p>
<p>
  Si vous êtes intéressé par le format SVG, je vous propose d&#039;aller faire
  un petit tour sur le
  <a
    title="Voir ses articles à propos de SVG sur son blog"
    href="http://jeremie.patonnier.net/tag/SVG"
    >blog de Jéremie Patonnier</a
  >
  qui est l&#039;une des personnes les plus calées sur le domaine en France.
</p>
