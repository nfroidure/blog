<!--VarStream
title=Faut-il utiliser les polyfills ?
description=Tout à chacun est tenté d'utiliser HTML5 pour créer des applications sympa expérimentant le champs des possibles. Malheureusement, HTML5 n'est pas supporté par tous les navigateurs. C'est alors que se pose la question des polyfills.
shortTitle=Polyfills HTML5
shortDesc=En savoir plus sur l'intérêt des polyfills
published=2012-10-21T07:23:29.000Z
lang=fr
location=FR
keywords.+=JavaScript
keywords.+=HTML5
keywords.+=Polyfills
categories.+=.*
disqus=true
-->

<h2>Faut-il utiliser les polyfills ?</h2>
<p>
  Tout à chacun est tenté d&#039;utiliser HTML5 pour créer des applications
  sympa expérimentant le champs des possibles. Malheureusement, HTML5 n&#039;est
  pas supporté par tous les navigateurs. C&#039;est alors que se pose la
  question des polyfills.
</p>

<p>
  Ce billet est basé sur une réflexion de fond qui a été réactivée hier à
  ParisWeb lors de l&#039;atelier de
  <a title="Voir son profil Twitter" href="https://twitter.com/schillinger"
    >Corinne Schillinger</a
  >
  et
  <a title="Voir son profil Twitter" href="https://twitter.com/JeremiePat"
    >Jérémie Patonnier</a
  >
  intitulé
  <a
    title="Voir la fiche de l&#039;atelier"
    href="http://www.paris-web.fr/2012/ateliers/html5css3-et-leffet-waouh-les-dessous-de-la-magie.php"
    >HTML5 / CSS3 et l&#039;effet &#034;Waouh !&#034; : les dessous de la magie</a
  >. Commençons par présenter les polyfills.
</p>
<h3 lang="en">Polyfills : HTML5 where you want</h3>
<p>
  L&#039;idée qui se cache dérrière les polyfills est de combler un manque dans
  un navigateur : un élément (audio, vidéo), une
  <abbr title="Application Programming Interface">API</abbr> (websockets) ou
  encore, des fonctionnalités
  <abbr title="Cascading Style Sheets 3" lang="en">CSS3</abbr>. Techniquement,
  cela passe par l&#039;insertion d&#039;un script Javascript qui se charge de
  détecter la ou les fonctionnalités manquantes.
  <a
    hreflang="en"
    title="Visiter HTML5Please.com"
    href="http://html5please.com/"
    >Un bon site</a
  >
  donné par les intervenants lors de l&#039;atelier permet de savoir ce qui peut
  être utilisé et où.
</p>
<p>
  Ainsi grâce aux polyfills, en théorie, l&#039;expérience
  <abbr title="Hyper Text Markup Language" lang="en">HTML5</abbr> peut être
  délivrée à tous les utilisateurs Internet Explorer 7 et 8 compris. Mais vous
  vous en doutez, tout n&#039;est pas si rose.
</p>
<h3>Dans polyfill, il y a fill</h3>
<p>
  C&#039;est le principal reproche que je fais aux polyfills. En effet, ce sont
  des fichiers javascript et leur multiplication peut-être extrêmement coûteuse
  en terme de bande passante, mais également en terme de temps d&#039;exécution.
  Or, la multiplication de ces derniers est en totale contradiction avec les
  principaux concepts de performance web. D&#039;autant plus que la plupart des
  polyfills ont des dépendances avec des frameworks Javascript qui eux-mêmes
  représentent un coût important.
</p>
<p>
  Le type de matériel utilisé par les utilisateurs d&#039;IE7 (<abbr
    title="Personnal Computer"
    lang="en"
    >PC</abbr
  >
  viellissant) et la mauvaise qualité du moteur Javascript font que ces derniers
  ont une expérience peut-être identique visuellement, mais fortement dégradée
  et ralentie. Le résultat est qu&#039;on se retrouve avec une expérience
  utilisateur complètement bancale et les utilisateurs d&#039;IE7 qu&#039;on
  souhaite récupérer bouderont purement et simplement l&#039;application sans
  savoir que c&#039;est à cause de leur navigateur que l&#039;application est
  trop lente.
</p>
<p>
  Bref, les polyfills peuvent nuire à leur propres objectifs surtout
  lorsqu&#039;on les multiplie.
</p>
<h3>Que faire ?</h3>
<h4>Pour les applications web</h4>
<p>
  Je fais parti de ceux qui pensent qu&#039;utiliser les polyfills pour la
  création d&#039;applications web est un non-sens. En effet, on récupère plus
  de la moitié des utilisateurs potentiels sur desktop et la majorité des
  utilisateurs sur mobile sans les utiliser. De plus, c&#039;est dans le cadre
  d&#039;une application web que les polyfills se multiplient car ces dernières
  utilisent souvent de nombreuses fonctionnalités différentes.
</p>
<p>
  Je crée des applications web pour des entreprises et dire que HTML5 sur IE7
  n&#039;est pas vraiment HTML5 est parfaitement compris surtout lorsqu&#039;on
  expose les faits. Attendre 5 minutes qu&#039;une application se charge, quand
  100 employés l&#039;utilisent 5 fois par jour, c&#039;est 100 x 5 / 60= 8
  heures par jour d&#039;attente soit, en fonction du type d&#039;utilisateur,
  un SMIC ou plus (voire bien plus pour des cadres sup) jeté par les fenêtres
  par jour. Dans quelle boîte on paie une personne pour attendre ?
</p>
<p>
  A cela on ajoute le coût d&#039;une adaptation à IE7, variable mais non
  négligeable, on se retrouve au final avec deux choix : télécharger un nouveau
  navigateur gratuitement ou alors garder un navigateur qui va induire des coûts
  insoupçonnablement élévés.
</p>
<h4>Pour les sites web</h4>
<p>
  Clairement, je fais des sites web en XHTML 1.1 Strict. Je n&#039;ai pas cédé
  aux appels du pied d&#039;HTML5 pour une raison simple : aujourd&#039;hui,
  dans le cadre d&#039;un site vitrinne ou e-commerce classique, HTML5 (au sens
  balises et API) ne m&#039;apporterai pas grand chose de plus. Si je décidai
  d&#039;utiliser les balises sémantiques, ce serait une catastrophe pour les
  utilisateurs d&#039;IE7 à moins d&#039;utiliser des polyfills qui
  dégraderaient les performances et donc l&#039;efficacité de mes sites.
</p>
<p>
  Ce n&#039;est pas le cas de CSS3 qui peut arrondir les angles (au sens propre
  comme au sens figuré ;-D ), mais la dégradation gracieuse est mon amie. Si les
  utilisateurs d&#039;IE7 n&#039;ont pas de coins arrondis, d&#039;ombres ou
  d&#039;animations, ce n&#039;est pas un drame.
</p>
<p>
  D&#039;ailleurs je fais parti de ceux qui pensent que les animations,
  c&#039;est en CSS3 ou rien. En effet, les animations JQuery ou Mootools sur
  IE7, c&#039;est juste inneficace. Cela entrave l&#039;accès à
  l&#039;information, les animations sont généralement saccadées, bref, ne vous
  prenez pas la tête à vouloir faire sur un vieux navigateur tournant sur un
  vieux PC ce que vous faîtes bien sur un navigateur moderne tournant sur un PC
  moderne.
</p>
<p>
  Faire cela reviendrait à installer Window 7 sur un pentium des années 90.
  D&#039;ailleurs, je voudrais tordre le coup à l&#039;idée reçue que la seule
  façon de tester sur IE7 est de le faire dans une
  <abbr title="Virtual Machine" lang="en">VM</abbr> : faux ! Et c&#039;est
  peut-être de là que viens le problème.
</p>
<p>
  Une VM sans programmes pourris installés (anti-virus, malwares), sans
  programme en cours d&#039;éxecution (client mail, office, etc) et tournant sur
  une bête de compétition avec processeur multi-coeurs et disque SSD n&#039;est
  pas représentatif. La seule bonne façon de tester sur IE7, c&#039;est de
  tester sur une machine qui correspond à l&#039;époque où les utilisateurs
  avaient IE7 quand ils achetaient leur ordinateur et une machine qui est
  vraiment utilisée par des vrais gens. C&#039;est bien-sûr pas souvent possible
  facilement, mais il faut bien en avoir conscience.
</p>
<p>
  Bref, je pense que les polyfills peuvent et doivent être utilisés dans
  certains cas particuliers, mais ils ne sont pas la solution miracle, loin de
  là et il faut faire preuve de discernement dans leur utilisation.
</p>
