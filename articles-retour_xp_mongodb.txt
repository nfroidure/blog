4:I[5613,[],""]
5:I[1778,[],""]
6:{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"}
7:{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"}
8:{"display":"inline-block"}
9:{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0}
0:["eGoFGgzscUww2tdIFetZ7",[[["",{"children":["(withRedirects)",{"children":[["locale","articles-retour_xp_mongodb","d"],{"children":["__PAGE__?{\"locale\":\"articles-retour_xp_mongodb\"}",{}]},"$undefined","$undefined",true]}]}],["",{"children":["(withRedirects)",{"children":[["locale","articles-retour_xp_mongodb","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},[null,"$L3",null]]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","(withRedirects)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/5ec738391fa14b60.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$6","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$7","children":"404"}],["$","div",null,{"style":"$8","children":["$","h2",null,{"style":"$9","children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]],[null,"$La"]]]]
b:"$Sreact.strict_mode"
c:I[4630,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-6ef0055cc1d3b7f9.js"],""]
d:I[4341,["176","static/chunks/176-0a03be62efe5672b.js","960","static/chunks/app/(withLocale)/%5Blocale%5D/layout-6ef0055cc1d3b7f9.js"],""]
e:["locale","articles-retour_xp_mongodb","d"]
3:["$","$b",null,{"children":["$","html",null,{"lang":"articles-retour_xp_mongodb","children":["$","body",null,{"className":"layout_body__jFZuu","children":[null,["$","header",null,{"className":"header_iaHeader__4vCMA","children":["$","div",null,{"className":"$undefined","children":["$","h1",null,{"children":["$","a",null,{"href":"/articles-retour_xp_mongodb","title":"Go back to home page","className":"header_iaHeaderLogo__0uNr1","children":["$","img",null,{"src":"/images/logo.svg","alt":"InsertAfter's Logo"}]}]}]}]}],["$","$Lc",null,{"locale":"articles-retour_xp_mongodb","dictionary":{"home":{"label":"Home","title":"Go back to home page"},"blog":{"label":"Blog","title":"Read my blog posts"},"projects":{"label":"Projects","title":"Discover my projects"},"about":{"label":"About me","title":"Read more about me"}}}],["$","$Ld",null,{"locale":"articles-retour_xp_mongodb"}],["$","main",null,{"className":"layout_iaMain__6s2gl","children":["$","div",null,{"children":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","(withRedirects)","children","$e","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"https://insertafter.com/_next/static/css/0e0406f763173a7d.css","precedence":"next","crossOrigin":""}]]}]}]}],["$","aside",null,{"className":"social_iaSocial__kdR1x","children":["$","nav",null,{"children":["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"href":"https://mastodon.social/@nfroidure","rel":"me","title":"Follow me on Mastodon","className":"social_iaSocialMastodon__MTF6o","children":["$","span",null,{"children":"Mastodon"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://bsky.app/profile/nfroidure.bsky.social","rel":"me","title":"Follow me on Bluesky","className":"social_iaSocialBluesky__fKW6M","children":["$","span",null,{"children":"Bluesky"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://twitter.com/nfroidure","title":"Follow me on Twitter","className":"social_iaSocialTwitter__9nU6R","children":["$","span",null,{"children":"Twitter"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://github.com/nfroidure","title":"See my GitHub projects","className":"social_iaSocialGithub__vcU5_","children":["$","span",null,{"children":"GitHub"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.npmjs.org/~nfroidure","title":"Check my NPM modules","className":"social_iaSocialNpm__6nku5","children":["$","span",null,{"children":"NPM"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://www.linkedin.com/in/nfroidure/","rel":"me","title":"See my LinkedIn profile","className":"social_iaSocialLinkedin__pWACO","children":["$","span",null,{"children":"LinkedIn"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"https://facebook.com/nicolas.froidure.douai","rel":"me","title":"Follow me on Facebook","className":"social_iaSocialFacebook__w4wfH","children":["$","span",null,{"children":"Facebook"}]}]}],["$","li",null,{"children":["$","a",null,{"href":"/articles-retour_xp_mongodb/blog/index.atom","title":"Subscribe to my RSS feed","className":"social_iaSocialFeed__gEQQ0","children":["$","span",null,{"children":"RSS Feed"}]}]}]]}]}]}],["$","footer",null,{"className":"footer_iaFooter__rhlnQ","children":["$","p",null,{"className":"footer_iaFooterContent__VZndF","children":["¬© Nicolas Froidure 2012-",2024]}]}]]}]}]}]
f:I[5250,["176","static/chunks/176-0a03be62efe5672b.js","876","static/chunks/876-4c07c683293830f5.js","238","static/chunks/app/(withRedirects)/%5Blocale%5D/page-da2f415b8392d700.js"],""]
2:[["$","section",null,{"className":"contentBlock_root__802UK","children":[[["$","h1",null,{"className":"h1_root__VPXQG","children":[["$","span","0",{"children":"MongoDB: Retour d'exp√©rience"}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","strong",null,{"className":"strong_root__kOzFq","children":[["$","span","0",{"children":"Comme avec toute technologie ¬´ nouvelle ¬ª, j'√©tais extr√™mement r√©serv√© quand √† l'essor du NoSQL et son int√©r√™t dans le cadre de mon quotidien de d√©veloppeur full-stack. J'ai fini par m'y mettre par obligation professionnelle. Je ne pense pas en avoir fait le tour pour le moment, mon avis est donc √† prendre avec pr√©caution, mais je le livre comme un point de d√©part d'un d√©bat qui sera je l'esp√®re constructif."}]]}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"MongoDB vs MySQL"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#mongodb-vs-mysql","className":"anchored_icon__N5Sem","id":"mongodb-vs-mysql","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"La grande partie de mon exp√©rience avec les bases de donn√©es s'est construite autour de MySQL. Je pense ne pas √™tre le seul dans ce cas. C'est donc via le prisme d'un utilisateur avanc√© de MySQL que j'orienterai ce billet."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Pour illustrer les diff√©rences entre bases de donn√©es relationnelles et MongoDB, je vais partir d'un sch√©ma de base de donn√©es simple et montrer comment selon moi, il faudrait le mod√©liser dans chacune d'entre elles."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Cas concret: Un marketplace"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#cas-concret-un-marketplace","className":"anchored_icon__N5Sem","id":"cas-concret-un-marketplace","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"J'ai choisi le cas concret d'une place de march√© car c'est selon moi celui qui mettra le plus en exergue les diff√©rences de conception SQL et NoSQL."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Une place de march√© est finalement assez simple. Nous avons des concepts que l'on retrouve dans √† peu pr√®s toutes les applications¬†:"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"des utilisateurs (employ√©s des clients ou vendeurs de la place de march√©),"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"des organisations (entreprises ou autres formes juridiques),"}]]}]]}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"On retrouve √©galement des concepts propres aux places de march√©¬†:"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"des produits (√† divers prix selon les pays),"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"des commandes,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"des factures,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"des livraisons,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"des commentaires sur les produits."}]]}]]}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Je simplifie, ici, volontairement la chose pour complexifier par it√©rations successives."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Mod√®le pour bases de donn√©es relationnelles"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#modele-pour-bases-de-donnees-relationnelles","className":"anchored_icon__N5Sem","id":"modele-pour-bases-de-donnees-relationnelles","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Typiquement, ce type d'architecture sera mod√©lis√©e comme suit¬†:"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"User(id, name, organisations[]:Organisation, home:Place, phone:Contact, mail:Contact, country:<Country>)\nOrganisation(id, name, owner:User.id, place:Place, country:<Country>)\nPlace(id, address, lat, lng)\nContact(id, type, value)\nCountry(id, name)\n\nProduct(id, reference, name, organisation:Organisation)\nPrice(id, amount, product:Product, country:Country)\nComment(id, content, parent:Comment, author:User, product:Product)\nDelivery(id, date, place:Place, recipient:User, bill:Bill)\nDeliveryRow(id, quantity, product:Product)\nBill(id, date, seller:Organisation, buyer:Organisation)\nBillRow(id, quantity, product:Product, price)"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Comme vous pouvez le constater, nous avons cr√©√© bien plus de concepts que ceux √©num√©r√©s au d√©part. La raison est simple¬†: la d√©-duplication et la lin√©arisation. Quand on mod√©lise une base de donn√©es relationnelle, on met un point d'honneur √† √©viter les doublons. On essaie √©galement de faire entrer une structure de donn√©e arborescente dans un ensemble de tables interconnect√©es entre elles."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"On essaie donc d'isoler un maximum de concepts enfants et on cr√©e autant de cases que n√©cessaire pour les englober tout en d√©crivant leurs relations √† l'aide de cl√©s √©trang√®res."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Autre avantage des bases de donn√©es relationnelles, les cl√©s √©trang√®res et le typage fort des divers champs de la base. La d√©claration explicite des relations et des types permet √† la base de donn√©es d'assurer un forte int√©grit√© des donn√©es qu'elle stocke. Les transactions permettent √©galement d'effectuer plusieurs op√©rations jusqu'√† l'obtention d'une √©tat int√®gre. Ceci permet de conserver encore une fois l'int√©grit√© des donn√©es en cas d'√©chec d'une de ces modifications."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Ces avantages ont cependant un co√ªt. En effet, il est n√©cessaire de maintenir un √©tat global et de le propager entre toutes les instances du serveur de base de donn√©es. C'est pourquoi les bases de donn√©es relationnelles fonctionnent sur un sch√©ma ma√Ætre/esclave."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Ainsi, d√®s lors que l'on est confront√© √† une utilisation intense de la base de donn√©es, on constate une d√©gradation des performances et la n√©cessit√© de faire appel √† un DBA et/ou √† un Administrateur Syst√®me pour maintenir tant bien que mal ces performances et la disponibilit√© du syst√®me."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"En revanche, un atout fort de la mod√©lisation relationnelle est qu'une mod√©lisation bien r√©alis√©e n'est pas cens√©e √©voluer au cours du temps sauf √©largissement du domaine de l'application. Avec les bases de donn√©es relationnelles, on d√©crit une structure repr√©sentant l'essence m√™me des donn√©es et on l'exploite ensuite sans m√™me se soucier (ou presque) de son int√©grit√©."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Ceci rend l'√©volution du produit simple et fluide puisqu'√† chaque nouvelle demande de fonctionnalit√©, on n'intervient que tr√®s peu sur le sch√©ma de la base de donn√©es. Ceci, au prix d'une concession assum√©e¬†: l'over-head des calculs et v√©rifications qui permettent √† la base de donn√©es de pr√©server son int√©grit√© et de la difficult√© de rendre une telle architecture scalable."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Mod√©lisation NoSQL avec MongoDB"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#modelisation-nosql-avec-mongodb","className":"anchored_icon__N5Sem","id":"modelisation-nosql-avec-mongodb","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"C'est justement pour r√©pondre √† ces probl√®mes de scalabilit√© que MongoDB a √©t√© con√ßu. En effet, pour permettre une scalabilit√© horizontale, de nombreux principes propres aux bases de donn√©es relationnelles ont √©t√© volontairement √©cart√©s, nous y reviendrons."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Les transactions, les cl√©s √©trang√®res, les cl√©s uniques auto-incr√©ment√©es sont donc absentes. En sus, le mode de stockage des donn√©es est √©galement revu. L√† o√π les bases de donn√©es relationnelles utilisent un mode de stockage par lignes et colonnes de taille g√©n√©ralement fixe, les bases de donn√©es telles que MongoDB proposent un stockage dans un document sans contraintes (sauf sa taille, nous le verrons apr√®s) bien souvent au format JSON autorisant un contenu arborescent (avec en th√©orie avec une infinit√© de niveaux)."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"L'utilisation d'une base de donn√©e NoSQL m√®ne g√©n√©ralement √† une conception bien diff√©rente¬†:"}]]}],["$","div",null,{"className":"code_root__5JLV_","children":["$","code",null,{"children":["$","pre",null,{"children":"Organisation {\n  name: String,\n  place: {\n    address: String,\n    latitude: Number,\n    longitude: Number\n  },\n  users: [{\n    id: ObjectId,\n    name: String,\n    home: {\n      address: String,\n      latitude: Number,\n      longitude: Number\n    },\n    phone: String,\n    mail: String,\n    country: String,\n    owner: Boolean\n  }]\n}\n\nProduct {\n  id: ObjectId,\n  reference: String,\n  name: String,\n  organisation_id: ObjectId,\n  prices: [{\n    id: ObjectId,\n    amount: Number,\n    country: String\n  }],\n  comments: [{\n    id: ObjectId,\n    content: String,\n    author: ObjectId,\n    parents_ids: [ObjectId]\n  }]\n}\n\nTrade {\n  id: ObjectId,\n  buyer_id: ObjectId,\n  buyer_name: String,\n  seller_id: ObjectId,\n  seller_name: String,\n  items: {\n    product_id: ObjectId,\n    product_name: String,\n    product_price: Number,\n    product_reference: String,\n    quantity: Number\n  },\n  deliveries: [{\n    id: ObjectId,\n    date: Date,\n    place: {\n      address: String,\n      lat: Number,\n      lng: Number\n    }\n  }]\n}"}]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Comme vous pouvez le voir, notre sch√©ma est compl√®tement diff√©rent. En effet, bien que la plupart de nos concepts aient √©t√© conserv√©s, nous n'avons plus que trois collections au lieu d'une dizaine de tables."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Plusieurs choses peuvent choquer les aficionados des bases de donn√©es relationnelles¬†:"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"duplication de certaines informations,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"m√©lange des genres,"}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"√©clatement de certains concepts."}]]}]]}]]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Duplication"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#duplication","className":"anchored_icon__N5Sem","id":"duplication","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"On peut remarquer que les informations sur un produit sont dupliqu√©es au sein de la collection "}],["$","code",null,{"className":"code_root__5JLV_","children":"Trade"}],["$","span","2",{"children":", il en va de m√™me pour le nom de l'entreprise. Dans le cadre d'une base de donn√©e NoSQL, ce n'est pas une erreur de conception, mais bien une feature. Certes, si le nom de l'entreprise ou le libell√© d'un produit change, le nom de l'entreprise et du produit deviendra caduque dans la facture."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Dans ce cas pr√©cis, cependant, nous pouvons consid√©rer cette duplication comme une feature. En effet, le changement de d√©nomination d'une soci√©t√© ou le changement de prix d'un produit ne doit pas √™tre r√©percut√© sur les factures ant√©rieures si l'on souhaite garder la coh√©rence du document."}]]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"M√©lange des genres"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#melange-des-genres","className":"anchored_icon__N5Sem","id":"melange-des-genres","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"L'organisation d'un sch√©ma de base de donn√©e NoSQL peut para√Ætre d√©sordonn√©e. En effet, on a de multiples concepts englob√©s au sein d'une unique structure, ce qui peut para√Ætre aberrant."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Il faut bien saisir le fait que l'organisation en document autorise, voire favorise, ce m√©lange. En effet, MongoDB ne poss√®de pas de m√©canisme de jointure comme on peut le retrouver dans MySQL. Si vous souhaitez obtenir des informations sur une entreprise "}],["$","strong",null,{"className":"strong_root__kOzFq","children":[["$","span","0",{"children":"et"}]]}],["$","span","2",{"children":" ses utilisateurs et que ces concepts sont diss√©min√©s √† travers plusieurs collections, vous n'aurez d'autre choix que de faire plusieurs appels √† la base de donn√©es. Au-del√† du probl√®me √©vident de performances, il existe des chances pour qu'entre le moment o√π vous r√©cup√©rez l'organisation et celui o√π vous r√©cup√©rez ses utilisateurs, l'organisation soit supprim√©e. Comme vous n'avez aucun moyen de garantir l'int√©grit√© des donn√©es, c'est un effet de bord in√©dit avec lequel vous devrez apprendre √† composer."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"√Ä ce titre, la conception de votre base de donn√©es doit √™tre guid√©e par l'utilisation de vos donn√©es afin de limiter au maximum ces risques d'inconsistance. Par exemple, quand vous r√©cup√©rez un utilisateur (qu'il s'agisse de son authentification ou de l'affichage de sa fiche personnelle), vous aurez probablement besoin d'informations sur son organisation. Si vous savez que m√™me pour une entreprise de 100 000 salari√©s, vous n'aurez jamais plus de 50 utilisateurs pour une m√™me organisation, alors les int√©grer dans le document organisation est l'id√©al."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"L'int√©grit√© des donn√©es est assur√©e par l'unicit√© du document et les performances √©galement."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Vous aurez probablement not√© le maximum de 50, √©nonc√© ci-dessus. Il est d√©duit √† la louche d'une autre contrainte impos√©e par MongoDB, la taille maximale d'un document. Avec le mod√®le propos√© ci-dessus, il est impossible d'ajouter des utilisateurs ind√©finiment sans mettre en place des astuces comme le "}],["$","$Lf",null,{"href":"http://docs.mongodb.org/ecosystem/use-cases/storing-comments/#hybrid-schema-design","className":"a_root__WEPS7","title":"En savoir plus sur cette technique","target":"_blank","children":[null,[["$","span","0",{"children":"bucketting"}]]]}],["$","span","2",{"children":"."}]]}],["$","h3",null,{"className":"h3_root__kVaqq","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"√âclatement des concepts"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#eclatement-des-concepts","className":"anchored_icon__N5Sem","id":"eclatement-des-concepts","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"On peut aussi remarquer que le concept de lieu est √©clat√© dans divers documents de types diff√©rents. C'est clairement un renoncement de notre part. Avec ce sch√©ma, ce n'est pas simple de lister tous les lieux de l'application (bien que cela reste possible)."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Clairement, ceci ne pr√©sente que peu d'int√©r√™t dans une application de ce type car les lieux sont des informations qui n'ont d'int√©r√™t que dans le contexte d'autres concepts."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"En conclusion, on retiendra que le NoSQL bouscule nos habitudes. L√† o√π avec une base de donn√©es relationnelle on cherche √† comprendre l'essence des donn√©es, avec une base de donn√©es NoSQL, on recherche plut√¥t le meilleur moyen d'organiser nos donn√©es pour r√©pondre au mieux aux besoins de notre application."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Impacts sur le projet"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#impacts-sur-le-projet","className":"anchored_icon__N5Sem","id":"impacts-sur-le-projet","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"√âtant donn√© que la conception d'une base de donn√©e NoSQL est directement induite par l'utilisation qui en est fa√Æte, chaque modification apport√©e √† l'application implique potentiellement une adaptation de la conception de celle-ci."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Ceci a un impact majeur sur l'√©volution du projet. Certaines modifications triviales avec l'utilisation d'une base relationnelle peuvent devenir un vrai cauchemar avec une base MongoDB. Prenons par exemple les lieux. Si demain, le succ√®s de notre place de march√© nous permet de proposer un service de livraison avec des lieux pr√©d√©termin√©s, il est probable que nous devions renoncer √† garder les lieux dans nos documents de type Trade pour cr√©er une collection √† part."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"L√† o√π notre sch√©ma relationnel n'aurait n√©cessit√© aucune modification, nous allons devoir modifier notre sch√©ma, modifier le code en cons√©quence, √©crire et lancer des scripts de migration. L√† o√π d'un c√¥t√©, nous avions un DBA qui g√©rait les donn√©es, leur stockage et leur structure, nous avons un d√©veloppeur qui doit sans cesse repenser la fa√ßon dont les donn√©es sont stock√©es et utilis√©es."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Il faut donc former des d√©veloppeurs qui prennent la coh√©rence des donn√©es comme acquise √† leurs nouvelles responsabilit√©s. Ou l'inverse d'ailleurs, √©viter que ces m√™me d√©veloppeurs cherchent √† retrouver leur zone de confort en d√©veloppant une surcouche qui leur garantirait cette int√©grit√©."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Au final, penser qu'utiliser MongoDB permet √† votre application de scaler est comme penser que perdu en plein d√©sert, vous d√©barrasser de vos vivres vous permettra d'en sortir plus vite. Choisir MongoDB, surtout c'est choisir d'√™tre confront√© aux probl√®mes de scalabilit√© d√©s les premiers jours du d√©veloppement de votre application afin de faire d√®s aujourd'hui les arbitrages qui vous permettront d'assumer une forte mont√©e en charge plus facilement."}]]}],["$","h2",null,{"className":"h2_root__Y02lX","children":["$","span",null,{"className":"anchored_root__HWi6K","children":[[["$","span","0",{"children":"Comment choisir¬†?"}]]," ",["$","small",null,{"children":["$","$Lf",null,{"href":"#comment-choisir","className":"anchored_icon__N5Sem","id":"comment-choisir","title":"Lien vers cette section","children":["$","span",null,{"children":"üîó"}]}]}]]}]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"De nombreux facteurs entrent en jeu pour choisir la base de donn√©es √† utiliser qui sied le mieux √† votre projet. Cependant, je peux vous donner les crit√®res que j'appliquerai personnellement."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Dans quel cas ne pas utiliser MongoDB¬†:"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"c'est hype, √ßa output du JSON¬†: c'est probablement la pire raison qui puisse vous faire choisir MongoDB. JSON n'est qu'un format et n'a rien √† voir avec le c≈ìur du probl√®me pos√© pour le choix d'une base de donn√©es. C'est malheureusement trop souvent le cas et je pense que ceci sera la source de nombreuses accumulations de dette technique."}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"pas besoin de scaler¬†: si scaler n'est pas votre priorit√©, n'utilisez pas MongoDB. En effet, MongoDB pose plus de probl√®mes qu'il n'en r√©sout uniquement pour scaler. Si ce n'est pas une n√©cessit√©, pr√©f√©rez une base de donn√©es relationnelle qui simplifiera vos d√©veloppements."}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"je suis un n00b en SQL, Mongo est plus simple¬†: si apr√®s cet article vous n'√™tes pas convaincu, je ne peux pas faire grand-chose de plus. Mais pour forcer le trait, je pense que le meilleur moyen de bien utiliser MongoDB est justement d'avoir une bonne exp√©rience des bases de donn√©es relationnelles."}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"features fortement changeantes¬†: typiquement, si vous fa√Ætes de la prestation de services, MongoDB est un mauvais choix. Surtout si vous travaillez au forfait. Votre client ne comprendra pas pourquoi la moindre de ses requ√™tes vous demande des efforts de conception. Si votre client est plut√¥t du genre girouette, je vous garantis des n≈ìuds au cerveau."}]]}]]}],["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"nombreux contextes d'utilisation¬†: si la base de donn√©es est appel√©e √† √™tre utilis√©e par de nombreux logiciels diff√©rents par des √©quipes diff√©rentes, MongoDB ne sera pas utilisable. En effet, puisque la conception est dirig√©e par l'utilisation, de nombreuses utilisations diff√©rentes vont m√©caniquement augmenter la complexit√© de celle-ci de mani√®re exponentielle."}]]}]]}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Dans quels cas, √©ventuellement, utiliser MongoDB¬†:"}]]}],["$","ul",null,{"className":"ul_ul__qh0e9","children":[["$","li",null,{"className":"li_root__oY9Dv","children":[["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"besoin de scaler¬†: si vous pensez que votre concept peut attirer un trafic tr√®s important, tr√®s rapidement (typiquement, si vous travaillez pour une startup prometteuse), alors, MongoDB est l'un des choix qui s'offrent √† vous."}]]}]]}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Une approche hybride peut √©galement √™tre int√©ressante, utiliser MongoDB pour les concepts se rapprochant des documents et une base de donn√©es relationnelle pour les donn√©es fortement relationnelles peut faire l'affaire."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"De plus, il est plus simple de migrer depuis une base de donn√©es relationnelle que vers une base de donn√©e NoSQL. C'est pourquoi j'aurais plut√¥t tendance √† utiliser une base relationnelle puis √† switcher si le besoin s'en fait ressentir pour une partie des donn√©es de l'application."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Enfin, il faut prendre la scalabilit√© suppos√©e de MongoDB avec des pincettes. D'une part, cette base de donn√©e reste jeune et les utilisations de grands groupes r√©f√©renc√©es sur leur site restent limit√©es des parties mineures des infrastructures qui l'int√®grent. Et d'autre part, les fournisseurs de type PaaS r√©duisent consid√©rablement les probl√®mes dus √† la scalabilit√© des bases de donn√©es relationnelles, notamment les co√ªts en administration syst√®me."}]]}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","span","0",{"children":"Je me suis fendu d'un nouveau billet, mais cette fois "}],["$","$Lf",null,{"href":"./design_base_donnee_mongodb.md","className":"a_root__WEPS7","title":null,"target":"_self","children":[null,[["$","span","0",{"children":"sur le design de base de donn√©es avec MongoDB"}]]]}],["$","span","2",{"children":"."}]]}]],["$","p",null,{"className":"p_root__SHE_W","children":["Published at"," ","jeudi 4 d√©cembre 2014 √† 20:44:40","."]}]]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"share_root__Qm_RR","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Commenter et partager"}],["$","p",null,{"className":"p_root__SHE_W","children":[["$","$Lf",null,{"href":"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fretour_xp_mongodb","className":"a_root__WEPS7","title":"Commenter sur Facebook","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_facebook__JKn8d"}],"Facebook"]]}]," - ",["$","$Lf",null,{"href":"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fretour_xp_mongodb&text=MongoDB%20%3A%20Retour%20d'exp%C3%A9rience&via=nfroidure","className":"a_root__WEPS7","title":"Commenter sur Twitter","target":"_blank","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 "}],"Twitter"]]}]," - ",["$","$Lf",null,{"href":"mailto:nicolas.froidure@gmail.com","className":"a_root__WEPS7","title":"Me r√©pondre par mail","target":"_self","children":[null,[["$","span",null,{"className":"share_icon__bi4Q3 share_mail__yvBDK"}],"Courriel"]]}]]}]]}]}],["$","section",null,{"className":"contentBlock_root__802UK","children":["$","aside",null,{"className":"page_linkedEntries__jiPuT","children":[["$","h2",null,{"className":"h2_root__Y02lX","children":"Articles similaires"}],["$","p",null,{"className":"p_root__SHE_W","children":["Dans les cat√©gories"," ","Base de donn√©es et MongoDB","."]}],["$","div",null,{"className":"items_entries__5hkLG","children":[["$","div","gerer_monnaies_logiciel",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$Lf",null,{"href":".//gerer_monnaies_logiciel","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"G√©rer les monnaies dans un logiciel (CRM,ERP)"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Je suis actuellement entrain de d√©velopper une solution CRM bas√©e sur mon framework Rest PHP. Il faut donc g√©rer les diff√©rentes monnaies."," ",["$","br",null,{}],["$","$Lf",null,{"href":".//gerer_monnaies_logiciel","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","vendredi 16 novembre 2012 √† 10:24:57","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","champs_set_et_group_by",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$Lf",null,{"href":".//champs_set_et_group_by","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"Les champs SET et les requ√™tes GROUP BY"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["J'adore utiliser les champs de type SET pour leur souplesse et leur nature multivalu√©es, mais quand GROUP BY entre dans la place, attention les d√©g√¢ts¬†!"," ",["$","br",null,{}],["$","$Lf",null,{"href":".//champs_set_et_group_by","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","mardi 28 ao√ªt 2012 √† 09:34:25","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}],["$","div","design_probabiliste_mongodb",{"className":"items_entry_item__GWeg7","children":[null,["$","h2",null,{"className":"h2_root__Y02lX items_entry_title__vJ_8h","children":["$","$Lf",null,{"href":".//design_probabiliste_mongodb","className":"a_root__WEPS7 items_entry_link__EtVod","title":"Lire cet article de blog","target":"_self","children":[null,"MongoDB ou la conception probabiliste"]}]}],["$","p",null,{"className":"p_root__SHE_W items_entry_description__ZWt9y","children":["Concevoir une base de donn√©e MongoDB c'est composer avec le hasard. Dans ce billet je vous propose de d√©couvrir pourquoi et comment."," ",["$","br",null,{}],["$","$Lf",null,{"href":".//design_probabiliste_mongodb","className":"a_root__WEPS7","title":"Lire cet article de blog","target":"_self","children":[null,"Lire la suite"]}]]}],["$","p",null,{"className":"p_root__SHE_W items_entry_time__iNrot","children":["Published at"," ","samedi 4 avril 2015 √† 15:29:02","."]}],["$","div",null,{"className":"items_clear__3fyGk"}]]}]]}]]}]}]]
a:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"name":"theme-color","content":"#3e78b2"}],["$","meta","2",{"charSet":"utf-8"}],["$","title","3",{"children":"MongoDB¬†: Retour d'exp√©rience - Nicolas Froidure"}],["$","meta","4",{"name":"description","content":"Je travaille avec MongoDB depuis maintenant presque un an, il est temps pour moi de faire un petit retour sur cette base de donn√©es et sur le NoSQL de mani√®re g√©n√©rale."}],["$","link","5",{"rel":"author","href":"https://insertafter.com"}],["$","meta","6",{"name":"author","content":"Nicolas Froidure"}],["$","meta","7",{"name":"robots","content":"index, follow"}],["$","link","8",{"rel":"canonical","href":"https://insertafter.com/fr/blog/retour_xp_mongodb"}],["$","meta","9",{"property":"og:title","content":"MongoDB¬†: Retour d'exp√©rience - Nicolas Froidure"}],["$","meta","10",{"property":"og:description","content":"Je travaille avec MongoDB depuis maintenant presque un an, il est temps pour moi de faire un petit retour sur cette base de donn√©es et sur le NoSQL de mani√®re g√©n√©rale."}],["$","meta","11",{"property":"og:url","content":"https://insertafter.com/fr/blog/retour_xp_mongodb"}],["$","meta","12",{"property":"og:site_name","content":"Nicolas Froidure"}],["$","meta","13",{"property":"og:locale","content":"fr_FR"}],["$","meta","14",{"property":"og:image:alt","content":"Banni√®re du site"}],["$","meta","15",{"property":"og:image","content":"https://insertafter.com/images/banner.png"}],["$","meta","16",{"property":"og:type","content":"article"}],["$","meta","17",{"name":"twitter:card","content":"summary"}],["$","meta","18",{"name":"twitter:site","content":"@nfroidure"}],["$","meta","19",{"name":"twitter:creator","content":"@nfroidure"}],["$","meta","20",{"name":"twitter:title","content":"MongoDB¬†: Retour d'exp√©rience - Nicolas Froidure"}],["$","meta","21",{"name":"twitter:description","content":"Je travaille avec MongoDB depuis maintenant presque un an, il est temps pour moi de faire un petit retour sur cette base de donn√©es et sur le NoSQL de mani√®re g√©n√©rale."}],["$","meta","22",{"name":"twitter:image:alt","content":"Banni√®re du site"}],["$","meta","23",{"name":"twitter:image","content":"https://insertafter.com/images/banner.png"}],["$","link","24",{"rel":"icon","href":"/images/favicon.svg","type":"image/svg+xml","sizes":"any"}],["$","link","25",{"rel":"icon","href":"/images/favicon-16.png","type":"image/png","sizes":"16x16"}],["$","link","26",{"rel":"icon","href":"/images/favicon-128.png","type":"image/png","sizes":"128x128"}]]
1:null
