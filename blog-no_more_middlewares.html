<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo.svg"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/655a273f6fe37552.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/bd3e0138d7b84072.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://insertafter.com/_next/static/chunks/webpack-0fb79efa18faaf55.js" crossorigin=""/><script src="https://insertafter.com/_next/static/chunks/fd9d1056-5bc70f044f3cb802.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/938-bf741a2eb8fd4828.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/main-app-2e6280b5273157a5.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/176-0a03be62efe5672b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/876-4c07c683293830f5.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withoutLocale)/%5Blocale%5D/page-0e78a7ab96f67f67.js" async=""></script><meta name="theme-color" content="#3e78b2"/><title>No more middlewares, please - Nicolas Froidure</title><meta name="description" content="Why I think middlewares are a bad thing, how I am replacing them."/><link rel="author" href="https://insertafter.com"/><meta name="author" content="Nicolas Froidure"/><meta name="robots" content="index, follow"/><link rel="canonical" href="https://insertafter.com/en/blog/no_more_middlewares"/><meta property="og:title" content="No more middlewares, please - Nicolas Froidure"/><meta property="og:description" content="Why I think middlewares are a bad thing, how I am replacing them."/><meta property="og:url" content="https://insertafter.com/en/blog/no_more_middlewares"/><meta property="og:site_name" content="Nicolas Froidure"/><meta property="og:locale" content="en_US"/><meta property="og:image:alt" content="Website banner"/><meta property="og:image" content="https://insertafter.com/images/banner.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@nfroidure"/><meta name="twitter:creator" content="@nfroidure"/><meta name="twitter:title" content="No more middlewares, please - Nicolas Froidure"/><meta name="twitter:description" content="Why I think middlewares are a bad thing, how I am replacing them."/><meta name="twitter:image:alt" content="Website banner"/><meta name="twitter:image" content="https://insertafter.com/images/banner.png"/><link rel="icon" href="/images/favicon.svg" type="image/svg+xml" sizes="any"/><link rel="icon" href="/images/favicon-16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/images/favicon-128.png" type="image/png" sizes="128x128"/><script src="https://insertafter.com/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="layout_body__jFZuu"><header class="header_iaHeader__4vCMA"><div><h1><a href="/en" title="Go back to home page" class="header_iaHeaderLogo__0uNr1"><img src="/images/logo.svg" alt="InsertAfter&#x27;s Logo"/></a></h1></div></header><nav class="menu_iaMenu__B_rtj"><ul class="menu_iaMenuBody__0Zveq"><li class="menu_iaMenuItem__rOch4"><a href="/en" title="Go back to home page" class="">Home</a></li><li class="menu_iaMenuItem__rOch4"><a href="/en/blog" title="Read my blog posts" class="">Blog</a></li><li class="menu_iaMenuItem__rOch4"><a href="/en/projects" title="Discover my projects" class="">Projects</a></li><li class="menu_iaMenuItem__rOch4"><a href="/en/about" title="Read more about me" class="">About me</a></li></ul></nav><nav class="languages_iaLanguages__K2J3W"><ul><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagEn__angfJ"><a href="/en"><span>en</span></a></li><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagFr__Us5Jb languages_selected__w1dKv"><a href="/fr"><span>fr</span></a></li></ul></nav><main class="layout_iaMain__6s2gl"><div><section class="contentBlock_root__802UK"><h1 class="h1_root__VPXQG"><span>No more middlewares, please</span></h1><p class="p_root__SHE_W"><span>When it comes to programming, there is a trap on which every programmer fall: elegant code. I&#x27;m often surprised to see even experienced developers qualifying a code snippet as elegant or beautiful.</span></p><p class="p_root__SHE_W"><span>From my point of view, each time I found an API interface allowing me to create some elegant code, it ended up as a nightmare codebase, full of unmaintainable spaghetti code.</span></p><p class="p_root__SHE_W"><span>Most of those nice, elegant and cool APIs fallen in disgrace in developers minds:</span></p><ul class="ul_ul__qh0e9"><li class="li_root__oY9Dv"><p class="p_root__SHE_W"><a class="a_root__WEPS7" target="_blank" href="https://www.reddit.com/r/javascript/comments/1sk8vm/method%5Fchaining%5Fgood%5For%5Fbad%5Fthing/cdyebjh/"><span>Method Chaining</span></a><span>: I think it is the first reason why JQuery will finally died, if not yet done.</span></p></li><li class="li_root__oY9Dv"><p class="p_root__SHE_W"><a class="a_root__WEPS7" target="_blank" href="https://blog.pivotal.io/labs/labs/all-evidence-points-to-oop-being-bullshit"><span>POO</span></a><span>: Not that objects and classes are harmful but thinking everything in term of objects/classes is a non-sense. Can&#x27;t remind the time I find out that a fully OOP application was easily maintainable.</span></p></li><li class="li_root__oY9Dv"><p class="p_root__SHE_W"><a class="a_root__WEPS7" target="_blank" href="http://www.yegor256.com/2014/12/01/orm-offensive-anti-pattern.html"><span>ORM/ODM</span></a><span>: Even OOP guys find it harmful. I spent horrible moments using Mongoose. Would not recommend it to my worst enemy.</span></p></li><li class="li_root__oY9Dv"><p class="p_root__SHE_W"><a class="a_root__WEPS7" target="_blank" href="https://medium.com/@dan%5Fabramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750#.8k7i3x68a"><span>Mixins</span></a><span>: Everything is in the name. Mixing is the best way to get messy code.</span></p></li></ul><p class="p_root__SHE_W"><span>My current statement is: </span><strong class="strong_root__kOzFq"><span>if you find some code elegant, it has great chances to be the next bullshit you&#x27;ll step in</span></strong><span>.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Here be middlewares</span> <small><a class="anchored_icon__N5Sem" id="here-be-middlewares" title="Lien vers cette section" href="#here-be-middlewares"><span>ðŸ”—</span></a></small></span></h2><p class="p_root__SHE_W"><span>As a JavaScript developer I heavily used Express with NodeJS. At first, I found its middleware system really elegant. Well, at first.</span></p><p class="p_root__SHE_W"><strong class="strong_root__kOzFq"><span>When it comes to debugging, it is just a nightmare.</span></strong><span> Your </span><strong class="strong_root__kOzFq"><span>stack traces are unreadable</span></strong><span>. When you open a controller, you have to check what happens before it is invoked and what will be done next to fully understand its behavior.</span></p><p class="p_root__SHE_W"><span>You end up with </span><strong class="strong_root__kOzFq"><span>lots of a god objects</span></strong><span>, </span><code class="code_root__5JLV_">req</code><span>, </span><code class="code_root__5JLV_">res</code><span> and </span><code class="code_root__5JLV_">app</code><span> for instance, that may or may not contain: a query, some cookies, encoded or decoded body, that method or this other one... It not only makes you mad when it comes to work on an Express application but also </span><strong class="strong_root__kOzFq"><span>makes the code reuse very difficult</span></strong><span>.</span></p><p class="p_root__SHE_W"><span>Indeed, to reuse a controller, you have to find out every middlewares it depends on and set them up in the Express application where you want to reuse it. Problem: There is great chances that the same middleware is already in use but with a different version. And it is not the same shitty property that is set on that shitty god object.</span></p><p class="p_root__SHE_W"><span>This is why I think </span><strong class="strong_root__kOzFq"><span>middlewares are an anti-pattern</span></strong><span>. Your controller should contain the complete workflow that allows you to get a response from an HTTP request. Transforming the following usual code:</span></p><div class="gist_root__FwqUp"><iframe src="data:text/html;base64,PHNjcmlwdCBzcmM9Imh0dHBzOi8vZ2lzdC5naXRodWIuY29tL25mcm9pZHVyZS8zYzBhNTg1ODUxODY2M2JlMTg2YTFhNjRkMTYwZWUzMS5qcyI+PC9zY3JpcHQ+"></iframe><noscript><div class="code_root__5JLV_"><code><pre>// From the Gist: https://gist.github.com/nfroidure/3c0a5858518663be186a1a64d160ee31

module.exports = (app) =&gt; {
  // Where the hell is this config set?
  const config = app.get(&quot;config&quot;);
  // How can I see what this timer do?
  const timer = app.get(&quot;timer&quot;);

  app.post((req, res, next) =&gt; {
    const data = {};
    // Which middleware set up this query params?
    if (req.query.ms) {
      data.when = timer.now();
    } else {
      data.when = new Date(timer.now()).toISOString();
    }
    // How this body was set, in which middleware?
    if (config.repeatBody) {
      data.body = req.body;
    }
    res.jsonBody = data; // Which consequences setting that jsonBody has?
    next(); // What happens then? New headers? Body transformations?
  });
};</pre></code></div></noscript></div><p class="p_root__SHE_W"><span>Into something way more expressive:</span></p><div class="gist_root__FwqUp"><iframe src="data:text/html;base64,PHNjcmlwdCBzcmM9Imh0dHBzOi8vZ2lzdC5naXRodWIuY29tL25mcm9pZHVyZS80M2EwZWViMDY1NDlhZWIzMmRkMjNjOTFmYTVlMGYxMS5qcyI+PC9zY3JpcHQ+"></iframe><noscript><div class="code_root__5JLV_"><code><pre>// From the Gist: https://gist.github.com/nfroidure/43a0eeb06549aeb32dd23c91fa5e0f11

// No middleware, just pur functions
import getBodyFromReq from &#x27;pureBodyParser&#x27;;
import getQueryFromReq from &#x27;pureQueryParser&#x27;;
import sendToRes from &#x27;pureResponseMaker&#x27;;

// Use dependency injection for required services
// app/config/timer just come from this function caller
module.exports = ({ app, config, timer}) =&gt; {

  app.post((req, res) =&gt; {
    // Promise based workflow instead of a middleware chain
    // could have been async/await too
    Promise.all([
      // No surprise, the body comes from the pureBodyParser module
      // But I can already guess it allows JSON or YAML
      getBodyFromReq.bind(null, req, [&#x27;json&#x27;, &#x27;yaml&#x27;]),
      // And so on for the query
      getQueryFromReq.bind(null, req),
    ])
    .then(_buildResponse.bind(null, {timer, config})
    // No surprise, the response is sent by the pureResponseMaker module
    // But I can already guess it could output JSON or YAML
    .sendToRes(sendToRes.bind(null, req, res, [&#x27;json&#x27;, &#x27;yaml&#x27;], 200));
  });

};

// the pure function that process the request
// could be reused in a completly different context
// a frontend service worker or a websocket server
function _buildResponse({timer, config}, [body, query]) =&gt; {
  const data = {};

  if(query.ms) {
    data.when = timer.now();
  } else {
    data.when = new Date(timer.now()).toISOString();
  }

  if(config.repeatBody) {
    data.body = req.body;
  }
  return data;
}</pre></code></div></noscript></div><p class="p_root__SHE_W"><span>Since the controller is strongly tied to its dependencies, you could just copy paste it into your other projects and npm install the various modules it actually uses. Magic? No, simple, atomic, reliable code. Nothing elegant, no hype, just stupid code telling what it does.</span></p><p class="p_root__SHE_W"><span>One could argue that it introduces huge boilerplates. We are switching from a 24 lines controller to a 42 one. My advice is that the glue code that strongly tie the controller with its actual underlying logic can be considered as comments that ends up to be code.</span></p><p class="p_root__SHE_W"><span>The middleware based code, to be inclusive, should add comments telling where all that magic happens. But the fact is that commenting is a shitty way to help others to grasp your code. I personally use it only to explain something I cannot show with meaningful code. Most of the time, it&#x27;s all about business constraints or legacy issues.</span></p><p class="p_root__SHE_W"><span>Also, nothing impeach you to group several stages of your workflow into a single pure function if you figure out that a particular step sequence is used in most controllers. Importing this function will always show the way for readers to find out their content.</span></p><p class="p_root__SHE_W"><span>Finally, this workflow approach is in my opinion way more adapted to HTTP. Indeed, what is an HTTP endpoint except a function that takes a request and returns a response? Why would we have to deal with something else than functions decomposing it into simple steps?</span></p><p class="p_root__SHE_W"><span>As a conclusion, I would say that good code is not smart or elegant. It is readable, reliable, naive in a word: simple. And you probably know how hard it is to do simple ;).</span></p><p class="p_root__SHE_W"><strong class="strong_root__kOzFq"><span>Edit:</span></strong><span> I ended up bringing up all those preferences in a JavaScript module intended to help building REst APIs called </span><a class="a_root__WEPS7" target="_blank" href="https://github.com/nfroidure/whook"><span>Whook</span></a><span>.</span></p><p class="p_root__SHE_W">Published at<!-- --> <!-- -->samedi 5 novembre 2016 Ã  20:50:20<!-- -->.</p></section><section class="contentBlock_root__802UK"><aside class="share_root__Qm_RR"><h2 class="h2_root__Y02lX">Comment and share</h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Comment on Facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fno_more_middlewares"><span class="share_icon__bi4Q3 share_facebook__JKn8d"></span>Facebook</a> - <a class="a_root__WEPS7" title="Comment on Twitter" target="_blank" href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fno_more_middlewares&amp;text=No%20more%20middlewares%2C%20please&amp;via=nfroidure"><span class="share_icon__bi4Q3 "></span>Twitter</a> - <a class="a_root__WEPS7" title="Answer via email" target="_self" href="mailto:nicolas.froidure@gmail.com"><span class="share_icon__bi4Q3 share_mail__yvBDK"></span>Email</a></p></aside></section><section class="contentBlock_root__802UK"><aside class="page_linkedEntries__jiPuT"><h2 class="h2_root__Y02lX">Similar posts</h2><p class="p_root__SHE_W">In the categories<!-- --> <!-- -->JavaScript and Middlewares<!-- -->.</p><div class="items_entries__5hkLG"><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Read this blog post" target="_self" href=".//lets_subset_javascript">Let&#x27;s Subset JavaScript</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Currently, it&#x27;s all about JavaScript and how to compile, transpile and every &quot;ile&quot;y things you could imagine. But what about making JavaScript smaller?<!-- --> <br/><a class="a_root__WEPS7" title="Read this blog post" target="_self" href=".//lets_subset_javascript">Read the full post</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->vendredi 10 juillet 2015 Ã  15:38:03<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Read this blog post" target="_self" href=".//native-node-module">Create Native NodeJS Modules Fallbacking To Emscripten Ones</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Suprisingly, creating a native module is not that hard. Making it compile on any platform and gracefully handle compilation fails is a bit more tricky.<!-- --> <br/><a class="a_root__WEPS7" title="Read this blog post" target="_self" href=".//native-node-module">Read the full post</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->vendredi 26 juin 2015 Ã  17:50:23<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Read this blog post" target="_self" href=".//watchdeps">Watching Your NodeJS Projects&#x27;s Dependencies The Easy Way</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Using watchdeps to automagically watch your project&#x27;s dependencies.<!-- --> <br/><a class="a_root__WEPS7" title="Read this blog post" target="_self" href=".//watchdeps">Read the full post</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->dimanche 8 mars 2015 Ã  11:07:32<!-- -->.</p><div class="items_clear__3fyGk"></div></div></div></aside></section></div></main><aside class="social_iaSocial__kdR1x"><nav><ul><li><a href="https://mastodon.social/@nfroidure" rel="me" title="Follow me on Mastodon" class="social_iaSocialMastodon__MTF6o"><span>Mastodon</span></a></li><li><a href="https://bsky.app/profile/nfroidure.bsky.social" rel="me" title="Follow me on Bluesky" class="social_iaSocialBluesky__fKW6M"><span>Bluesky</span></a></li><li><a href="https://twitter.com/nfroidure" title="Follow me on Twitter" class="social_iaSocialTwitter__9nU6R"><span>Twitter</span></a></li><li><a href="https://github.com/nfroidure" title="See my GitHub projects" class="social_iaSocialGithub__vcU5_"><span>GitHub</span></a></li><li><a href="https://www.npmjs.org/~nfroidure" title="Check my NPM modules" class="social_iaSocialNpm__6nku5"><span>NPM</span></a></li><li><a href="https://www.linkedin.com/in/nfroidure/" rel="me" title="See my LinkedIn profile" class="social_iaSocialLinkedin__pWACO"><span>LinkedIn</span></a></li><li><a href="https://facebook.com/nicolas.froidure.douai" rel="me" title="Follow me on Facebook" class="social_iaSocialFacebook__w4wfH"><span>Facebook</span></a></li><li><a href="/en/blog/index.atom" title="Subscribe to my RSS feed" class="social_iaSocialFeed__gEQQ0"><span>RSS Feed</span></a></li></ul></nav></aside><footer class="footer_iaFooter__rhlnQ"><p class="footer_iaFooterContent__VZndF">Â© Nicolas Froidure 2012-<!-- -->2024</p></footer><script src="https://insertafter.com/_next/static/chunks/webpack-0fb79efa18faaf55.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:HL[\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"style\",{\"crossOrigin\":\"\"}]\n3:HL[\"https://insertafter.com/_next/static/css/bd3e0138d7b84072.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\nc:I[8955,[],\"\"]\n8:[\"locale\",\"blog-no_more_middlewares\",\"d\"]\n"])</script><script>self.__next_f.push([1,"1:[null,[\"$\",\"$L4\",null,{\"buildId\":\"TAeA64I6nSlHSqkZiZ8iQ\",\"assetPrefix\":\"https://insertafter.com\",\"initialCanonicalUrl\":\"/blog-no_more_middlewares\",\"initialTree\":[\"\",{\"children\":[\"(withoutLocale)\",{\"children\":[[\"locale\",\"blog-no_more_middlewares\",\"d\"],{\"children\":[\"__PAGE__?{\\\"locale\\\":\\\"blog-no_more_middlewares\\\"}\",{}]}]},\"$undefined\",\"$undefined\",true]}],\"initialSeedData\":[\"\",{\"children\":[\"(withoutLocale)\",{\"children\":[[\"locale\",\"blog-no_more_middlewares\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withoutLocale)\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/bd3e0138d7b84072.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[null,\"$La\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]],\"initialHead\":[false,\"$Lb\"],\"globalErrorComponent\":\"$c\"}]]\n"])</script><script>self.__next_f.push([1,"d:\"$Sreact.strict_mode\"\ne:I[4630,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\nf:I[4341,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\n10:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems"])</script><script>self.__next_f.push([1,"\":\"center\",\"justifyContent\":\"center\"}\n11:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\n12:{\"display\":\"inline-block\"}\n13:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"$d\",null,{\"children\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_body__jFZuu\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"header_iaHeader__4vCMA\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/en\",\"title\":\"Go back to home page\",\"className\":\"header_iaHeaderLogo__0uNr1\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/logo.svg\",\"alt\":\"InsertAfter's Logo\"}]}]}]}]}],[\"$\",\"$Le\",null,{\"locale\":\"en\",\"dictionary\":{\"home\":{\"label\":\"Home\",\"title\":\"Go back to home page\"},\"blog\":{\"label\":\"Blog\",\"title\":\"Read my blog posts\"},\"projects\":{\"label\":\"Projects\",\"title\":\"Discover my projects\"},\"about\":{\"label\":\"About me\",\"title\":\"Read more about me\"}}}],[\"$\",\"$Lf\",null,{\"locale\":\"en\"}],[\"$\",\"main\",null,{\"className\":\"layout_iaMain__6s2gl\",\"children\":[\"$\",\"div\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withoutLocale)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$11\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$12\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$13\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}],[\"$\",\"aside\",null,{\"className\":\"social_iaSocial__kdR1x\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@nfroidure\",\"rel\":\"me\",\"title\":\"Follow me on Mastodon\",\"className\":\"social_iaSocialMastodon__MTF6o\",\"children\":[\"$\",\"span\",null,{\"children\":\"Mastodon\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://bsky.app/profile/nfroidure.bsky.social\",\"rel\":\"me\",\"title\":\"Follow me on Bluesky\",\"className\":\"social_iaSocialBluesky__fKW6M\",\"children\":[\"$\",\"span\",null,{\"children\":\"Bluesky\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://twitter.com/nfroidure\",\"title\":\"Follow me on Twitter\",\"className\":\"social_iaSocialTwitter__9nU6R\",\"children\":[\"$\",\"span\",null,{\"children\":\"Twitter\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/nfroidure\",\"title\":\"See my GitHub projects\",\"className\":\"social_iaSocialGithub__vcU5_\",\"children\":[\"$\",\"span\",null,{\"children\":\"GitHub\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.org/~nfroidure\",\"title\":\"Check my NPM modules\",\"className\":\"social_iaSocialNpm__6nku5\",\"children\":[\"$\",\"span\",null,{\"children\":\"NPM\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/nfroidure/\",\"rel\":\"me\",\"title\":\"See my LinkedIn profile\",\"className\":\"social_iaSocialLinkedin__pWACO\",\"children\":[\"$\",\"span\",null,{\"children\":\"LinkedIn\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://facebook.com/nicolas.froidure.douai\",\"rel\":\"me\",\"title\":\"Follow me on Facebook\",\"className\":\"social_iaSocialFacebook__w4wfH\",\"children\":[\"$\",\"span\",null,{\"children\":\"Facebook\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/en/blog/index.atom\",\"title\":\"Subscribe to my RSS feed\",\"className\":\"social_iaSocialFeed__gEQQ0\",\"children\":[\"$\",\"span\",null,{\"children\":\"RSS Feed\"}]}]}]]}]}]}],[\"$\",\"footer\",null,{\"className\":\"footer_iaFooter__rhlnQ\",\"children\":[\"$\",\"p\",null,{\"className\":\"footer_iaFooterContent__VZndF\",\"children\":[\"Â© Nicolas Froidure 2012-\",2024]}]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"14:I[5250,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"876\",\"static/chunks/876-4c07c683293830f5.js\",\"770\",\"static/chunks/app/(withoutLocale)/%5Blocale%5D/page-0e78a7ab96f67f67.js\"],\"\"]\n15:T5dc,"])</script><script>self.__next_f.push([1,"// From the Gist: https://gist.github.com/nfroidure/43a0eeb06549aeb32dd23c91fa5e0f11\n\n// No middleware, just pur functions\nimport getBodyFromReq from 'pureBodyParser';\nimport getQueryFromReq from 'pureQueryParser';\nimport sendToRes from 'pureResponseMaker';\n\n// Use dependency injection for required services\n// app/config/timer just come from this function caller\nmodule.exports = ({ app, config, timer}) =\u003e {\n\n  app.post((req, res) =\u003e {\n    // Promise based workflow instead of a middleware chain\n    // could have been async/await too\n    Promise.all([\n      // No surprise, the body comes from the pureBodyParser module\n      // But I can already guess it allows JSON or YAML\n      getBodyFromReq.bind(null, req, ['json', 'yaml']),\n      // And so on for the query\n      getQueryFromReq.bind(null, req),\n    ])\n    .then(_buildResponse.bind(null, {timer, config})\n    // No surprise, the response is sent by the pureResponseMaker module\n    // But I can already guess it could output JSON or YAML\n    .sendToRes(sendToRes.bind(null, req, res, ['json', 'yaml'], 200));\n  });\n\n};\n\n// the pure function that process the request\n// could be reused in a completly different context\n// a frontend service worker or a websocket server\nfunction _buildResponse({timer, config}, [body, query]) =\u003e {\n  const data = {};\n\n  if(query.ms) {\n    data.when = timer.now();\n  } else {\n    data.when = new Date(timer.now()).toISOString();\n  }\n\n  if(config.repeatBody) {\n    data.body = req.body;\n  }\n  return data;\n}"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"No more middlewares, please\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"When it comes to programming, there is a trap on which every programmer fall: elegant code. I'm often surprised to see even experienced developers qualifying a code snippet as elegant or beautiful.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"From my point of view, each time I found an API interface allowing me to create some elegant code, it ended up as a nightmare codebase, full of unmaintainable spaghetti code.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Most of those nice, elegant and cool APIs fallen in disgrace in developers minds:\"}]]}],[\"$\",\"ul\",null,{\"className\":\"ul_ul__qh0e9\",\"children\":[[\"$\",\"li\",null,{\"className\":\"li_root__oY9Dv\",\"children\":[[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L14\",null,{\"href\":\"https://www.reddit.com/r/javascript/comments/1sk8vm/method%5Fchaining%5Fgood%5For%5Fbad%5Fthing/cdyebjh/\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Method Chaining\"}]]]}],[\"$\",\"span\",\"1\",{\"children\":\": I think it is the first reason why JQuery will finally died, if not yet done.\"}]]}]]}],[\"$\",\"li\",null,{\"className\":\"li_root__oY9Dv\",\"children\":[[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L14\",null,{\"href\":\"https://blog.pivotal.io/labs/labs/all-evidence-points-to-oop-being-bullshit\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"POO\"}]]]}],[\"$\",\"span\",\"1\",{\"children\":\": Not that objects and classes are harmful but thinking everything in term of objects/classes is a non-sense. Can't remind the time I find out that a fully OOP application was easily maintainable.\"}]]}]]}],[\"$\",\"li\",null,{\"className\":\"li_root__oY9Dv\",\"children\":[[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L14\",null,{\"href\":\"http://www.yegor256.com/2014/12/01/orm-offensive-anti-pattern.html\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"ORM/ODM\"}]]]}],[\"$\",\"span\",\"1\",{\"children\":\": Even OOP guys find it harmful. I spent horrible moments using Mongoose. Would not recommend it to my worst enemy.\"}]]}]]}],[\"$\",\"li\",null,{\"className\":\"li_root__oY9Dv\",\"children\":[[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L14\",null,{\"href\":\"https://medium.com/@dan%5Fabramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750#.8k7i3x68a\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Mixins\"}]]]}],[\"$\",\"span\",\"1\",{\"children\":\": Everything is in the name. Mixing is the best way to get messy code.\"}]]}]]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"My current statement is: \"}],[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"if you find some code elegant, it has great chances to be the next bullshit you'll step in\"}]]}],[\"$\",\"span\",\"2\",{\"children\":\".\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Here be middlewares\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L14\",null,{\"href\":\"#here-be-middlewares\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"here-be-middlewares\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"ðŸ”—\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"As a JavaScript developer I heavily used Express with NodeJS. At first, I found its middleware system really elegant. Well, at first.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"When it comes to debugging, it is just a nightmare.\"}]]}],[\"$\",\"span\",\"1\",{\"children\":\" Your \"}],[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"stack traces are unreadable\"}]]}],[\"$\",\"span\",\"3\",{\"children\":\". When you open a controller, you have to check what happens before it is invoked and what will be done next to fully understand its behavior.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"You end up with \"}],[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"lots of a god objects\"}]]}],[\"$\",\"span\",\"2\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"req\"}],[\"$\",\"span\",\"4\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"res\"}],[\"$\",\"span\",\"6\",{\"children\":\" and \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"app\"}],[\"$\",\"span\",\"8\",{\"children\":\" for instance, that may or may not contain: a query, some cookies, encoded or decoded body, that method or this other one... It not only makes you mad when it comes to work on an Express application but also \"}],[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"makes the code reuse very difficult\"}]]}],[\"$\",\"span\",\"10\",{\"children\":\".\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Indeed, to reuse a controller, you have to find out every middlewares it depends on and set them up in the Express application where you want to reuse it. Problem: There is great chances that the same middleware is already in use but with a different version. And it is not the same shitty property that is set on that shitty god object.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"This is why I think \"}],[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"middlewares are an anti-pattern\"}]]}],[\"$\",\"span\",\"2\",{\"children\":\". Your controller should contain the complete workflow that allows you to get a response from an HTTP request. Transforming the following usual code:\"}]]}],[\"$\",\"div\",null,{\"className\":\"gist_root__FwqUp\",\"children\":[[\"$\",\"iframe\",null,{\"src\":\"data:text/html;base64,PHNjcmlwdCBzcmM9Imh0dHBzOi8vZ2lzdC5naXRodWIuY29tL25mcm9pZHVyZS8zYzBhNTg1ODUxODY2M2JlMTg2YTFhNjRkMTYwZWUzMS5qcyI+PC9zY3JpcHQ+\"}],[\"$\",\"noscript\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"// From the Gist: https://gist.github.com/nfroidure/3c0a5858518663be186a1a64d160ee31\\n\\nmodule.exports = (app) =\u003e {\\n  // Where the hell is this config set?\\n  const config = app.get(\\\"config\\\");\\n  // How can I see what this timer do?\\n  const timer = app.get(\\\"timer\\\");\\n\\n  app.post((req, res, next) =\u003e {\\n    const data = {};\\n    // Which middleware set up this query params?\\n    if (req.query.ms) {\\n      data.when = timer.now();\\n    } else {\\n      data.when = new Date(timer.now()).toISOString();\\n    }\\n    // How this body was set, in which middleware?\\n    if (config.repeatBody) {\\n      data.body = req.body;\\n    }\\n    res.jsonBody = data; // Which consequences setting that jsonBody has?\\n    next(); // What happens then? New headers? Body transformations?\\n  });\\n};\"}]}]}]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Into something way more expressive:\"}]]}],[\"$\",\"div\",null,{\"className\":\"gist_root__FwqUp\",\"children\":[[\"$\",\"iframe\",null,{\"src\":\"data:text/html;base64,PHNjcmlwdCBzcmM9Imh0dHBzOi8vZ2lzdC5naXRodWIuY29tL25mcm9pZHVyZS80M2EwZWViMDY1NDlhZWIzMmRkMjNjOTFmYTVlMGYxMS5qcyI+PC9zY3JpcHQ+\"}],[\"$\",\"noscript\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"$15\"}]}]}]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Since the controller is strongly tied to its dependencies, you could just copy paste it into your other projects and npm install the various modules it actually uses. Magic? No, simple, atomic, reliable code. Nothing elegant, no hype, just stupid code telling what it does.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"One could argue that it introduces huge boilerplates. We are switching from a 24 lines controller to a 42 one. My advice is that the glue code that strongly tie the controller with its actual underlying logic can be considered as comments that ends up to be code.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"The middleware based code, to be inclusive, should add comments telling where all that magic happens. But the fact is that commenting is a shitty way to help others to grasp your code. I personally use it only to explain something I cannot show with meaningful code. Most of the time, it's all about business constraints or legacy issues.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Also, nothing impeach you to group several stages of your workflow into a single pure function if you figure out that a particular step sequence is used in most controllers. Importing this function will always show the way for readers to find out their content.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Finally, this workflow approach is in my opinion way more adapted to HTTP. Indeed, what is an HTTP endpoint except a function that takes a request and returns a response? Why would we have to deal with something else than functions decomposing it into simple steps?\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"As a conclusion, I would say that good code is not smart or elegant. It is readable, reliable, naive in a word: simple. And you probably know how hard it is to do simple ;).\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"strong_root__kOzFq\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Edit:\"}]]}],[\"$\",\"span\",\"1\",{\"children\":\" I ended up bringing up all those preferences in a JavaScript module intended to help building REst APIs called \"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/nfroidure/whook\",\"className\":\"a_root__WEPS7\",\"title\":null,\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Whook\"}]]]}],[\"$\",\"span\",\"3\",{\"children\":\".\"}]]}]],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Published at\",\" \",\"samedi 5 novembre 2016 Ã  20:50:20\",\".\"]}]]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"share_root__Qm_RR\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Comment and share\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L14\",null,{\"href\":\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Fno_more_middlewares\",\"className\":\"a_root__WEPS7\",\"title\":\"Comment on Facebook\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_facebook__JKn8d\"}],\"Facebook\"]]}],\" - \",[\"$\",\"$L14\",null,{\"href\":\"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Fno_more_middlewares\u0026text=No%20more%20middlewares%2C%20please\u0026via=nfroidure\",\"className\":\"a_root__WEPS7\",\"title\":\"Comment on Twitter\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 \"}],\"Twitter\"]]}],\" - \",[\"$\",\"$L14\",null,{\"href\":\"mailto:nicolas.froidure@gmail.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Answer via email\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_mail__yvBDK\"}],\"Email\"]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"page_linkedEntries__jiPuT\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Similar posts\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"In the categories\",\" \",\"JavaScript and Middlewares\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_entries__5hkLG\",\"children\":[[\"$\",\"div\",\"lets_subset_javascript\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L14\",null,{\"href\":\".//lets_subset_javascript\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Read this blog post\",\"target\":\"_self\",\"children\":[null,\"Let's Subset JavaScript\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Currently, it's all about JavaScript and how to compile, transpile and every \\\"ile\\\"y things you could imagine. But what about making JavaScript smaller?\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L14\",null,{\"href\":\".//lets_subset_javascript\",\"className\":\"a_root__WEPS7\",\"title\":\"Read this blog post\",\"target\":\"_self\",\"children\":[null,\"Read the full post\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"vendredi 10 juillet 2015 Ã  15:38:03\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"native-node-module\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L14\",null,{\"href\":\".//native-node-module\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Read this blog post\",\"target\":\"_self\",\"children\":[null,\"Create Native NodeJS Modules Fallbacking To Emscripten Ones\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Suprisingly, creating a native module is not that hard. Making it compile on any platform and gracefully handle compilation fails is a bit more tricky.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L14\",null,{\"href\":\".//native-node-module\",\"className\":\"a_root__WEPS7\",\"title\":\"Read this blog post\",\"target\":\"_self\",\"children\":[null,\"Read the full post\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"vendredi 26 juin 2015 Ã  17:50:23\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"watchdeps\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L14\",null,{\"href\":\".//watchdeps\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Read this blog post\",\"target\":\"_self\",\"children\":[null,\"Watching Your NodeJS Projects's Dependencies The Easy Way\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Using watchdeps to automagically watch your project's dependencies.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L14\",null,{\"href\":\".//watchdeps\",\"className\":\"a_root__WEPS7\",\"title\":\"Read this blog post\",\"target\":\"_self\",\"children\":[null,\"Read the full post\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"dimanche 8 mars 2015 Ã  11:07:32\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}]]}]]}]}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"content\":\"#3e78b2\"}],[\"$\",\"meta\",\"2\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"3\",{\"children\":\"No more middlewares, please - Nicolas Froidure\"}],[\"$\",\"meta\",\"4\",{\"name\":\"description\",\"content\":\"Why I think middlewares are a bad thing, how I am replacing them.\"}],[\"$\",\"link\",\"5\",{\"rel\":\"author\",\"href\":\"https://insertafter.com\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"link\",\"8\",{\"rel\":\"canonical\",\"href\":\"https://insertafter.com/en/blog/no_more_middlewares\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:title\",\"content\":\"No more middlewares, please - Nicolas Froidure\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:description\",\"content\":\"Why I think middlewares are a bad thing, how I am replacing them.\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:url\",\"content\":\"https://insertafter.com/en/blog/no_more_middlewares\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:site_name\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image:alt\",\"content\":\"Website banner\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:site\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:creator\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:title\",\"content\":\"No more middlewares, please - Nicolas Froidure\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:description\",\"content\":\"Why I think middlewares are a bad thing, how I am replacing them.\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image:alt\",\"content\":\"Website banner\"}],[\"$\",\"meta\",\"23\",{\"name\":\"twitter:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"icon\",\"href\":\"/images/favicon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"link\",\"25\",{\"rel\":\"icon\",\"href\":\"/images/favicon-16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"26\",{\"rel\":\"icon\",\"href\":\"/images/favicon-128.png\",\"type\":\"image/png\",\"sizes\":\"128x128\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>