<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo.svg"/><link rel="preload" as="image" href="/illustrations/capture-memory1.png"/><link rel="preload" as="image" href="/illustrations/capture-memory2.png"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/655a273f6fe37552.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="https://insertafter.com/_next/static/css/bd3e0138d7b84072.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://insertafter.com/_next/static/chunks/webpack-0fb79efa18faaf55.js" crossorigin=""/><script src="https://insertafter.com/_next/static/chunks/fd9d1056-5bc70f044f3cb802.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/938-bf741a2eb8fd4828.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/main-app-2e6280b5273157a5.js" async="" crossorigin=""></script><script src="https://insertafter.com/_next/static/chunks/176-0a03be62efe5672b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/876-4c07c683293830f5.js" async=""></script><script src="https://insertafter.com/_next/static/chunks/app/(withoutLocale)/%5Blocale%5D/page-0e78a7ab96f67f67.js" async=""></script><meta name="theme-color" content="#3e78b2"/><title>Astuces pour utiliser pleinement RequireJS - Nicolas Froidure</title><meta name="description" content="Pour un projet dont je vous reparlerai bient√¥t, j&#x27;ai utilis√© RequireJS pour la premi√®re fois en production. J&#x27;en profite pour vous faire un petit retour d&#x27;exp√©rience avec quelques astuces de mon cru ;)."/><link rel="author" href="https://insertafter.com"/><meta name="author" content="Nicolas Froidure"/><meta name="robots" content="index, follow"/><link rel="canonical" href="https://insertafter.com/fr/blog/utiliser_requirejs"/><meta property="og:title" content="Astuces pour utiliser pleinement RequireJS - Nicolas Froidure"/><meta property="og:description" content="Pour un projet dont je vous reparlerai bient√¥t, j&#x27;ai utilis√© RequireJS pour la premi√®re fois en production. J&#x27;en profite pour vous faire un petit retour d&#x27;exp√©rience avec quelques astuces de mon cru ;)."/><meta property="og:url" content="https://insertafter.com/fr/blog/utiliser_requirejs"/><meta property="og:site_name" content="Nicolas Froidure"/><meta property="og:locale" content="fr_FR"/><meta property="og:image:alt" content="Banni√®re du site"/><meta property="og:image" content="https://insertafter.com/images/banner.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@nfroidure"/><meta name="twitter:creator" content="@nfroidure"/><meta name="twitter:title" content="Astuces pour utiliser pleinement RequireJS - Nicolas Froidure"/><meta name="twitter:description" content="Pour un projet dont je vous reparlerai bient√¥t, j&#x27;ai utilis√© RequireJS pour la premi√®re fois en production. J&#x27;en profite pour vous faire un petit retour d&#x27;exp√©rience avec quelques astuces de mon cru ;)."/><meta name="twitter:image:alt" content="Banni√®re du site"/><meta name="twitter:image" content="https://insertafter.com/images/banner.png"/><link rel="icon" href="/images/favicon.svg" type="image/svg+xml" sizes="any"/><link rel="icon" href="/images/favicon-16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/images/favicon-128.png" type="image/png" sizes="128x128"/><script src="https://insertafter.com/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="layout_body__jFZuu"><header class="header_iaHeader__4vCMA"><div><h1><a href="/en" title="Go back to home page" class="header_iaHeaderLogo__0uNr1"><img src="/images/logo.svg" alt="InsertAfter&#x27;s Logo"/></a></h1></div></header><nav class="menu_iaMenu__B_rtj"><ul class="menu_iaMenuBody__0Zveq"><li class="menu_iaMenuItem__rOch4"><a href="/en" title="Go back to home page" class="">Home</a></li><li class="menu_iaMenuItem__rOch4"><a href="/en/blog" title="Read my blog posts" class="">Blog</a></li><li class="menu_iaMenuItem__rOch4"><a href="/en/projects" title="Discover my projects" class="">Projects</a></li><li class="menu_iaMenuItem__rOch4"><a href="/en/about" title="Read more about me" class="">About me</a></li></ul></nav><nav class="languages_iaLanguages__K2J3W"><ul><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagEn__angfJ"><a href="/en"><span>en</span></a></li><li class="languages_iaLanguagesFlag__ruQ4j languages_iaLanguagesFlagFr__Us5Jb languages_selected__w1dKv"><a href="/fr"><span>fr</span></a></li></ul></nav><main class="layout_iaMain__6s2gl"><div><section class="contentBlock_root__802UK"><h1 class="h1_root__VPXQG"><span>Astuces pour utiliser pleinement RequireJS</span></h1><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><span>‚ö† Attention: Cet article est ancien et n&#x27;est conserv√© que pour des raisons historiques. Les modules JavaScript sont maintenant unifi√©s et largement disponibles invalidant les solutions d√©crites dans cet article.</span></p><hr class="hr_root__iMEe9"/><p class="p_root__SHE_W"><span>Pour un projet dont je vous reparlerai bient√¥t, j&#x27;ai utilis√© RequireJS pour la premi√®re fois en production. J&#x27;en profite pour vous faire un petit retour d&#x27;exp√©rience avec quelques astuces de mon cru ;).</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Pr√©sentation</span> <small><a class="anchored_icon__N5Sem" id="presentation" title="Lien vers cette section" href="#presentation"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Je vous ai parl√© r√©cemment des modules JavaScript (n&#x27;h√©sites pas √† lire ou relire mon </span><a class="a_root__WEPS7" title="En savoir plus sur les modules JS" target="_self" href="module%5Fjavascript.html"><span>billet sur les modules JavaScript</span></a><span> pour bien comprendre ce billet). </span><a class="a_root__WEPS7" title="Voir le site officiel de RequireJS" target="_blank" href="http://requirejs.org"><span>RequireJS</span></a><span> est un gestionnaire de modules asynchrone. Il permet de charger les modules JavaScript par l&#x27;analyse des d√©pendances de ces derniers puis les ex√©cute dans le bon ordre.</span></p><p class="p_root__SHE_W"><span>Bien que RequireJS g√®re les modules synchrone du type CommonJS, il est plut√¥t recommand√© d&#x27;utiliser les modulesAMD (Asynchronous Module Definition) qui peuvent ainsi √™tre charg√©s en parall√®le par RequireJS.</span></p><p class="p_root__SHE_W"><span>Pour rendre notre code compatible avec AMD, il suffit d&#x27;utiliser l&#x27;un des patterns propos√©s par James Burke (le cr√©ateur de RequireJS), </span><a class="a_root__WEPS7" title="Voir le d√©p√¥t en question" target="_blank" href="https://github.com/umdjs/umd"><span>sur le d√©p√¥t</span></a><span> du projet UMD (Unified Module Definition) visant √† unifier la d√©finition de modules.</span></p><p class="p_root__SHE_W"><span>La seule chose qui peut para√Ætre d√©routante (et qui √† mon avis est un d√©faut de conception originel) est que les identifiants de modules sont des identifiants et non des chemins de fichiers. Le fait que l&#x27;on puisse utiliser des chemins de fichiers n&#x27;est qu&#x27;un effet de bord puisque les slashs sont permis dans les noms de modules et r√©utilis√©s tels quels lors de la cr√©ation de l&#x27;URL correspondante au script.</span></p><p class="p_root__SHE_W"><span>Cela am√®ne √† quelques soucis quand on souhaite importer un projet compos√© de plusieurs modules au sein de notre propre projet.</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Utilisation</span> <small><a class="anchored_icon__N5Sem" id="utilisation" title="Lien vers cette section" href="#utilisation"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Pour utiliser RequireJS, rien de plus simple, il suffit de t√©l√©charger l&#x27;unique fichier </span><code class="code_root__5JLV_">require.js</code><span> (soit minifi√©, soit en clair pour d√©velopper). Puis, d&#x27;ajouter la balise suivante dans votre HTML (la section </span><code class="code_root__5JLV_">&lt;head&gt;</code><span> de pr√©f√©rence)¬†:</span></p><div class="code_root__5JLV_"><code><pre>&lt;script
  data-main=&quot;javascript/Application&quot;
  src=&quot;javascript/libs/requirejs/require.js&quot;
  type=&quot;text/javascript&quot;
&gt;&lt;/script&gt;</pre></code></div><p class="p_root__SHE_W"><span>Ce bout de code a deux effets, d&#x27;une part, charger RequireJS, d&#x27;autre part, indiquer le fichier principal de votre application. C&#x27;est √† partir de ce fichier (ici,</span><code class="code_root__5JLV_">javascript/Application.js</code><span>) que RequireJS va d√©duire tous les fichiers n√©cessaires pour votre application (appel√©s d√©pendances).</span></p><p class="p_root__SHE_W"><span>Comme vous pouvez le voir sur la capture d&#x27;√©cran de </span><a class="a_root__WEPS7" title="Jouer √† mon Memory" target="_blank" href="http://memory.insertafter.com/"><span>mon dernier projet</span></a><span>, le chargement de RequireJS et son ex√©cution provoque bien le chargement de </span><code class="code_root__5JLV_">Application.js</code><span> puis de </span><a class="a_root__WEPS7" title="Voir l&#x27;endroit o√π ces d√©pendances sont d√©finies" target="_blank" href="https://github.com/nfroidure/Memory/blob/3f5cb8e52ec84ff8e7567588a9180dfb098ba50c/www/javascript/Application.js#L6"><span>ses trois d√©pendances</span></a><span> </span><code class="code_root__5JLV_">Sounds.js</code><span>, </span><code class="code_root__5JLV_">Commandor.js</code><span> et </span><code class="code_root__5JLV_">View.js</code><span>. On peut remarquer que ces trois derni√®res sont charg√©es en paral√®lle.</span></p><div><span class="img_root__vTZoG img_landscape__qBqfT"><span class="img_picture__pfsl0"><img alt="Capture d&#x27;√©cran du chargement du Memory" src="/illustrations/capture-memory1.png"/></span></span></div><p class="p_root__SHE_W"><span>RequireJS est particuli√®rement utile pour le d√©veloppement. Il permet de ne pas avoir √† constamment ajouter/retirer des balises </span><code class="code_root__5JLV_">&lt;script&gt;</code><span> √† chaque nouveau module ajout√© au projet. On peut √©galement l&#x27;utiliser pour charger des scripts √† la vol√©e uniquement lorsque c&#x27;est n√©cessaire. Par exemple, dans mon Memory, je ne charge le code sp√©cifique √† chaque vue que lorsqu&#x27;elle est affich√©e. Par exemple, ci dessous avec la vue </span><code class="code_root__5JLV_">VueOptions.js</code><span>.</span></p><div><span class="img_root__vTZoG img_landscape__qBqfT"><span class="img_picture__pfsl0"><img alt="Capture d&#x27;√©cran de l&#x27;affichage de la vue des options du jeu" src="/illustrations/capture-memory2.png"/></span></span></div><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>r.js et mise en production</span> <small><a class="anchored_icon__N5Sem" id="r-js-et-mise-en-production" title="Lien vers cette section" href="#r-js-et-mise-en-production"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>Bien que RequireJS soit int√©ressant, ce n&#x27;est bien souvent pas la solution pour une application en production. En effet, m√™me asynchrone, le chargement reste bien plus lent que si l&#x27;on regroupait tous les fichiers au sein d&#x27;un seul et m√™me fichier et que, par la m√™me occasion, on en profitait pour le minifier.</span></p><p class="p_root__SHE_W"><span>C&#x27;est l&#x27;objet de r.js du m√™me auteur. Il permet en une ligne de commande de r√©unir et minifier toutes les d√©pendances de votre application. Pour l&#x27;installer, rien de plus simple gr√¢ce √† NodeJS¬†:</span></p><div class="code_root__5JLV_"><code><pre>npm install -g requirejs</pre></code></div><p class="p_root__SHE_W"><span>Pour grouper et minifier tous les fichiers de mon application, cela donne¬†:</span></p><div class="code_root__5JLV_"><code><pre>r.js -o baseUrl=./javascript/ name=Application out=javascript/production.js</pre></code></div><p class="p_root__SHE_W"><span>Tous¬†? Non¬†! Un certains nombre de fichiers r√©sistent au minifieur. Les fichiers charg√© dynamiquement. En effet, r.js se base sur une analyse statique du code source (il n&#x27;est pas ex√©cut√©). Il n&#x27;a donc aucun moyen de deviner si un fichier est charg√© dynamiquement durant le cycle de vie de l&#x27;application.</span></p><p class="p_root__SHE_W"><span>Cela peut-√™tre laiss√© en l&#x27;√©tat sciemment. En effet, si la taille des fichiers charg√©s dynamiquement est tr√®s importante, on pr√©f√®rera continuer de les charger dynamiquement. Sinon, on peut facilement forcer l&#x27;ajout de ces d√©pendances en </span><a class="a_root__WEPS7" title="Voir le code concern√©" target="_blank" href="https://github.com/nfroidure/Memory/blob/3f5cb8e52ec84ff8e7567588a9180dfb098ba50c/www/javascript/Application.js#L3"><span>ajoutant une fonction</span></a><span> faisant un appel √† la fonction </span><code class="code_root__5JLV_">require</code><span> contenant toutes les d√©pendances. Cette fonction n&#x27;est √† aucun moment ex√©cut√©e, mais √ßa, r.js ne le sait pas puisqu&#x27;il se base sur une analyse statique.</span></p><p class="p_root__SHE_W"><span>Nous voil√† donc avec un fichier production.js contenant toutes nos d√©pendances. On pourrait penser que nous touchons au but. Mais pour un perfectionniste, ce n&#x27;est que le d√©but ;).</span></p><h2 class="h2_root__Y02lX"><span class="anchored_root__HWi6K"><span>Supprimer RequireJS</span> <small><a class="anchored_icon__N5Sem" id="supprimer-requirejs" title="Lien vers cette section" href="#supprimer-requirejs"><span>üîó</span></a></small></span></h2><p class="p_root__SHE_W"><span>r.js ne supprime pas la d√©pendance √† RequireJS. Ainsi, pour que votre projet continue de fonctionner, vous devez absolument le conserver. Et √ßa, c&#x27;est pas cool ;). Pour √©viter ce probl√®me, il existe cependant une voie √† emprunter. Les modules UMD. En effet, un module UMD peut √™tre cr√©√© pour fonctionner avec RequireJS et dans le contexte global (c&#x27;est le cas du module </span><a class="a_root__WEPS7" title="Voir le module en question" target="_blank" href="https://github.com/nfroidure/Commandor/blob/master/src/Commandor.js"><span>Commandor.js</span></a><span> par exemple). Certains fonctionnent m√™me avec Node, comme le module </span><a class="a_root__WEPS7" title="Voir le module Promise" target="_blank" href="https://github.com/nfroidure/Promise/blob/master/src/Promise.js"><span>Promise</span></a><span>.</span></p><p class="p_root__SHE_W"><span>Ainsi, si l&#x27;on a utilis√© les modules UMD et non seulement AMD, alors on peut retirer RequireJS et nos modules continueront de fonctionner. Le seul souci est qu&#x27;ils seront ex√©cut√©s dans le contexte global ce qui n&#x27;est pas recommand√© √† cause des collisions qu&#x27;il peut y avoir entre les diff√©rents scripts tiers pr√©sents dans votre page.</span></p><p class="p_root__SHE_W"><span>L&#x27;id√©e est alors de modifier une derni√®re fois votre fichier JavaScript de production en l&#x27;englobant dans une focntion anonyme imm√©diatemment ex√©cut√©e en lui fournissant un contexte vierge. Voici un extrait de mon script de mise en production (</span><a class="a_root__WEPS7" title="Voir le script entier" target="_blank" href="https://github.com/nfroidure/Memory/blob/f57c64ac9301aaf412f2969ddf9db96c5047cb5a/build.sh"><span>build.sh</span></a><span>)¬†:</span></p><div class="code_root__5JLV_"><code><pre># Adding a simple closure
prodContent=$(cat javascript/production.js)
echo &quot;(function() { $prodContent }).call({})&quot; &gt; javascript/production.js</pre></code></div><p class="p_root__SHE_W"><span>Et voil√†, tout est pr√™t, il ne nous reste plus qu&#x27;√† supprimer la balise de RequireJS et ajouter une balise pour notre script de production, de pr√©f√©rence cette fois ci √† la fin de notre document HTML. J&#x27;ai aussi automatis√© √ßa gr√¢ce aux commentaires HTML¬†:</span></p><div class="code_root__5JLV_"><code><pre># Comment RequireJS script tag
sed -i &quot;s/DEV--&gt;/DEV--/g&quot; index.html

# Uncomment production script tag
sed -i &quot;s/PROD--/PROD--&gt;/g&quot; index.html</pre></code></div><p class="p_root__SHE_W"><span>Vos commentaires, avis, am√©liorations √©ventuelles sont les bienvenues ;).</span></p><p class="p_root__SHE_W"><span>Ajout de derni√®re minute¬†:</span><a class="a_root__WEPS7" title="Voir son profil twitter" target="_blank" href="https://twitter.com/%5FFlorian%5FR"><span>Florian</span></a><span> m&#x27;a appris sur Twitter l&#x27;existence du </span><a class="a_root__WEPS7" title="Voir le d√©p√¥t du projet" target="_blank" href="https://github.com/jrburke/almond"><span>projet almond</span></a><span> (tjrs du m√™me auteur), visant √† r√©duire au maximum l&#x27;empreinte de RequireJS. Une bonne alternative √† ma m√©thode si vous d√©cidez de conserver le chargement asynchrone.</span></p><p class="p_root__SHE_W">Published at<!-- --> <!-- -->jeudi 11 juillet 2013 √† 11:57:45<!-- -->.</p></section><section class="contentBlock_root__802UK"><aside class="share_root__Qm_RR"><h2 class="h2_root__Y02lX">Commenter et partager</h2><p class="p_root__SHE_W"><a class="a_root__WEPS7" title="Commenter sur Facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Futiliser_requirejs"><span class="share_icon__bi4Q3 share_facebook__JKn8d"></span>Facebook</a> - <a class="a_root__WEPS7" title="Commenter sur Twitter" target="_blank" href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Futiliser_requirejs&amp;text=Astuces%20pour%20utiliser%20pleinement%20RequireJS&amp;via=nfroidure"><span class="share_icon__bi4Q3 "></span>Twitter</a> - <a class="a_root__WEPS7" title="Me r√©pondre par mail" target="_self" href="mailto:nicolas.froidure@gmail.com"><span class="share_icon__bi4Q3 share_mail__yvBDK"></span>Courriel</a></p></aside></section><section class="contentBlock_root__802UK"><aside class="page_linkedEntries__jiPuT"><h2 class="h2_root__Y02lX">Articles similaires</h2><p class="p_root__SHE_W">Dans les cat√©gories<!-- --> <!-- -->JavaScript<!-- -->.</p><div class="items_entries__5hkLG"><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//promises_javascript_ouvrons_capot">Les promises avec JavaScript¬†: ouvrons le capot¬†!</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Dans le petit monde de JavaScript les promises font l&#x27;actualit√©. Je vous propose de comprendre les promises par l&#x27;impl√©mentation.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//promises_javascript_ouvrons_capot">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->samedi 8 juin 2013 √† 12:04:17<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//creer_bot_irc_avec_nodejs">Cr√©er un bot IRC avec NodeJS</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">J&#x27;ai r√©cemment pu tester la cr√©ation d&#x27;un bot NodeJS gr√¢ce √† la mise en place de Marionnette, le bot IRC de FranceJS.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//creer_bot_irc_avec_nodejs">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->dimanche 5 mai 2013 √† 10:04:57<!-- -->.</p><div class="items_clear__3fyGk"></div></div><div class="items_entry_item__GWeg7"><h2 class="h2_root__Y02lX items_entry_title__vJ_8h"><a class="a_root__WEPS7 items_entry_link__EtVod" title="Lire cet article de blog" target="_self" href=".//capskiller_stop_aux_majuscules">CapsKiller¬†: Stop aux majuscules</a></h2><p class="p_root__SHE_W items_entry_description__ZWt9y">Les digital natives supportent mal les majuscules dans les courriels. En effet, cela est assimil√© √† des cris. Malheureusement, tout le monde n&#x27;en fait pas grand cas. CapsKiller pour Thunderbird est l√† pour vous en prot√©ger.<!-- --> <br/><a class="a_root__WEPS7" title="Lire cet article de blog" target="_self" href=".//capskiller_stop_aux_majuscules">Lire la suite</a></p><p class="p_root__SHE_W items_entry_time__iNrot">Published at<!-- --> <!-- -->samedi 23 f√©vrier 2013 √† 12:05:23<!-- -->.</p><div class="items_clear__3fyGk"></div></div></div></aside></section></div></main><aside class="social_iaSocial__kdR1x"><nav><ul><li><a href="https://mastodon.social/@nfroidure" rel="me" title="Follow me on Mastodon" class="social_iaSocialMastodon__MTF6o"><span>Mastodon</span></a></li><li><a href="https://bsky.app/profile/nfroidure.bsky.social" rel="me" title="Follow me on Bluesky" class="social_iaSocialBluesky__fKW6M"><span>Bluesky</span></a></li><li><a href="https://twitter.com/nfroidure" title="Follow me on Twitter" class="social_iaSocialTwitter__9nU6R"><span>Twitter</span></a></li><li><a href="https://github.com/nfroidure" title="See my GitHub projects" class="social_iaSocialGithub__vcU5_"><span>GitHub</span></a></li><li><a href="https://www.npmjs.org/~nfroidure" title="Check my NPM modules" class="social_iaSocialNpm__6nku5"><span>NPM</span></a></li><li><a href="https://www.linkedin.com/in/nfroidure/" rel="me" title="See my LinkedIn profile" class="social_iaSocialLinkedin__pWACO"><span>LinkedIn</span></a></li><li><a href="https://facebook.com/nicolas.froidure.douai" rel="me" title="Follow me on Facebook" class="social_iaSocialFacebook__w4wfH"><span>Facebook</span></a></li><li><a href="/en/blog/index.atom" title="Subscribe to my RSS feed" class="social_iaSocialFeed__gEQQ0"><span>RSS Feed</span></a></li></ul></nav></aside><footer class="footer_iaFooter__rhlnQ"><p class="footer_iaFooterContent__VZndF">¬© Nicolas Froidure 2012-<!-- -->2024</p></footer><script src="https://insertafter.com/_next/static/chunks/webpack-0fb79efa18faaf55.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:HL[\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"style\",{\"crossOrigin\":\"\"}]\n3:HL[\"https://insertafter.com/_next/static/css/bd3e0138d7b84072.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\nc:I[8955,[],\"\"]\n8:[\"locale\",\"articles-utiliser_requirejs\",\"d\"]\n"])</script><script>self.__next_f.push([1,"1:[null,[\"$\",\"$L4\",null,{\"buildId\":\"TAeA64I6nSlHSqkZiZ8iQ\",\"assetPrefix\":\"https://insertafter.com\",\"initialCanonicalUrl\":\"/articles-utiliser_requirejs\",\"initialTree\":[\"\",{\"children\":[\"(withoutLocale)\",{\"children\":[[\"locale\",\"articles-utiliser_requirejs\",\"d\"],{\"children\":[\"__PAGE__?{\\\"locale\\\":\\\"articles-utiliser_requirejs\\\"}\",{}]}]},\"$undefined\",\"$undefined\",true]}],\"initialSeedData\":[\"\",{\"children\":[\"(withoutLocale)\",{\"children\":[[\"locale\",\"articles-utiliser_requirejs\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withoutLocale)\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/bd3e0138d7b84072.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[null,\"$La\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://insertafter.com/_next/static/css/655a273f6fe37552.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]],\"initialHead\":[false,\"$Lb\"],\"globalErrorComponent\":\"$c\"}]]\n"])</script><script>self.__next_f.push([1,"d:\"$Sreact.strict_mode\"\ne:I[4630,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\nf:I[4341,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"960\",\"static/chunks/app/(withLocale)/%5Blocale%5D/layout-3730889d272dc34b.js\"],\"\"]\n10:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems"])</script><script>self.__next_f.push([1,"\":\"center\",\"justifyContent\":\"center\"}\n11:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\n12:{\"display\":\"inline-block\"}\n13:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"$d\",null,{\"children\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_body__jFZuu\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"header_iaHeader__4vCMA\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/en\",\"title\":\"Go back to home page\",\"className\":\"header_iaHeaderLogo__0uNr1\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/logo.svg\",\"alt\":\"InsertAfter's Logo\"}]}]}]}]}],[\"$\",\"$Le\",null,{\"locale\":\"en\",\"dictionary\":{\"home\":{\"label\":\"Home\",\"title\":\"Go back to home page\"},\"blog\":{\"label\":\"Blog\",\"title\":\"Read my blog posts\"},\"projects\":{\"label\":\"Projects\",\"title\":\"Discover my projects\"},\"about\":{\"label\":\"About me\",\"title\":\"Read more about me\"}}}],[\"$\",\"$Lf\",null,{\"locale\":\"en\"}],[\"$\",\"main\",null,{\"className\":\"layout_iaMain__6s2gl\",\"children\":[\"$\",\"div\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(withoutLocale)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$11\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$12\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$13\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}],[\"$\",\"aside\",null,{\"className\":\"social_iaSocial__kdR1x\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@nfroidure\",\"rel\":\"me\",\"title\":\"Follow me on Mastodon\",\"className\":\"social_iaSocialMastodon__MTF6o\",\"children\":[\"$\",\"span\",null,{\"children\":\"Mastodon\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://bsky.app/profile/nfroidure.bsky.social\",\"rel\":\"me\",\"title\":\"Follow me on Bluesky\",\"className\":\"social_iaSocialBluesky__fKW6M\",\"children\":[\"$\",\"span\",null,{\"children\":\"Bluesky\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://twitter.com/nfroidure\",\"title\":\"Follow me on Twitter\",\"className\":\"social_iaSocialTwitter__9nU6R\",\"children\":[\"$\",\"span\",null,{\"children\":\"Twitter\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/nfroidure\",\"title\":\"See my GitHub projects\",\"className\":\"social_iaSocialGithub__vcU5_\",\"children\":[\"$\",\"span\",null,{\"children\":\"GitHub\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.org/~nfroidure\",\"title\":\"Check my NPM modules\",\"className\":\"social_iaSocialNpm__6nku5\",\"children\":[\"$\",\"span\",null,{\"children\":\"NPM\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/nfroidure/\",\"rel\":\"me\",\"title\":\"See my LinkedIn profile\",\"className\":\"social_iaSocialLinkedin__pWACO\",\"children\":[\"$\",\"span\",null,{\"children\":\"LinkedIn\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://facebook.com/nicolas.froidure.douai\",\"rel\":\"me\",\"title\":\"Follow me on Facebook\",\"className\":\"social_iaSocialFacebook__w4wfH\",\"children\":[\"$\",\"span\",null,{\"children\":\"Facebook\"}]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/en/blog/index.atom\",\"title\":\"Subscribe to my RSS feed\",\"className\":\"social_iaSocialFeed__gEQQ0\",\"children\":[\"$\",\"span\",null,{\"children\":\"RSS Feed\"}]}]}]]}]}]}],[\"$\",\"footer\",null,{\"className\":\"footer_iaFooter__rhlnQ\",\"children\":[\"$\",\"p\",null,{\"className\":\"footer_iaFooterContent__VZndF\",\"children\":[\"¬© Nicolas Froidure 2012-\",2024]}]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"14:I[5250,[\"176\",\"static/chunks/176-0a03be62efe5672b.js\",\"876\",\"static/chunks/876-4c07c683293830f5.js\",\"770\",\"static/chunks/app/(withoutLocale)/%5Blocale%5D/page-0e78a7ab96f67f67.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[[[\"$\",\"h1\",null,{\"className\":\"h1_root__VPXQG\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Astuces pour utiliser pleinement RequireJS\"}]]}],[\"$\",\"hr\",null,{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"‚ö† Attention: Cet article est ancien et n'est conserv√© que pour des raisons historiques. Les modules JavaScript sont maintenant unifi√©s et largement disponibles invalidant les solutions d√©crites dans cet article.\"}]]}],[\"$\",\"hr\",null,{\"className\":\"hr_root__iMEe9\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Pour un projet dont je vous reparlerai bient√¥t, j'ai utilis√© RequireJS pour la premi√®re fois en production. J'en profite pour vous faire un petit retour d'exp√©rience avec quelques astuces de mon cru ;).\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Pr√©sentation\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L14\",null,{\"href\":\"#presentation\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"presentation\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Je vous ai parl√© r√©cemment des modules JavaScript (n'h√©sites pas √† lire ou relire mon \"}],[\"$\",\"$L14\",null,{\"href\":\"module%5Fjavascript.html\",\"className\":\"a_root__WEPS7\",\"title\":\"En savoir plus sur les modules JS\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"billet sur les modules JavaScript\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" pour bien comprendre ce billet). \"}],[\"$\",\"$L14\",null,{\"href\":\"http://requirejs.org\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le site officiel de RequireJS\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"RequireJS\"}]]]}],[\"$\",\"span\",\"4\",{\"children\":\" est un gestionnaire de modules asynchrone. Il permet de charger les modules JavaScript par l'analyse des d√©pendances de ces derniers puis les ex√©cute dans le bon ordre.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Bien que RequireJS g√®re les modules synchrone du type CommonJS, il est plut√¥t recommand√© d'utiliser les modulesAMD (Asynchronous Module Definition) qui peuvent ainsi √™tre charg√©s en parall√®le par RequireJS.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Pour rendre notre code compatible avec AMD, il suffit d'utiliser l'un des patterns propos√©s par James Burke (le cr√©ateur de RequireJS), \"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/umdjs/umd\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le d√©p√¥t en question\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"sur le d√©p√¥t\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" du projet UMD (Unified Module Definition) visant √† unifier la d√©finition de modules.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"La seule chose qui peut para√Ætre d√©routante (et qui √† mon avis est un d√©faut de conception originel) est que les identifiants de modules sont des identifiants et non des chemins de fichiers. Le fait que l'on puisse utiliser des chemins de fichiers n'est qu'un effet de bord puisque les slashs sont permis dans les noms de modules et r√©utilis√©s tels quels lors de la cr√©ation de l'URL correspondante au script.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Cela am√®ne √† quelques soucis quand on souhaite importer un projet compos√© de plusieurs modules au sein de notre propre projet.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Utilisation\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L14\",null,{\"href\":\"#utilisation\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"utilisation\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Pour utiliser RequireJS, rien de plus simple, il suffit de t√©l√©charger l'unique fichier \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"require.js\"}],[\"$\",\"span\",\"2\",{\"children\":\" (soit minifi√©, soit en clair pour d√©velopper). Puis, d'ajouter la balise suivante dans votre HTML (la section \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"\u003chead\u003e\"}],[\"$\",\"span\",\"4\",{\"children\":\" de pr√©f√©rence)¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"\u003cscript\\n  data-main=\\\"javascript/Application\\\"\\n  src=\\\"javascript/libs/requirejs/require.js\\\"\\n  type=\\\"text/javascript\\\"\\n\u003e\u003c/script\u003e\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ce bout de code a deux effets, d'une part, charger RequireJS, d'autre part, indiquer le fichier principal de votre application. C'est √† partir de ce fichier (ici,\"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"javascript/Application.js\"}],[\"$\",\"span\",\"2\",{\"children\":\") que RequireJS va d√©duire tous les fichiers n√©cessaires pour votre application (appel√©s d√©pendances).\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Comme vous pouvez le voir sur la capture d'√©cran de \"}],[\"$\",\"$L14\",null,{\"href\":\"http://memory.insertafter.com/\",\"className\":\"a_root__WEPS7\",\"title\":\"Jouer √† mon Memory\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"mon dernier projet\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\", le chargement de RequireJS et son ex√©cution provoque bien le chargement de \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"Application.js\"}],[\"$\",\"span\",\"4\",{\"children\":\" puis de \"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/nfroidure/Memory/blob/3f5cb8e52ec84ff8e7567588a9180dfb098ba50c/www/javascript/Application.js#L6\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir l'endroit o√π ces d√©pendances sont d√©finies\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"ses trois d√©pendances\"}]]]}],[\"$\",\"span\",\"6\",{\"children\":\" \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"Sounds.js\"}],[\"$\",\"span\",\"8\",{\"children\":\", \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"Commandor.js\"}],[\"$\",\"span\",\"10\",{\"children\":\" et \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"View.js\"}],[\"$\",\"span\",\"12\",{\"children\":\". On peut remarquer que ces trois derni√®res sont charg√©es en paral√®lle.\"}]]}],[\"$\",\"div\",\"16\",{\"children\":[\"$\",\"span\",null,{\"className\":\"img_root__vTZoG img_landscape__qBqfT\",\"children\":[[\"$\",\"span\",null,{\"className\":\"img_picture__pfsl0\",\"children\":[\"$\",\"img\",null,{\"alt\":\"Capture d'√©cran du chargement du Memory\",\"src\":\"/illustrations/capture-memory1.png\"}]}],null]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"RequireJS est particuli√®rement utile pour le d√©veloppement. Il permet de ne pas avoir √† constamment ajouter/retirer des balises \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"\u003cscript\u003e\"}],[\"$\",\"span\",\"2\",{\"children\":\" √† chaque nouveau module ajout√© au projet. On peut √©galement l'utiliser pour charger des scripts √† la vol√©e uniquement lorsque c'est n√©cessaire. Par exemple, dans mon Memory, je ne charge le code sp√©cifique √† chaque vue que lorsqu'elle est affich√©e. Par exemple, ci dessous avec la vue \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"VueOptions.js\"}],[\"$\",\"span\",\"4\",{\"children\":\".\"}]]}],[\"$\",\"div\",\"18\",{\"children\":[\"$\",\"span\",null,{\"className\":\"img_root__vTZoG img_landscape__qBqfT\",\"children\":[[\"$\",\"span\",null,{\"className\":\"img_picture__pfsl0\",\"children\":[\"$\",\"img\",null,{\"alt\":\"Capture d'√©cran de l'affichage de la vue des options du jeu\",\"src\":\"/illustrations/capture-memory2.png\"}]}],null]}]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"r.js et mise en production\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L14\",null,{\"href\":\"#r-js-et-mise-en-production\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"r-js-et-mise-en-production\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Bien que RequireJS soit int√©ressant, ce n'est bien souvent pas la solution pour une application en production. En effet, m√™me asynchrone, le chargement reste bien plus lent que si l'on regroupait tous les fichiers au sein d'un seul et m√™me fichier et que, par la m√™me occasion, on en profitait pour le minifier.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"C'est l'objet de r.js du m√™me auteur. Il permet en une ligne de commande de r√©unir et minifier toutes les d√©pendances de votre application. Pour l'installer, rien de plus simple gr√¢ce √† NodeJS¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"npm install -g requirejs\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Pour grouper et minifier tous les fichiers de mon application, cela donne¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"r.js -o baseUrl=./javascript/ name=Application out=javascript/production.js\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Tous¬†? Non¬†! Un certains nombre de fichiers r√©sistent au minifieur. Les fichiers charg√© dynamiquement. En effet, r.js se base sur une analyse statique du code source (il n'est pas ex√©cut√©). Il n'a donc aucun moyen de deviner si un fichier est charg√© dynamiquement durant le cycle de vie de l'application.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Cela peut-√™tre laiss√© en l'√©tat sciemment. En effet, si la taille des fichiers charg√©s dynamiquement est tr√®s importante, on pr√©f√®rera continuer de les charger dynamiquement. Sinon, on peut facilement forcer l'ajout de ces d√©pendances en \"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/nfroidure/Memory/blob/3f5cb8e52ec84ff8e7567588a9180dfb098ba50c/www/javascript/Application.js#L3\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le code concern√©\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"ajoutant une fonction\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" faisant un appel √† la fonction \"}],[\"$\",\"code\",null,{\"className\":\"code_root__5JLV_\",\"children\":\"require\"}],[\"$\",\"span\",\"4\",{\"children\":\" contenant toutes les d√©pendances. Cette fonction n'est √† aucun moment ex√©cut√©e, mais √ßa, r.js ne le sait pas puisqu'il se base sur une analyse statique.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Nous voil√† donc avec un fichier production.js contenant toutes nos d√©pendances. On pourrait penser que nous touchons au but. Mais pour un perfectionniste, ce n'est que le d√©but ;).\"}]]}],[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":[\"$\",\"span\",null,{\"className\":\"anchored_root__HWi6K\",\"children\":[[[\"$\",\"span\",\"0\",{\"children\":\"Supprimer RequireJS\"}]],\" \",[\"$\",\"small\",null,{\"children\":[\"$\",\"$L14\",null,{\"href\":\"#supprimer-requirejs\",\"className\":\"anchored_icon__N5Sem\",\"id\":\"supprimer-requirejs\",\"title\":\"Lien vers cette section\",\"children\":[\"$\",\"span\",null,{\"children\":\"üîó\"}]}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"r.js ne supprime pas la d√©pendance √† RequireJS. Ainsi, pour que votre projet continue de fonctionner, vous devez absolument le conserver. Et √ßa, c'est pas cool ;). Pour √©viter ce probl√®me, il existe cependant une voie √† emprunter. Les modules UMD. En effet, un module UMD peut √™tre cr√©√© pour fonctionner avec RequireJS et dans le contexte global (c'est le cas du module \"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/nfroidure/Commandor/blob/master/src/Commandor.js\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le module en question\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Commandor.js\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" par exemple). Certains fonctionnent m√™me avec Node, comme le module \"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/nfroidure/Promise/blob/master/src/Promise.js\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le module Promise\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Promise\"}]]]}],[\"$\",\"span\",\"4\",{\"children\":\".\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ainsi, si l'on a utilis√© les modules UMD et non seulement AMD, alors on peut retirer RequireJS et nos modules continueront de fonctionner. Le seul souci est qu'ils seront ex√©cut√©s dans le contexte global ce qui n'est pas recommand√© √† cause des collisions qu'il peut y avoir entre les diff√©rents scripts tiers pr√©sents dans votre page.\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"L'id√©e est alors de modifier une derni√®re fois votre fichier JavaScript de production en l'englobant dans une focntion anonyme imm√©diatemment ex√©cut√©e en lui fournissant un contexte vierge. Voici un extrait de mon script de mise en production (\"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/nfroidure/Memory/blob/f57c64ac9301aaf412f2969ddf9db96c5047cb5a/build.sh\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le script entier\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"build.sh\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\")¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"# Adding a simple closure\\nprodContent=$(cat javascript/production.js)\\necho \\\"(function() { $prodContent }).call({})\\\" \u003e javascript/production.js\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Et voil√†, tout est pr√™t, il ne nous reste plus qu'√† supprimer la balise de RequireJS et ajouter une balise pour notre script de production, de pr√©f√©rence cette fois ci √† la fin de notre document HTML. J'ai aussi automatis√© √ßa gr√¢ce aux commentaires HTML¬†:\"}]]}],[\"$\",\"div\",null,{\"className\":\"code_root__5JLV_\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"pre\",null,{\"children\":\"# Comment RequireJS script tag\\nsed -i \\\"s/DEV--\u003e/DEV--/g\\\" index.html\\n\\n# Uncomment production script tag\\nsed -i \\\"s/PROD--/PROD--\u003e/g\\\" index.html\"}]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Vos commentaires, avis, am√©liorations √©ventuelles sont les bienvenues ;).\"}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"span\",\"0\",{\"children\":\"Ajout de derni√®re minute¬†:\"}],[\"$\",\"$L14\",null,{\"href\":\"https://twitter.com/%5FFlorian%5FR\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir son profil twitter\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"Florian\"}]]]}],[\"$\",\"span\",\"2\",{\"children\":\" m'a appris sur Twitter l'existence du \"}],[\"$\",\"$L14\",null,{\"href\":\"https://github.com/jrburke/almond\",\"className\":\"a_root__WEPS7\",\"title\":\"Voir le d√©p√¥t du projet\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",\"0\",{\"children\":\"projet almond\"}]]]}],[\"$\",\"span\",\"4\",{\"children\":\" (tjrs du m√™me auteur), visant √† r√©duire au maximum l'empreinte de RequireJS. Une bonne alternative √† ma m√©thode si vous d√©cidez de conserver le chargement asynchrone.\"}]]}]],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Published at\",\" \",\"jeudi 11 juillet 2013 √† 11:57:45\",\".\"]}]]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"share_root__Qm_RR\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Commenter et partager\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[[\"$\",\"$L14\",null,{\"href\":\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finsertafter.com%2Fblog%2Futiliser_requirejs\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Facebook\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_facebook__JKn8d\"}],\"Facebook\"]]}],\" - \",[\"$\",\"$L14\",null,{\"href\":\"https://twitter.com/intent/tweet/?url=https%3A%2F%2Finsertafter.com%2Fblog%2Futiliser_requirejs\u0026text=Astuces%20pour%20utiliser%20pleinement%20RequireJS\u0026via=nfroidure\",\"className\":\"a_root__WEPS7\",\"title\":\"Commenter sur Twitter\",\"target\":\"_blank\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 \"}],\"Twitter\"]]}],\" - \",[\"$\",\"$L14\",null,{\"href\":\"mailto:nicolas.froidure@gmail.com\",\"className\":\"a_root__WEPS7\",\"title\":\"Me r√©pondre par mail\",\"target\":\"_self\",\"children\":[null,[[\"$\",\"span\",null,{\"className\":\"share_icon__bi4Q3 share_mail__yvBDK\"}],\"Courriel\"]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"contentBlock_root__802UK\",\"children\":[\"$\",\"aside\",null,{\"className\":\"page_linkedEntries__jiPuT\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX\",\"children\":\"Articles similaires\"}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W\",\"children\":[\"Dans les cat√©gories\",\" \",\"JavaScript\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_entries__5hkLG\",\"children\":[[\"$\",\"div\",\"promises_javascript_ouvrons_capot\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L14\",null,{\"href\":\".//promises_javascript_ouvrons_capot\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Les promises avec JavaScript¬†: ouvrons le capot¬†!\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Dans le petit monde de JavaScript les promises font l'actualit√©. Je vous propose de comprendre les promises par l'impl√©mentation.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L14\",null,{\"href\":\".//promises_javascript_ouvrons_capot\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"samedi 8 juin 2013 √† 12:04:17\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"creer_bot_irc_avec_nodejs\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L14\",null,{\"href\":\".//creer_bot_irc_avec_nodejs\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Cr√©er un bot IRC avec NodeJS\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"J'ai r√©cemment pu tester la cr√©ation d'un bot NodeJS gr√¢ce √† la mise en place de Marionnette, le bot IRC de FranceJS.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L14\",null,{\"href\":\".//creer_bot_irc_avec_nodejs\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"dimanche 5 mai 2013 √† 10:04:57\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}],[\"$\",\"div\",\"capskiller_stop_aux_majuscules\",{\"className\":\"items_entry_item__GWeg7\",\"children\":[null,[\"$\",\"h2\",null,{\"className\":\"h2_root__Y02lX items_entry_title__vJ_8h\",\"children\":[\"$\",\"$L14\",null,{\"href\":\".//capskiller_stop_aux_majuscules\",\"className\":\"a_root__WEPS7 items_entry_link__EtVod\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"CapsKiller¬†: Stop aux majuscules\"]}]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_description__ZWt9y\",\"children\":[\"Les digital natives supportent mal les majuscules dans les courriels. En effet, cela est assimil√© √† des cris. Malheureusement, tout le monde n'en fait pas grand cas. CapsKiller pour Thunderbird est l√† pour vous en prot√©ger.\",\" \",[\"$\",\"br\",null,{}],[\"$\",\"$L14\",null,{\"href\":\".//capskiller_stop_aux_majuscules\",\"className\":\"a_root__WEPS7\",\"title\":\"Lire cet article de blog\",\"target\":\"_self\",\"children\":[null,\"Lire la suite\"]}]]}],[\"$\",\"p\",null,{\"className\":\"p_root__SHE_W items_entry_time__iNrot\",\"children\":[\"Published at\",\" \",\"samedi 23 f√©vrier 2013 √† 12:05:23\",\".\"]}],[\"$\",\"div\",null,{\"className\":\"items_clear__3fyGk\"}]]}]]}]]}]}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"content\":\"#3e78b2\"}],[\"$\",\"meta\",\"2\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"3\",{\"children\":\"Astuces pour utiliser pleinement RequireJS - Nicolas Froidure\"}],[\"$\",\"meta\",\"4\",{\"name\":\"description\",\"content\":\"Pour un projet dont je vous reparlerai bient√¥t, j'ai utilis√© RequireJS pour la premi√®re fois en production. J'en profite pour vous faire un petit retour d'exp√©rience avec quelques astuces de mon cru ;).\"}],[\"$\",\"link\",\"5\",{\"rel\":\"author\",\"href\":\"https://insertafter.com\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"link\",\"8\",{\"rel\":\"canonical\",\"href\":\"https://insertafter.com/fr/blog/utiliser_requirejs\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:title\",\"content\":\"Astuces pour utiliser pleinement RequireJS - Nicolas Froidure\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:description\",\"content\":\"Pour un projet dont je vous reparlerai bient√¥t, j'ai utilis√© RequireJS pour la premi√®re fois en production. J'en profite pour vous faire un petit retour d'exp√©rience avec quelques astuces de mon cru ;).\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:url\",\"content\":\"https://insertafter.com/fr/blog/utiliser_requirejs\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:site_name\",\"content\":\"Nicolas Froidure\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:locale\",\"content\":\"fr_FR\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:site\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:creator\",\"content\":\"@nfroidure\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:title\",\"content\":\"Astuces pour utiliser pleinement RequireJS - Nicolas Froidure\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:description\",\"content\":\"Pour un projet dont je vous reparlerai bient√¥t, j'ai utilis√© RequireJS pour la premi√®re fois en production. J'en profite pour vous faire un petit retour d'exp√©rience avec quelques astuces de mon cru ;).\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image:alt\",\"content\":\"Banni√®re du site\"}],[\"$\",\"meta\",\"23\",{\"name\":\"twitter:image\",\"content\":\"https://insertafter.com/images/banner.png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"icon\",\"href\":\"/images/favicon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"link\",\"25\",{\"rel\":\"icon\",\"href\":\"/images/favicon-16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"26\",{\"rel\":\"icon\",\"href\":\"/images/favicon-128.png\",\"type\":\"image/png\",\"sizes\":\"128x128\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>